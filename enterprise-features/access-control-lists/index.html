<!doctype html><html lang=en class="js csstransforms3d"><head><script>var subPaths={"/clients/#implementation":"/clients/overview/#implementation","/clients/#transactions":"/clients/overview/#transactions","/clients/#create-the-client":"/clients/go/#create-the-client","/clients/#alter-the-database":"/clients/go/#alter-the-database","/clients/#create-a-transaction":"/clients/go/#create-a-transaction","/clients/#read-only-transactions":"/clients/go/#read-only-transactions","/clients/#run-a-query":"/clients/go/#run-a query","/clients/#run-a-mutation":"/clients/go/#run-a-mutation","/clients/#commit-the-transaction":"/clients/go/#commit-the-transaction","/clients/#complete-example":"/clients/go/#complete-example","/clients/#grpc":"/clients/javascript/#grpc","/clients/#http":"/clients/javascript#http","/clients/#create-the-client-1":"/clients/raw-http/#create-the-client-1","/clients/#alter-the-database-1":"/clients/raw-http/#alter-the-database-1","/clients/#start-a-transaction":"/clients/raw-http/#start-a-transaction","/clients/#run-a-query-1":"/clients/raw-http/#run-a-query","/clients/#run-a-mutation-1":"/clients/raw-http/#run-a-mutation","/clients/#committing-the-transaction":"/clients/raw-http/#committing-the-transaction","/clients/#aborting-the-transaction":"/clients/raw-http/#aborting-the-transaction","/clients/#running-read-only-queries":"/clients/raw-http/#running-read-only-queries","/clients/#running-best-effort-queries":"/clients/raw-http/#running-best-effort-queries","/clients/#compression-via-http":"/clients/raw-http/#compression-via-http","/clients/#run-a-query-in-json-format":"/clients/raw-http/#run-a-query-in-json-format","/deploy/#install-dgraph":"/deploy/download","/deploy/#docker":"/deploy/download/#docker","/deploy/#automatic-download":"/deploy/download/#automatic-download","/deploy/#manual-download-[optional]":"/deploy/download/#manual-download-[optional]","/deploy/#building-from-source":"/deploy/download/#building-from-source","/deploy/#understanding-dgraph-cluster":"/deploy/cluster-setup/#understanding-dgraph-cluster","/deploy/#sharding":"/deploy/cluster-setup/#sharding","/deploy/#shard-rebalancing":"/deploy/cluster-setup/#shard-rebalancing","/deploy/#consistent-replication":"/deploy/cluster-setup/#consistent-replication","/deploy/#types-of-ports":"/deploy/ports-usage/#types-of-ports","/deploy/#ports-used-by-different-nodes":"/deploy/ports-usage/#ports-used-by-different-nodes","/deploy/#ha-cluster-setup":"/deploy/ports-usage/#ha-cluster-setup","/deploy/#dgraph-zero":"/deploy/ports-usage/#dgraph-zero","/deploy/#dgraph-alpha":"/deploy/ports-usage/#dgraph-alpha","/deploy/#run-directly-on-the-host":"/deploy/single-host-setup/#run-directly-on-the-host","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker":"/deploy/single-host-setup/#run-using-docker","/deploy/#create-docker-network":"/deploy/single-host-setup/#create-docker-network","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker-compose-(on-single-aws-instance)":"/deploy/single-host-setup/#run-using-docker-compose-(on-single-aws-instance)","/deploy/#using-docker-swarm":"/deploy/multi-host-setup/#using-docker-swarm","/deploy/#cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#cluster-setup-using-docker-swarm","/deploy/#ha-cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#ha-cluster-setup-using-docker-swarm","/deploy/#single-server":"/deploy/kubernetes/#single-server","/deploy/#deploy-single-server":"/deploy/kubernetes/#deploy-single-server","/deploy/#verify-single-server":"/deploy/kubernetes/#verify-single-server","/deploy/#test-single-server-setup":"/deploy/kubernetes/#test-single-server-setup","/deploy/#remove-single-server-resources":"/deploy/kubernetes/#remove-single-server-resources","/deploy/#ha-cluster-setup-using-kubernetes":"/deploy/kubernetes/#ha-cluster-setup-using-kubernetes","/deploy/#validate-kubernetes-cluster-for-ha":"/deploy/kubernetes/#validate-kubernetes-cluster-for-ha","/deploy/#verify-dgraph-ha-cluster":"/deploy/kubernetes/#verify-dgraph-ha-cluster","/deploy/#test-dgraph-ha-cluster-setup":"/deploy/kubernetes/#test-dgraph-ha-cluster-setup","/deploy/#delete-dgraph-ha-cluster-resources":"/deploy/kubernetes/#delete-dgraph-ha-cluster-resources","/deploy/#using-helm-chart":"/deploy/kubernetes/#using-helm-chart","/deploy/#installing-the-chart":"/deploy/kubernetes/#installing-the-chart","/deploy/#upgrading-the-chart":"/deploy/kubernetes/#upgrading-the-chart","/deploy/#deleting-the-chart":"/deploy/kubernetes/#deleting-the-chart","/deploy/#configuration":"/deploy/kubernetes/#configuration","/deploy/#monitoring-in-kubernetes":"/deploy/kubernetes/#monitoring-in-kubernetes","/deploy/#kubernetes-storage":"/deploy/kubernetes/#kubernetes-storage","/deploy/#local-storage":"/deploy/kubernetes/#local-storage","/deploy/#non-local-persistent-disks":"/deploy/kubernetes/#non-local-persistent-disks","/deploy/#removing-a-dgraph-pod":"/deploy/kubernetes/#removing-a-dgraph-pod","/deploy/#kubernetes-and-bulk-loader":"/deploy/kubernetes/#kubernetes-and-bulk-loader","/deploy/#more-about-dgraph-alpha":"/deploy/dgraph-alpha","/deploy/#querying-health":"/deploy/dgraph-alpha/#querying-health","/deploy/#more-about-dgraph-zero":"/deploy/dgraph-zero","/deploy/#more-about-state-endpoint":"/deploy/dgraph-zero/#more-about-state-endpoint","/deploy/#query-logging":"/deploy/log-format/#query-logging","/deploy/#dgraph-certificate-management-tool":"/deploy/tls-configuration/#dgraph-certificate-management-tool","/deploy/#file-naming-conventions":"/deploy/tls-configuration/#file-naming-conventions","/deploy/#certificate-inspection":"/deploy/tls-configuration/#certificate-inspection","/deploy/#tls-options":"/deploy/tls-configuration/#tls-options","/deploy/#using-tls-without-client-authentication":"/deploy/tls-configuration/#using-tls-without-client-authentication","/deploy/#using-tls-with-client-authentication":"/deploy/tls-configuration/#using-tls-with-client-authentication","/deploy/#client-authentication-options":"/deploy/tls-configuration/#client-authentication-options","/deploy/#using-ratel-ui-with-client-authentication":"/deploy/tls-configuration/#using-ratel-ui-with-client-authentication","/deploy/#using-curl-with-client-authentication":"/deploy/tls-configuration/#using-curl-with-client-authentication","/deploy/#access-data-using-a-client":"/deploy/tls-configuration/#access-data-using-a-client","/deploy/#troubleshooting-ratel-s-client-authentication":"/deploy/tls-configuration/#troubleshooting-ratel-s-client-authentication","/deploy/#live-loader":"/deploy/fast-data-loading/#live-loader","/deploy/#encrypted-imports-via-live-loader":"/deploy/fast-data-loading/#encrypted-imports-via-live-loader","/deploy/#encrypted-rdf-json-file-and-schema-via-live-loader":"/deploy/fast-data-loading/#encrypted-rdf-json-file-and-schema-via-live-loader","/deploy/#other-live-loader-options":"/deploy/fast-data-loading/#other-live-loader-options","/deploy/#bulk-loader":"/deploy/fast-data-loading/#bulk-loader","/deploy/#encryption-at-rest-with-bulk-loader":"/deploy/fast-data-loading/#encryption-at-rest-with-bulk-loader","/deploy/#encrypting-imports-via-bulk-loader":"/deploy/fast-data-loading/#encrypting-imports-via-bulk-loader","/deploy/#other-bulk-loader-options":"/deploy/fast-data-loading/#other-bulk-loader-options","/deploy/#tuning-monitoring":"/deploy/fast-data-loading/#tuning-monitoring","/deploy/#disk-metrics":"/deploy/metrics/#disk-metrics","/deploy/#memory-metrics":"/deploy/metrics/#memory-metrics","/deploy/#activity-metrics":"/deploy/metrics/#activity-metrics","/deploy/#health-metrics":"/deploy/metrics/#health-metrics","/deploy/#go-metrics":"/deploy/metrics/#go-metrics","/deploy/#examining-traces-with-zpages":"/deploy/tracing/#examining-traces-with-zpages","/deploy/#examining-traces-with-jaeger":"/deploy/tracing/#examining-traces-with-jaeger","/deploy/#setting-up-multiple-dgraph-clusters-with-jaeger":"/deploy/tracing/#setting-up-multiple-dgraph-clusters-with-jaeger","/deploy/#whitelisting-admin-operations":"/deploy/dgraph-administration/#whitelisting-admin-operations","/deploy/#restricting-mutation-operations":"/deploy/dgraph-administration/#restricting-mutation-operations","/deploy/#securing-alter-operations":"/deploy/dgraph-administration/#securing-alter-operations","/deploy/#export-database":"/deploy/dgraph-administration/#exporting-database","/deploy/#encrypting-exports":"/deploy/dgraph-administration/#encrypting-exports","/deploy/#shutting-down-database":"/deploy/dgraph-administration/#shutting-down-database","/deploy/#deleting-database":"/deploy/dgraph-administration/#deleting-database","/deploy/#upgrading-database":"/deploy/dgraph-administration/#upgrading-database","/deploy/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers":"/deploy/dgraph-administration/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers","/deploy/#post-installation":"/deploy/dgraph-administration/#post-installation","/deploy/#running-oom-out-of-memory":"/deploy/troubleshooting/#running-oom-out-of-memory","/deploy/#too-many-open-files":"/deploy/troubleshooting/#too-many-open-files","/deploy/#cluster-requirements":"/deploy/production-checklist/#cluster-requirements","/deploy/#machine-requirements":"/deploy/production-checklist/#machine-requirements","/deploy/#operating-system":"/deploy/production-checklist/#operating-system","/deploy/#cpu-and-memory":"/deploy/production-checklist/#cpu-and-memory","/deploy/#disk":"/deploy/production-checklist/#disk","/deploy/#firewall-rules":"/deployproduction-checklist/#firewall-rules","/deploy/#operating-system-tuning":"/deploy/production-checklist/#operating-system-tuning","/deploy/#deployment":"/deploy/production-checklist/#deployment","/deploy/#terminology":"/deploy/production-checklist/#terminology","/deploy/#basic-setup-2-node-cluster":"/deploy/production-checklist/#basic-setup-2-node-cluster","/deploy/#ha-setup-6-node-cluster":"/deploy/production-checklist/#ha-setup-6-node-cluster","/deploy/#supplementary-services":"/deploy/production-checklist/#supplementary-services","/deploy/#see-also":"/deploy/","/query-language/#take-a-tour-https-tour-dgraph-io":"/query-language/graphql-fundamentals/#take-a-tour-https-tour-dgraph-io","/query-language/#running-examples":"/query-language/graphql-fundamentals/#running-examples","/query-language/#graphql-fundamentals":"/query-language/graphql-fundamentals/#graphql-fundamentals","/query-language/#returning-values":"/query-language/graphql-fundamentals/#returning-values","/query-language/#expanding-graph-edges":"/query-language/graphql-fundamentals/#expanding-graph-edges","/query-language/#comments":"/query-language/graphql-fundamentals/#comments","/query-language/#applying-filters":"/query-language/graphql-fundamentals/#applying-filters","/query-language/#language-support":"/query-language/graphql-fundamentals/#language-support","/query-language/#functions":"/query-language/functions","/query-language/#term-matching":"/query-language/functions/#term-matching","/query-language/#allofterms":"/query-language/functions/#allofterms","/query-language/#usage-at-root":"/query-language/functions/#usage-at-root","/query-language/#usage-as-filter":"/query-language/functions/#usage-as-filter","/query-language/#anyofterms":"/query-language/functions/#anyofterms","/query-language/#usage-at-root-1":"/query-language/functions/#usage-at-root-1","/query-language/#usage-as-filter-1":"/query-language/functions/#usage-as-filter-1","/query-language/#regular-expressions":"/query-language/functions/#regular-expressions","/query-language/#technical-details":"/query-language/functions/#technical-details","/query-language/#writing-efficient-regular-expressions-and-limitations":"/query-language/functions/#writing-efficient-regular-expressions-and-limitations","/query-language/#fuzzy-matching":"/query-language/functions/#fuzzy-matching","/query-language/#full-text-search":"/query-language/functions/#full-text-search","/query-language/#inequality":"/query-language/functions/#inequality","/query-language/#equal-to":"/query-language/functions/#equal-to","/query-language/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to":"/query-language/functions/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to","/query-language/#uid":"/query-language/functions/#uid","/query-language/#uid-in":"/query-language/functions/#uid-in","/query-language/#has":"/query-language/functions/#has","/query-language/#geolocation":"/query-language/functions/#geolocation","/query-language/#mutations":"/query-language/functions/#mutations","/query-language/#query":"/query-language/functions/#query","/query-language/#near":"/query-language/functions/#near","/query-language/#within":"/query-language/functions/#within","/query-language/#contains":"/query-language/functions/#contains","/query-language/#intersects":"/query-language/functions/#intersects","/query-language/#connecting-filters":"/query-language/connecting-filters/","/query-language/#and-or-and-not":"/query-language/connecting-filters/#and-or-and-not","/query-language/#alias":"/query-language/alias","/query-language/#pagination":"/query-language/pagination","/query-language/#first":"/query-language/pagination/#first","/query-language/#offset":"/query-language/paginatio/n#offset","/query-language/#after":"/query-language/pagination/#after","/query-language/#count":"/query-language/count","/query-language/#sorting":"/query-language/sorting","/query-language/#multiple-query-blocks":"/query-language/multiple-query-blocks","/query-language/#var-blocks":"/query-language/multiple-query-blocks/#var-blocks","/query-language/#query-variables":"/query-language/query-variables/","/query-language/#value-variables":"/query-language/value-variables/","/query-language/#variable-propagation":"/query-language/value-variables/#variable-propagation","/query-language/#aggregation":"/query-language/aggregation/","/query-language/#min":"/query-language/aggregation/#min","/query-language/#usage-at-root-2":"/query-language/aggregation/#usage-at-root-2","/query-language/#usage-at-other-levels":"/query-language/aggregation/#usage-at-other-levels","/query-language/#max":"/query-language/aggregation/#max","/query-language/#usage-at-root-3":"/query-language/aggregation/#usage-at-root-3","/query-language/#usage-at-other-levels-1":"/query-language/aggregation/#usage-at-other-levels-1","/query-language/#sum-and-avg":"/query-language/aggregation/#sum-and-avg","/query-language/#usage-at-root-4":"/query-language/aggregation/#usage-at-root-4","/query-language/#usage-at-other-levels-2":"/query-language/aggregation/#usage-at-other-levels-2","/query-language/#aggregating-aggregates":"/query-language/aggregation/#aggregating-aggregates","/query-language/#math-on-value-variables":"/query-language/math-on-value-variables/","/query-language/#groupby":"/query-language/groupby/","/query-language/#expand-predicates":"/query-language/expand-predicates/","/query-language/#filtering-during-expand":"/query-language/expand-predicates/#filtering-during-expand","/query-language/#cascade-directive":"/query-language/cascade-directive/","/query-language/#normalize-directive":"/query-language/normalize-directive/","/query-language/#ignorereflex-directive":"/query-language/ignorereflex-directive/","/query-language/#debug":"/query-language/debug/","/query-language/#schema":"/query-language/schema/","/query-language/#schema-types":"/query-language/schema/#schema-types","/query-language/#scalar-types":"/query-language/schema/#scalar-types","/query-language/#uid-type":"/query-language/schema/#uid-type","/query-language/#adding-or-modifying-schema":"/query-language/schema/#adding-or-modifying-schema","/query-language/#indexes-in-background":"/query-language/schema/#indexes-in-background","/query-language/#http-api":"/query-language/schema/#http-api","/query-language/#grpc-api":"/query-language/schema/#grpc-api","/query-language/#predicate-name-rules":"/query-language/schema/#predicate-name-rules","/query-language/#allowed-special-characters":"/query-language/schema/#allowed-special-characters","/query-language/#forbidden-special-characters":"/query-language/schema/#forbidden-special-characters","/query-language/#predicates-i18n":"/query-language/schema/#predicates-i18n","/query-language/#upsert-directive":"/query-language/schema/#upsert-directive","/query-language/#noconflict-directive":"/query-language/schema/#noconflict-directive","/query-language/#rdf-types":"/query-language/schema/#rdf-types","/query-language/#extended-types":"/query-language/schema/#extended-types","/query-language/#password-type":"/query-language/schema/#password-type","/query-language/#indexing":"/query-language/schema/#indexing","/query-language/#string-indices":"/query-language/schema/#string-indices","/query-language/#datetime-indices":"/query-language/schema/#datetime-indices","/query-language/#sortable-indices":"/query-language/schema/#sortable-indices","/query-language/#count-index":"/query-language/schema/#count-index","/query-language/#list-type":"/query-language/schema/#list-type","/query-language/#filtering-on-list":"/query-language/schema/#filtering-on-list","/query-language/#reverse-edges":"/query-language/schema/#reverse-edges","/query-language/#querying-schema":"/query-language/schema/#querying-schema","/query-language/#type-system":"/query-language/type-system/","/query-language/#type-definition":"/query-language/schema/#type-definition","/query-language/#setting-the-type-of-a-node":"/query-language/schema/#setting-the-type-of-a-node","/query-language/#using-types-during-queries":"/query-language/schema/#using-types-during-queries","/query-language/#deleting-a-type":"/query-language/schema/#deleting-a-type","/query-language/#expand-queries-and-types":"/query-language/schema/#expand-queries-and-types","/query-language/#facets-edge-attributes":"/query-language/facets/","/query-language/#facets-on-scalar-predicates":"/query-language/facets/#facets-on-scalar-predicates","/query-language/#facets-i18n":"/query-language/facets/#facets-i18n","/query-language/#alias-with-facets":"/query-language/facets/#alias-with-facets","/query-language/#facets-on-uid-predicates":"/query-language/facets/#facets-on-uid-predicates","/query-language/#filtering-on-facets":"/query-language/facets/#filtering-on-facets","/query-language/#sorting-using-facets":"/query-language/facets/#sorting-using-facets","/query-language/#assigning-facet-values-to-a-variable":"/query-language/facets/#assigning-facet-values-to-a-variable","/query-language/#facets-and-variable-propagation":"/query-language/facets/#facets-and-variable-propagation","/query-language/#facets-and-aggregation":"/query-language/facets/#facets-and-aggregation","/query-language/#k-shortest-path-queries":"/query-language/k-shortest-path-queries/","/query-language/#recurse-query":"/query-language/recurse-query/","/query-language/#fragments":"/query-language/fragments/","/query-language/#graphql-variables":"/query-language/graphql-variables/","/query-language/#indexing-with-custom-tokenizers":"/query-language/indexing-custom-tokenizers/","/query-language/#caveats":"/query-language/indexing-custom-tokenizers/#caveats","/query-language/#implementing-a-plugin":"/query-language/indexing-custom-tokenizers/#implementing-a-plugin","/query-language/#building-the-plugin":"/query-language/indexing-custom-tokenizers/#building-the-plugin","/query-language/#running-dgraph-with-plugins":"/query-language/indexing-custom-tokenizers/#running-dgraph-with-plugins","/query-language/#adding-the-index-to-the-schema":"/query-language/indexing-custom-tokenizers/#adding-the-index-to-the-schema","/query-language/#using-the-index-in-queries":"/query-language/indexing-custom-tokenizers/#using-the-index-in-queries","/query-language/#examples":"/query-language/indexing-custom-tokenizers/#examples","/query-language/#unicode-characters":"/query-language/indexing-custom-tokenizers/#unicode-characters","/query-language/#cidr-range":"/query-language/indexing-custom-tokenizers/#cidr-range","/query-language/#anagram":"/query-language/indexing-custom-tokenizers/#anagram","/query-language/#integer-prime-factors":"/query-language/indexing-custom-tokenizers/#integer-prime-factors","/design-concepts/#can-we-do-pre-writes-only-on-leaders":"/design-concepts/transactions-faq/","/design-concepts/#edges":"/design-concepts/concepts/#edges","/design-concepts/#posting-list":"/design-concepts/concepts/#posting-list","/design-concepts/#badger":"/design-concepts/concepts/#badger","/design-concepts/#group":"/design-concepts/concepts/#group","/design-concepts/#replication-and-server-failure":"/design-concepts/concepts/#replication-and-server-failure","/design-concepts/#new-server-and-discovery":"/design-concepts/concepts/#new-server-and-discovery","/design-concepts/#write-ahead-logs":"/design-concepts/concepts/#write-ahead-logs","/design-concepts/#mutations":"/design-concepts/concepts/#mutations","/design-concepts/#queries":"/design-concepts/concepts/#queries","/design-concepts/#network-calls":"/design-concepts/concepts/#network-calls","/design-concepts/#worker":"/design-concepts/concepts/#worker","/design-concepts/#worker-pool":"/design-concepts/concepts/#worker-pool","/design-concepts/#protocol-buffers":"/design-concepts/concepts/#protocol-buffers","/design-concepts/#sql-nosql":"/design-concepts/minimizing-network-calls/#sql-nosql","/design-concepts/#dgraph":"/design-concepts/minimizing-network-calls/#dgraph","/design-concepts/#term":"/design-concepts/raft/#dgraph","/design-concepts/#server-states":"/design-concepts/raft/#server-states","/design-concepts/#communication":"/design-concepts/raft/#communication","/design-concepts/#log-entries":"/design-concepts/raft/#log-entries","/design-concepts/#voting":"/design-concepts/raft/#voting","/design-concepts/#cluster-membership":"/design-concepts/raft/#cluster-membership","/design-concepts/#log-compaction":"/design-concepts/raft/#log-compaction","/design-concepts/#clients":"/design-concepts/raft/#clients","/design-concepts/#linearizable-semantics":"/design-concepts/raft/#linearizable-semantics","/design-concepts/#read-only-queries":"/design-concepts/raft/#read-only-queries","/mutations/#deletion-of-non-list-predicates":"/mutations/delete/#deletion-of-non-list-predicates","/mutations/#setting-literal-values":"/mutations/json-mutation-format/#setting-literal-values","/mutations/#language-support":"/mutations/json-mutation-format/#language-support","/mutations/#geolocation-support":"/mutations/json-mutation-format/#geolocation-support","/mutations/#referencing-existing-nodes":"/mutations/json-mutation-format/#referencing-existing-nodes","/mutations/#edges-between-nodes":"/mutations/json-mutation-format/#edges-between-nodes","/mutations/#deleting-literal-values":"/mutations/json-mutation-format/#deleting-literal-values","/mutations/#deleting-edges":"/mutations/json-mutation-format/#deleting-edges","/mutations/#facets":"/mutations/json-mutation-format/#facets","/mutations/#deleting-facets":"/mutations/json-mutation-format/#deleting-facets","/mutations/#creating-a-list-with-json-and-interacting-with":"/mutations/json-mutation-format/#creating-a-list-with-json-and-interacting-with","/mutations/#facets-in-list-type-with-json":"/mutations/json-mutation-format/#facets-in-list-type-with-json","/mutations/#specifying-multiple-operations":"/mutations/json-mutation-format/#specifying-multiple-operations","/mutations/#json-syntax-using-raw-http-or-ratel-ui":"/mutations/json-mutation-format/#json-syntax-using-raw-http-or-ratel-ui","/mutations/#using-json-operations-via-curl":"/mutations/json-mutation-format/#using-json-operations-via-curl","/mutations/#uid-function":"/mutations/upsert-block/#uid-function","/mutations/#val-function":"/mutations/upsert-block/#val-function","/mutations/#example-of-uid-function":"/mutations/upsert-block/#example-of-uid-function","/mutations/#example-of-val-function":"/mutations/upsert-block/#example-of-val-function","/mutations/#bulk-delete-example":"/mutations/upsert-block/#bulk-delete-example","/mutations/#example-of-conditional-upsert":"/mutations/conditional-upsert/#example-of-conditional-upsert","/mutations/#example-of-multiple-mutation-blocks":"/mutations/conditional-upsert/#example-of-multiple-mutation-blocks","/enterprise-features/#configure-backup":"/enterprise-features/binary-backups/#configure-backup","/enterprise-features/#configure-amazon-s3-credentials":"/enterprise-features/binary-backups/#configure-amazon-s3-credentials","/enterprise-features/#configure-minio-credentials":"/enterprise-features/binary-backups/#configure-minio-credentials","/enterprise-features/#create-a-backup":"/enterprise-features/binary-backups/#create-a-backup","/enterprise-features/#backup-to-amazon-s3":"/enterprise-features/binary-backups/#backup-to-amazon-s3","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-google-cloud-storage-via-minio-gateway":"/enterprise-features/binary-backups/#backup-to-google-cloud-storage-via-minio-gateway","/enterprise-features/#test-using-minio-browser":"/enterprise-features/binary-backups/#test-using-minio-browser","/enterprise-features/#test-using-minio-client":"/enterprise-features/binary-backups/#test-using-minio-client","/enterprise-features/#disabling-https-for-s3-and-minio-backups":"/enterprise-features/binary-backups/#disabling-https-for-s3-and-minio-backups","/enterprise-features/#overriding-credentials":"/enterprise-features/binary-backups/#overriding-credentials","/enterprise-features/#backup-to-nfs":"/enterprise-features/binary-backups/#backup-to-nfs","/enterprise-features/#forcing-a-full-backup":"/enterprise-features/binary-backups/#forcing-a-full-backup","/enterprise-features/#encrypted-backups":"/enterprise-features/binary-backups/#encrypted-backups","/enterprise-features/#new-flag-“encrypted”-in-manifest.json":"/enterprise-features/binary-backups/#new-flag-“encrypted”-in-manifest.json","/enterprise-features/#aes-and-chaining-with-gzip":"/enterprise-features/binary-backups/#aes-and-chaining-with-gzip","/enterprise-features/#backup":"/enterprise-features/binary-backups/#backup","/enterprise-features/#restore-from-backup":"/enterprise-features/binary-backups/#restore-from-backup","/enterprise-features/#restore-from-amazon-s3":"/enterprise-features/binary-backups/#restore-from-amazon-s3","/enterprise-features/#restore-from-minio":"/enterprise-features/binary-backups/#restore-from-minio","/enterprise-features/#restore-from-local-directory-or-nfs":"/enterprise-features/binary-backups/#restore-from-local-directory-or-nfs","/enterprise-features/#restore-and-update-timestamp":"/enterprise-features/binary-backups/#restore-and-update-timestamp","/enterprise-features/#turn-on-acls":"/enterprise-features/access-control-lists/#turn-on-acls","/enterprise-features/#set-up-acl-rules":"/enterprise-features/access-control-lists/#set-up-acl-rules","/enterprise-features/#using-graphql-admin-api":"/enterprise-features/access-control-lists/#using-graphql-admin-api","/enterprise-features/#retrieve-users-and-groups-information":"/enterprise-features/access-control-lists/#retrieve-users-and-groups-information","/enterprise-features/#using-a-graphql-tool":"/enterprise-features/access-control-lists/#using-a-graphql-tool","/enterprise-features/#access-data-using-a-client":"/enterprise-features/access-control-lists/#access-data-using-a-client","/enterprise-features/#access-data-using-the-graphql-api":"/enterprise-features/access-control-lists/#access-data-using-the-graphql-api","/enterprise-features/#reset-groot-password":"/enterprise-features/access-control-lists/#reset-groot-password","/enterprise-features/#set-up-encryption":"/enterprise-features/encryption-at-rest/#set-up-encryption","/enterprise-features/#turn-on-encryption":"/enterprise-features/encryption-at-rest/#turn-on-encryption","/enterprise-features/#turn-off-encryption":"/enterprise-features/encryption-at-rest/#turn-off-encryption","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/howto/#metrics-information":"/howto/retrieving-debug-information/#metrics-information","/howto/#profiling-information":"/howto/retrieving-debug-information/#profiling-information","/howto/#cpu-profile":"/howto/retrieving-debug-information/#cpu-profile","/howto/#memory-profile":"/howto/retrieving-debug-information/#memory-profile","/howto/#block-profile":"/howto/retrieving-debug-information/#block-profile","/howto/#goroutine-stack":"/howto/retrieving-debug-information/#goroutine-stack","/howto/#example-usage":"/howto/using-debug-tool/#example-usage","/howto/#debug-tool-output":"/howto/using-debug-tool/#debug-tool-output","/howto/#key-lookup":"/howto/using-debug-tool/#key-lookup","/howto/#key-history":"/howto/using-debug-tool/#key-history","/howto/#basic-integration":"/howto/dgraph-sentry-integration/#basic-integration","/howto/#data-handling":"/howto/dgraph-sentry-integration/#data-handling","/howto/#example-usage":"/howto/using-increment-tool/#example-usage","/howto/#increment-tool-output":"/howto/using-increment-tool/#increment-tool-output","/howto/#download-zip":"/howto/load-balancing-nginx/#download-zip","/howto/#start-dgraph-cluster":"/howto/load-balancing-nginx/#start-dgraph-cluster","/howto/#use-the-increment-tool-to-start-a-grpc-lb":"/howto/load-balancing-nginx/#use-the-increment-tool-to-start-a-grpc-lb","/howto/#check-logs":"/howto/load-balancing-nginx/#check-logs","/howto/#upsert-procedure":"/howto/upserts/#upsert-procedure","/howto/#upsert-block":"/howto/upserts/#upsert-block","/howto/#conflicts":"/howto/upserts/#conflicts","/howto/#schema-types-scalar-uid-and-list-uid":"/howto/migrate-dgraph-1-1/#schema-types-scalar-uid-and-list-uid","/howto/#type-system":"/howto/migrate-dgraph-1-1/#type-system","/howto/#live-loader-and-bulk-loader-command-line-flags":"/howto/migrate-dgraph-1-1/#live-loader-and-bulk-loader-command-line-flags","/howto/#http-api":"/howto/migrate-dgraph-1-1/#http-api"},urlSplit,origPath,redirectPaths=["clients","query-language","mutations","deploy","enterprise-features","howto","design-concepts"],pathSplit=document.URL.split("/");redirectPaths.includes(pathSplit[pathSplit.length-2])&&(urlSplit=pathSplit[pathSplit.length-1].split("#"),origPath="/"+pathSplit[pathSplit.length-2]+"/#"+urlSplit[1],origPath in subPaths?(loc=""+subPaths[origPath],window.location.replace(loc)):urlSplit[1]&&(loc=""+pathSplit.slice(4,pathSplit.length-1).join("/")+"/#"+urlSplit[1],window.location.replace(loc)))</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta name=generator content="Hugo 0.101.0"><meta name=description content="In this guide, we explain Access Control Lists on Dgraph, which can be used to provide access protection to your data stored in Dgraph or Dgraph Cloud dedicated instances."><link rel=canonical href=/enterprise-features/access-control-lists/><link rel=apple-touch-icon sizes=57x57 href=/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/images/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/images/favicons/manifest.json><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script>
<script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin=anonymous></script>
<link href=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css rel=stylesheet integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin=anonymous><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin=anonymous></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin=anonymous></script>
<script>window.DGRAPH_ENDPOINT="https://play.dgraph.io/query?latency=true"</script><title>Access Control Lists - Enterprise features</title><link href=/css/theme.css?6a79ff0832398fa8541cbaef6b6dd556 rel=stylesheet><link href=/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script>
<script src=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script>
<link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><link rel=stylesheet href=//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><script>!function(){var t,n,e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(t=0;t<e.methods.length;t++)n=e.methods[t],e[n]=e.factory(n);e.load=function(t,n){var o,s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(s,o),e._loadOptions=n},e._writeKey="aQlf725vSBKhpQnINiGBc6rCtFyVCiAP",e.SNIPPET_VERSION="4.13.2",e.load("aQlf725vSBKhpQnINiGBc6rCtFyVCiAP"),e.page(),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll("a");t.forEach(t=>e.trackLink(t,"Click",{id:t.id,to:t.href,text:t.innerText}))})}}()</script></head><body><nav id=header><div class=header-left><div><a href=https://libremfg.com/features-gql class=brand><img src=/images/libre-logo.png alt=libre class=logo></a><div class=logo-tagline><span>Documentation</span></div></div><ul class=menu><li><a>Libre Baas</a></li></ul></div><div class=header-right><div style=margin-top:10px><div class="menu-search align-middle"><div class=menu-search-inner><input type=search class="form-control form-control-sm" id=algolia-doc-search placeholder="Search documentation" aria-label="Search docs" autocomplete=off></div></div></div><div><ul class=menu><li><a href=https://libremfg.com/features-gql target=_blank>Home</a></li><li><a href=https://www.libremfg.com/pricing-gql/ target=_blank>Pricing</a></li><li><a href=https://discord.gg/vtJ7JE4sha target=_blank>Community</a></li><li><a href=https://github.com/libremfg/libremfg.github.io target=_blank>GitHub</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><div class=menu-header></div><ul class=topics><li class="topic main-topic"><a href=/>Home</a></li><li class="topic main-topic"><a href=/dgraph-overview/>Dgraph Overview</a></li><li class="topic main-topic children"><a id=graphql href=#>GraphQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/quick-start/>Quick Start</a></li><li class="topic sub-topic"><a href=/graphql/how-dgraph-graphql-works/>How GraphQL works in Dgraph</a></li><li class="topic sub-topic"><a href=#>To-Do List App Tutorial</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-schema-design/>Schema Design</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-ui/>Creating a Basic UI</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth-rules/>Authorization Rules</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth0-jwt/>Using Auth0</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-firebase-jwt/>Using Firebase Authentication</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/deploy/>Deploying on Dgraph Cloud</a></li></ul></li><li class="topic sub-topic"><a href=#>Authorization</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/authorization/authorization-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/authorization/directive/>The @auth Directive</a></li><li class="topic sub-topic"><a href=/graphql/authorization/mutations/>Mutations</a></li></ul></li><li class="topic sub-topic"><a href=#>API</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/api/api-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/api/requests/>Requests and Responses</a></li><li class="topic sub-topic"><a href=/graphql/api/variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/graphql/api/fragments/>GraphQL Fragments</a></li><li class="topic sub-topic"><a href=/graphql/api/multiples/>Multiple GraphQL Operations in a Request</a></li><li class="topic sub-topic"><a href=/graphql/api/errors/>GraphQL Errors</a></li></ul></li><li class="topic sub-topic"><a href=#>Schema</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/schema/schema-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/schema/reserved/>Reserved Names</a></li><li class="topic sub-topic"><a href=/graphql/schema/migration/>Schema Migration</a></li><li class="topic sub-topic"><a href=/graphql/schema/types/>Types</a></li><li class="topic sub-topic"><a href=/graphql/schema/ids/>IDs</a></li><li class="topic sub-topic"><a href=/graphql/schema/graph-links/>Links in the Graph</a></li><li class="topic sub-topic"><a href=/graphql/schema/search/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/schema/generate/>The @generate Directive</a></li><li class="topic sub-topic"><a href=/graphql/schema/documentation/>Documentation and Comments</a></li><li class="topic sub-topic"><a href=/graphql/schema/deprecated/>Deprecation</a></li><li class="topic sub-topic"><a href=/graphql/schema/dgraph-schema/>Dgraph Schema Fragment</a></li></ul></li><li class="topic sub-topic"><a href=#>Queries</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/queries/queries-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/queries/search-filtering/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/queries/aggregate/>Aggregate Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/persistent-queries/>Persistent Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/and-or-not/>And, Or and Not</a></li><li class="topic sub-topic"><a href=/graphql/queries/cached-results/>Cached Results</a></li><li class="topic sub-topic"><a href=/graphql/queries/order-page/>Order and Pagination</a></li><li class="topic sub-topic"><a href=/graphql/queries/cascade/>@cascade Directive</a></li><li class="topic sub-topic"><a href=/graphql/queries/skip-include/>@skip and @include Directives</a></li></ul></li><li class="topic sub-topic"><a href=#>Mutations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/mutations/mutations-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/mutations/add/>Add</a></li><li class="topic sub-topic"><a href=/graphql/mutations/upsert/>Upsert</a></li><li class="topic sub-topic"><a href=/graphql/mutations/update/>Update</a></li><li class="topic sub-topic"><a href=/graphql/mutations/delete/>Delete</a></li><li class="topic sub-topic"><a href=/graphql/mutations/deep/>Deep</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/subscriptions/>Subscriptions</a></li><li class="topic sub-topic"><a href=#>Custom Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/custom/custom-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/custom/directive/>The @custom Directive</a></li><li class="topic sub-topic"><a href=/graphql/custom/query/>Custom Queries</a></li><li class="topic sub-topic"><a href=/graphql/custom/mutation/>Custom Mutations</a></li><li class="topic sub-topic"><a href=/graphql/custom/field/>Custom Fields</a></li><li class="topic sub-topic"><a href=/graphql/custom/dql/>Custom DQL</a></li></ul></li><li class="topic sub-topic"><a href=#>Lambda Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/lambda/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/lambda/field/>Lambda Fields</a></li><li class="topic sub-topic"><a href=/graphql/lambda/query/>Lambda Queries</a></li><li class="topic sub-topic"><a href=/graphql/lambda/mutation/>Lambda Mutations</a></li><li class="topic sub-topic"><a href=/graphql/lambda/webhook/>Lambda Webhooks</a></li><li class="topic sub-topic"><a href=/graphql/lambda/server/>Lambda Server</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/directives/>Directives</a></li><li class="topic sub-topic"><a href=/graphql/admin/>Administrative API</a></li><li class="topic sub-topic"><a href=/graphql/dgraph/>GraphQL on Existing Dgraph</a></li><li class="topic sub-topic"><a href=/graphql/federation/>Apollo Federation</a></li></ul></li><li class="topic main-topic children"><a id=dql href=#>DQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/get-started/>Get Started</a></li><li class="topic sub-topic"><a href=/tutorials/>Tutorials</a></li><li class="topic sub-topic"><a href=#>Query Language Reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/query-language/graphql-fundamentals/>DQL Fundamentals</a></li><li class="topic sub-topic"><a href=/query-language/functions/>Functions</a></li><li class="topic sub-topic"><a href=/query-language/connecting-filters/>Connecting Filters</a></li><li class="topic sub-topic"><a href=/query-language/alias/>Aliases</a></li><li class="topic sub-topic"><a href=/query-language/pagination/>Pagination in DQL</a></li><li class="topic sub-topic"><a href=/query-language/count/>Count</a></li><li class="topic sub-topic"><a href=/query-language/sorting/>Sorting</a></li><li class="topic sub-topic"><a href=/query-language/multiple-query-blocks/>Multiple Query Blocks</a></li><li class="topic sub-topic"><a href=/query-language/query-variables/>Query Variables</a></li><li class="topic sub-topic"><a href=/query-language/value-variables/>Value Variables</a></li><li class="topic sub-topic"><a href=/query-language/aggregation/>Aggregation</a></li><li class="topic sub-topic"><a href=/query-language/math-on-value-variables/>Math on Value Variables</a></li><li class="topic sub-topic"><a href=/query-language/groupby/>GroupBy</a></li><li class="topic sub-topic"><a href=/query-language/expand-predicates/>Expand Predicates</a></li><li class="topic sub-topic"><a href=/query-language/cascade-directive/>Cascade Directive</a></li><li class="topic sub-topic"><a href=/query-language/normalize-directive/>@normalize Directive</a></li><li class="topic sub-topic"><a href=/query-language/ignorereflex-directive/>@ignorereflex Directive</a></li><li class="topic sub-topic"><a href=/query-language/debug/>Debug</a></li><li class="topic sub-topic"><a href=/query-language/schema/>Schemas in DQL</a></li><li class="topic sub-topic"><a href=/query-language/type-system/>Type System</a></li><li class="topic sub-topic"><a href=/query-language/facets/>Facets and Edge Attributes</a></li><li class="topic sub-topic"><a href=/query-language/kshortest-path-quries/>Shortest Path Queries</a></li><li class="topic sub-topic"><a href=/query-language/recurse-query/>Recurse Query</a></li><li class="topic sub-topic"><a href=/query-language/fragments/>Fragments</a></li><li class="topic sub-topic"><a href=/query-language/graphql-variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/query-language/indexing-custom-tokenizers/>Indexing with Custom Tokenizers</a></li></ul></li><li class="topic sub-topic"><a href=/tips/>Tips and Tricks</a></li><li class="topic sub-topic"><a href=#>Mutations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/mutations/triples/>Triples</a></li><li class="topic sub-topic"><a href=/mutations/blank-nodes/>Blank Nodes and UIDs</a></li><li class="topic sub-topic"><a href=/mutations/external-ids/>External IDs</a></li><li class="topic sub-topic"><a href=/mutations/external-ids-upsert-block/>External IDs and Upsert Block</a></li><li class="topic sub-topic"><a href=/mutations/language-rdf-types/>Language and RDF Types</a></li><li class="topic sub-topic"><a href=/mutations/batch-mutations/>Batch Mutations</a></li><li class="topic sub-topic"><a href=/mutations/delete/>Delete</a></li><li class="topic sub-topic"><a href=/mutations/facets-in-list-type-with-rdf/>Facet Lists in RDF</a></li><li class="topic sub-topic"><a href=/mutations/mutations-using-curl/>Mutations Using cURL</a></li><li class="topic sub-topic"><a href=/mutations/json-mutation-format/>JSON Mutation Format</a></li><li class="topic sub-topic"><a href=/mutations/upsert-block/>Upsert Blocks</a></li><li class="topic sub-topic"><a href=/mutations/conditional-upsert/>Conditional Upsert</a></li><li class="topic sub-topic"><a href=/mutations/reverse-edges/>Reverse Edges</a></li></ul></li></ul></li><li class="topic main-topic children"><a id=clients href=#>Clients</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/clients/overview/>Overview</a></li><li class="topic sub-topic"><a href=/clients/go/>Go</a></li><li class="topic sub-topic"><a href=/clients/csharp/>C#</a></li><li class="topic sub-topic"><a href=/clients/java/>Java</a></li><li class="topic sub-topic"><a href=#>JavaScript</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/clients/javascript/grpc/>gRPC Client</a></li><li class="topic sub-topic"><a href=/clients/javascript/http/>HTTP Client</a></li></ul></li><li class="topic sub-topic"><a href=/clients/python/>Python</a></li><li class="topic sub-topic"><a href=/clients/unofficial-clients/>Unofficial Dgraph Clients</a></li><li class="topic sub-topic"><a href=/clients/raw-http/>Raw HTTP</a></li></ul></li><li class="topic main-topic children"><a id=ratel-ui href=#>Ratel UI</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/ratel/overview/>Ratel Overview</a></li><li class="topic sub-topic"><a href=/ratel/connection/>Connection</a></li><li class="topic sub-topic"><a href=/ratel/console/>Console</a></li><li class="topic sub-topic"><a href=/ratel/schema/>Schema</a></li><li class="topic sub-topic"><a href=/ratel/cluster/>Cluster</a></li><li class="topic sub-topic"><a href=/ratel/backups/>Backups</a></li></ul></li><li class="topic main-topic children"><a id=deploy-and-manage href=#>Deploy and Manage</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/overview/>Deployment and Management Overview</a></li><li class="topic sub-topic"><a href=/deploy/download/>Download Dgraph</a></li><li class="topic sub-topic"><a href=/deploy/config/>Configuration</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-zero/>More about Dgraph Zero</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-alpha/>More about Dgraph Alpha</a></li><li class="topic sub-topic"><a href=/deploy/single-host-setup/>Single Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/multi-host-setup/>Multi-Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/kubernetes/>Using Kubernetes</a></li><li class="topic sub-topic"><a href=/deploy/cluster-setup/>Cluster Setup</a></li><li class="topic sub-topic"><a href=/deploy/cluster-checklist/>Cluster Checklist</a></li><li class="topic sub-topic"><a href=/deploy/production-checklist/>Production Checklist</a></li><li class="topic sub-topic"><a href=#>Administration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/dgraph-administration/>Dgraph Administration</a></li><li class="topic sub-topic"><a href=/deploy/log-format/>Logging</a></li><li class="topic sub-topic"><a href=/deploy/ludicrous-mode/>Ludicrous Mode</a></li><li class="topic sub-topic"><a href=/deploy/monitoring/>Monitoring</a></li><li class="topic sub-topic"><a href=/deploy/metrics/>Metrics</a></li><li class="topic sub-topic"><a href=/deploy/tracing/>Tracing</a></li><li class="topic sub-topic"><a href=/deploy/data-compression/>Data compression on Disk</a></li></ul></li><li class="topic sub-topic"><a href=#>Fast Data Loading</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/fast-data-loading/overview/>Overview</a></li><li class="topic sub-topic"><a href=/deploy/fast-data-loading/bulk-loader/>Bulk Loader</a></li><li class="topic sub-topic"><a href=/deploy/fast-data-loading/live-loader/>Live Loader</a></li></ul></li><li class="topic sub-topic"><a href=#>Security</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/ports-usage/>Ports Usage</a></li><li class="topic sub-topic"><a href=/deploy/tls-configuration/>TLS Configuration</a></li></ul></li><li class="topic sub-topic"><a href=/deploy/decrypt/>Data Decryption</a></li><li class="topic sub-topic"><a href=/deploy/cli-command-reference/>Dgraph CLI Reference</a></li><li class="topic sub-topic"><a href=/deploy/troubleshooting/>Troubleshooting</a></li></ul></li><li class="topic main-topic children active"><a id=enterprise-features href=#>Enterprise Features</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic active"><a href=/enterprise-features/access-control-lists/>Access Control Lists</a></li><li class="topic sub-topic"><a href=/enterprise-features/audit-logs/>Audit Logging</a></li><li class="topic sub-topic"><a href=/enterprise-features/lsbackup/>Backup List Tool</a></li><li class="topic sub-topic"><a href=/enterprise-features/binary-backups/>Binary Backups</a></li><li class="topic sub-topic"><a href=/enterprise-features/change-data-capture/>Change Data Capture</a></li><li class="topic sub-topic"><a href=/enterprise-features/encryption-at-rest/>Encryption at Rest</a></li><li class="topic sub-topic"><a href=/enterprise-features/learner-nodes/>Learner Nodes</a></li><li class="topic sub-topic"><a href=/enterprise-features/license/>License</a></li><li class="topic sub-topic"><a href=/enterprise-features/multitenancy/>Multi-Tenancy</a></li></ul></li><li class="topic main-topic children"><a id=migration href=#>Migration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/migration/loading-csv-data/>Loading CSV Data</a></li><li class="topic sub-topic"><a href=/migration/migrate-tool/>Migration Tool</a></li><li class="topic sub-topic"><a href=/migration/migrate-dgraph-1-1/>Migrate from Dgraph v1.0</a></li><li class="topic sub-topic"><a href=/migration/dgraph-compared-to-other-databases/>Dgraph Compared to Other Databases</a></li></ul></li><li class="topic main-topic"><a href=/faq/>FAQ</a></li><li class="topic main-topic children"><a id=how-to-guides href=#>How To Guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/howto/retrieving-debug-information/>Retrieving Debug Information</a></li><li class="topic sub-topic"><a href=/howto/completion/>Shell Completion</a></li><li class="topic sub-topic"><a href=/howto/using-debug-tool/>Using the Debug Tool</a></li><li class="topic sub-topic"><a href=/howto/dgraph-sentry-integration/>Using the Dgraph Sentry Integration</a></li><li class="topic sub-topic"><a href=/howto/using-increment-tool/>Using the Increment Tool</a></li><li class="topic sub-topic"><a href=/howto/giving-nodes-type/>Giving Nodes a Type</a></li><li class="topic sub-topic"><a href=/howto/login-system/>A Simple Login System</a></li><li class="topic sub-topic"><a href=/howto/load-balancing-nginx/>Load Balancing Queries with NGINX</a></li><li class="topic sub-topic"><a href=/howto/upserts/>Upserts</a></li><li class="topic sub-topic"><a href=/howto/jepsen-tests/>Run Jepsen Tests</a></li><li class="topic sub-topic"><a href=/howto/concurrent-modification-java-multithreaded/>Concurrent mutations and conflicts</a></li><li class="topic sub-topic"><a href=/howto/lambda-webhooks-example/>Lambda Webhooks Example</a></li></ul></li><li class="topic main-topic children"><a id=design-concepts href=#>Design Concepts</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/design-concepts/transactions-faq/>Transactions: FAQ</a></li><li class="topic sub-topic"><a href=/design-concepts/consistency-model/>Consistency Model</a></li><li class="topic sub-topic"><a href=/design-concepts/concepts/>Concepts</a></li><li class="topic sub-topic"><a href=/design-concepts/minimizing-network-calls/>How Dgraph Minimizes Network Calls</a></li><li class="topic sub-topic"><a href=/design-concepts/raft/>RAFT</a></li></ul></li><li class="topic main-topic"><a href=/releases/>Releases</a></li></ul><ul class=sidebar-menu><li><a href=https://dgraph.io/ target=_blank>Home</a></li><li><a href=https://discuss.dgraph.io/ target=_blank>Community</a></li><li><a href=https://github.com/dgraph-io/dgraph target=_blank>GitHub</a></li></ul></aside><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#enable-enterprise-acl-feature>Enable enterprise ACL feature</a><ul><li><a href=#example-using-dgraph-cli>Example using Dgraph CLI</a></li><li><a href=#example-using-docker-compose>Example using Docker Compose</a></li><li><a href=#example-using-kubernetes-helm-chart>Example using Kubernetes Helm Chart</a></li></ul></li><li><a href=#storing-acl-secret-in-hashicorp-vault>Storing ACL secret in Hashicorp Vault</a><ul><li><a href=#configuring-a-hashicorp-vault-server>Configuring a Hashicorp Vault Server</a></li><li><a href=#example-using-dgraph-cli-with-hashicorp-vault-configuration>Example using Dgraph CLI with Hashicorp Vault configuration</a></li><li><a href=#example-using-docker-compose-with-hashicorp-vault-configuration>Example using Docker Compose with Hashicorp Vault configuration</a></li><li><a href=#example-using-kubernetes-helm-chart-with-hashicorp-vault-configuration>Example using Kubernetes Helm Chart with Hashicorp Vault configuration</a></li></ul></li><li><a href=#accessing-secured-dgraph>Accessing secured Dgraph</a><ul><li><a href=#logging-in>Logging In</a><ul><li><a href=#access-token>Access Token</a></li><li><a href=#refresh-token>Refresh Token</a></li></ul></li><li><a href=#login-using-a-client>Login using a client</a></li><li><a href=#login-using-curl>Login using curl</a></li></ul></li><li><a href=#user-and-group-administration>User and group administration</a><ul><li><a href=#reset-the-root-password>Reset the root password</a></li><li><a href=#create-a-regular-user>Create a regular user</a></li><li><a href=#create-a-group>Create a group</a></li><li><a href=#assign-a-user-to-a-group>Assign a user to a group</a></li><li><a href=#remove-a-user-from-a-group>Remove a user from a group</a></li><li><a href=#delete-a-user>Delete a User</a></li><li><a href=#delete-a-group>Delete a Group</a></li></ul></li><li><a href=#acl-rules-configuration>ACL rules configuration</a><ul><li><a href=#assign-predicate-permissions-to-a-group>Assign predicate permissions to a group</a></li><li><a href=#remove-a-rule-from-a-group>Remove a rule from a group</a></li></ul></li><li><a href=#querying-users-and-groups>Querying users and groups</a><ul><li><a href=#query-for-users>Query for users</a></li><li><a href=#get-user-information>Get user information</a></li><li><a href=#query-for-groups>Query for groups</a></li><li><a href=#get-group-information>Get group information</a></li></ul></li><li><a href=#reset-groot-password>Reset Groot Password</a></li></ul></nav></div><article><a class=question-btn target=_blank href=https://discuss.dgraph.io/c/docs/49><i class="fa fa-question-circle"></i> Ask a Question</a><h1 class=post-title>Access Control Lists</h1><div><p>Access Control List (ACL) provides access protection to your data stored in
Dgraph. When the ACL feature is enabled, a client, e.g. <a href=https://github.com/dgraph-io/dgo>dgo</a> or <a href=https://github.com/dgraph-io/dgraph4j>dgraph4j</a>, must
authenticate with a username and password before executing any transactions, and
is only allowed to access the data permitted by the ACL rules.</p><p>ACLs are available to Dgraph Cloud users with dedicated instances.</p><div class="notices note"><span class=type>Note</span> This feature was introduced in <a href=https://github.com/dgraph-io/dgraph/releases/tag/v1.1.0>v1.1.0</a>.
The <code>dgraph acl</code> command is deprecated and will be removed in a future release. ACL changes can be made by using the <code>/admin</code> GraphQL endpoint on any Alpha node.</div><h2 id=enable-enterprise-acl-feature>Enable enterprise ACL feature</h2><p>The ACL feature can be turned on by following these steps:</p><ol><li><p>Create a plain text file, and store a randomly generated secret key in it. The secret
key is used by Dgraph Alpha nodes to sign JSON Web Tokens (JWT). Keep this secret key secret to avoid data security issues. The secret key must have at least 256-bits (32 ASCII characters) to support the HMAC-SHA256 signing algorithm.</p></li><li><p>Start all the Dgraph Alpha nodes in your cluster with the option <code>--acl secret-file="/path/to/secret"</code>, and
make sure that they are all using the same secret key file created in Step 1. Alternatively, you can <a href=#storing-acl-secret-in-hashicorp-vault>store the secret in Hashicorp Vault</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dgraph alpha --acl <span style=color:#a31515>&#34;secret-file=/path/to/secret&#34;</span> --security <span style=color:#a31515>&#34;whitelist=&lt;permitted-ip-addresses&gt;&#34;</span>
</span></span></code></pre></div></li></ol><div class="notices tip"><span class=type>Tip</span> In addition to command line flags <code>--acl secret-file="/path/to/secret"</code> and <code>--security "whitelist=&lt;permitted-ip-addresses>"</code>, you can also configure Dgraph using a configuration file (<code>config.yaml</code>, <code>config.json</code>). You can also use environment variables, i.e. <code>DGRAPH_ALPHA_ACL="secret-file=&lt;/path/to/secret>"</code> and <code>DGRAPH_ALPHA_SECURITY="whitelist=&lt;permitted-ip-addresses>"</code>. See <a href=/deploy/config/>Config</a> for more information in general about configuring Dgraph.</div><h3 id=example-using-dgraph-cli>Example using Dgraph CLI</h3><p>Here is an example that starts a Dgraph Zero node and a Dgraph Alpha node with the ACL feature turned on. You can run these commands in a separate terminal tab:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:green>## Create ACL secret key file with 32 ASCII characters</span>
</span></span><span style=display:flex><span>echo <span style=color:#a31515>&#39;12345678901234567890123456789012&#39;</span> &gt; hmac_secret_file
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>## Start Dgraph Zero in different terminal tab or window</span>
</span></span><span style=display:flex><span>dgraph zero --my=localhost:5080 --replicas 1 --raft idx=1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>## Start Dgraph Alpha in different terminal tab or window</span>
</span></span><span style=display:flex><span>dgraph alpha --my=localhost:7080 --zero=localhost:5080 <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --acl secret-file=<span style=color:#a31515>&#34;./hmac_secret_file&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --security whitelist=<span style=color:#a31515>&#34;10.0.0.0/8,172.0.0.0/8,192.168.0.0/16&#34;</span>
</span></span></code></pre></div><h3 id=example-using-docker-compose>Example using Docker Compose</h3><p>If you are using <a href=https://docs.docker.com/compose/>Docker Compose</a>, you can set up a sample Dgraph cluster using this <code>docker-compose.yaml</code> configuration:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>version: <span style=color:#a31515>&#39;3.5&#39;</span>
</span></span><span style=display:flex><span>services:
</span></span><span style=display:flex><span>  alpha1:
</span></span><span style=display:flex><span>    command: dgraph alpha --my=alpha1:7080 --zero=zero1:5080
</span></span><span style=display:flex><span>    container_name: alpha1
</span></span><span style=display:flex><span>    environment:
</span></span><span style=display:flex><span>      DGRAPH_ALPHA_ACL: secret-file=/dgraph/acl/hmac_secret_file
</span></span><span style=display:flex><span>      DGRAPH_ALPHA_SECURITY: whitelist=10.0.0.0/8,172.0.0.0/8,192.168.0.0/16
</span></span><span style=display:flex><span>    image: dgraph/dgraph:
</span></span><span style=display:flex><span>    ports:
</span></span><span style=display:flex><span>      - <span style=color:#a31515>&#34;8080:8080&#34;</span>
</span></span><span style=display:flex><span>    volumes:
</span></span><span style=display:flex><span>      - ./hmac_secret_file:/dgraph/acl/hmac_secret_file
</span></span><span style=display:flex><span>  zero1:
</span></span><span style=display:flex><span>    command: dgraph zero --my=zero1:5080 --replicas 1 --raft idx=1
</span></span><span style=display:flex><span>    container_name: zero1
</span></span><span style=display:flex><span>    image: dgraph/dgraph:
</span></span></code></pre></div><p>You can run this with:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:green>## Create ACL secret key file with 32 ASCII characters</span>
</span></span><span style=display:flex><span>echo <span style=color:#a31515>&#39;12345678901234567890123456789012&#39;</span> &gt; hmac_secret_file
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>## Start Docker Compose</span>
</span></span><span style=display:flex><span>docker-compose up
</span></span></code></pre></div><h3 id=example-using-kubernetes-helm-chart>Example using Kubernetes Helm Chart</h3><p>If you deploy Dgraph on <a href=https://kubernetes.io/>Kubernetes</a>, you can configure the ACL feature using the <a href=https://artifacthub.io/packages/helm/dgraph/dgraph>Dgraph Helm Chart</a>.</p><p>The first step is to encode the secret with base64:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:green>## encode a secret without newline character and copy to the clipboard</span>
</span></span><span style=display:flex><span>printf <span style=color:#a31515>&#39;12345678901234567890123456789012&#39;</span> | base64
</span></span></code></pre></div><p>The next step is that we need to create a <a href=https://helm.sh/>Helm</a> chart config values file, e.g. <code>dgraph_values.yaml</code>. We want to copy the results of encoded secret as paste this into the <code>hmac_secret_file</code> like the example below:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green>## dgraph_values.yaml</span>
</span></span><span style=display:flex><span>alpha:
</span></span><span style=display:flex><span>  acl:
</span></span><span style=display:flex><span>    enabled: <span style=color:#00f>true</span>
</span></span><span style=display:flex><span>    file:
</span></span><span style=display:flex><span>      hmac_secret_file: MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTI=
</span></span><span style=display:flex><span>  configFile:
</span></span><span style=display:flex><span>    config.yaml: |<span style=color:#a31515>
</span></span></span><span style=display:flex><span><span style=color:#a31515>      acl:
</span></span></span><span style=display:flex><span><span style=color:#a31515>        secret_file: /dgraph/acl/hmac_secret_file
</span></span></span><span style=display:flex><span><span style=color:#a31515>      security:
</span></span></span><span style=display:flex><span><span style=color:#a31515>        whitelist: 10.0.0.0/8,172.0.0.0/8,192.168.0.0/16</span>      
</span></span></code></pre></div><p>Now with the Helm chart config values created, we can deploy Dgraph:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add <span style=color:#a31515>&#34;dgraph&#34;</span> https://charts.dgraph.io
</span></span><span style=display:flex><span>helm install <span style=color:#a31515>&#34;my-release&#34;</span> --values ./dgraph_values.yaml dgraph/dgraph
</span></span></code></pre></div><h2 id=storing-acl-secret-in-hashicorp-vault>Storing ACL secret in Hashicorp Vault</h2><p>You can save the ACL secret on <a href=https://www.vaultproject.io/>Hashicorp Vault</a> server instead of saving the secret on the local file system.</p><h3 id=configuring-a-hashicorp-vault-server>Configuring a Hashicorp Vault Server</h3><p>Do the following to set up on the <a href=https://www.vaultproject.io/>Hashicorp Vault</a> server for use with Dgraph:</p><ol><li>Ensure that the Vault server is accessible from Dgraph Alpha and configured using URL <code>http://fqdn[ip]:port</code>.</li><li>Enable <a href=https://www.vaultproject.io/docs/auth/approle>AppRole Auth method</a> and enable <a href=https://www.vaultproject.io/docs/secrets/kv>KV Secrets Engine</a>.</li><li>Save the 256-bits (32 ASCII characters) long ACL secret in a KV Secret path (<a href=https://www.vaultproject.io/docs/secrets/kv/kv-v1>K/V Version 1</a> or <a href=https://www.vaultproject.io/docs/secrets/kv/kv-v2>K/V Version 2</a>). For example, you can upload this below to KV Secrets Engine Version 2 path of <code>secret/data/dgraph/alpha</code>:<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;options&#34;: {
</span></span><span style=display:flex><span>    &#34;cas&#34;: 0
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  &#34;data&#34;: {
</span></span><span style=display:flex><span>    &#34;hmac_secret_file&#34;: <span style=color:#a31515>&#34;12345678901234567890123456789012&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li>Create or use a role with an attached policy that grants access to the secret. For example, the following policy would grant access to <code>secret/data/dgraph/alpha</code>:<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#00f>path</span> <span style=color:#a31515>&#34;secret/data/dgraph/*&#34;</span> {
</span></span><span style=display:flex><span>  capabilities = [ <span style=color:#a31515>&#34;read&#34;, &#34;update&#34;</span> ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li>Using the <code>role_id</code> generated from the previous step, create a corresponding <code>secret_id</code>, and copy the <code>role_id</code> and <code>secret_id</code> over to local files, like <code>./dgraph/vault/role_id</code> and <code>./dgraph/vault/secret_id</code>, that will be used by Dgraph Alpha nodes.</li></ol><div class="notices tip"><span class=type>Tip</span> To learn more about the above steps, see <a href=https://github.com/dgraph-io/dgraph/blob/master/contrib/config/vault/docker/README.md>Dgraph Vault Integration: Docker</a>.</div><div class="notices note"><span class=type>Note</span> The key format for the <code>acl-field</code> option can be defined using <code>acl-format</code> with the values <code>base64</code> (default) or <code>raw</code>.</div><h3 id=example-using-dgraph-cli-with-hashicorp-vault-configuration>Example using Dgraph CLI with Hashicorp Vault configuration</h3><p>Here is an example of using Dgraph with a Vault server that holds the secret key:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:green>## Start Dgraph Zero in different terminal tab or window</span>
</span></span><span style=display:flex><span>dgraph zero --my=localhost:5080 --replicas 1 --raft <span style=color:#a31515>&#34;idx=1&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>## Start Dgraph Alpha in different terminal tab or window</span>
</span></span><span style=display:flex><span>dgraph alpha <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --security whitelist=<span style=color:#a31515>&#34;10.0.0.0/8,172.0.0.0/8,192.168.0.0/16&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --vault addr=<span style=color:#a31515>&#34;http://localhost:8200&#34;</span>;acl-field=<span style=color:#a31515>&#34;hmac_secret_file&#34;</span>;acl-format=<span style=color:#a31515>&#34;raw&#34;</span>;path=<span style=color:#a31515>&#34;secret/data/dgraph/alpha&#34;</span>;role-id-file=<span style=color:#a31515>&#34;./role_id&#34;</span>;secret-id-file=<span style=color:#a31515>&#34;./secret_id&#34;</span>
</span></span></code></pre></div><h3 id=example-using-docker-compose-with-hashicorp-vault-configuration>Example using Docker Compose with Hashicorp Vault configuration</h3><p>If you are using <a href=https://docs.docker.com/compose/>Docker Compose</a>, you can set up a sample Dgraph cluster using this <code>docker-compose.yaml</code> configuration:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>version: <span style=color:#a31515>&#39;3.5&#39;</span>
</span></span><span style=display:flex><span>services:
</span></span><span style=display:flex><span>  alpha1:
</span></span><span style=display:flex><span>    command: dgraph alpha --my=alpha1:7080 --zero=zero1:5080
</span></span><span style=display:flex><span>    container_name: alpha1
</span></span><span style=display:flex><span>    environment:
</span></span><span style=display:flex><span>      DGRAPH_ALPHA_VAULT: addr=http://vault:8200;acl-field=hmac_secret_file;acl-format=raw;path=secret/data/dgraph/alpha;role-id-file=/dgraph/vault/role_id;secret-id-file=/dgraph/vault/secret_id
</span></span><span style=display:flex><span>      DGRAPH_ALPHA_SECURITY: whitelist=10.0.0.0/8,172.0.0.0/8,192.168.0.0/16
</span></span><span style=display:flex><span>    image: dgraph/dgraph:
</span></span><span style=display:flex><span>    ports:
</span></span><span style=display:flex><span>      - <span style=color:#a31515>&#34;8080:8080&#34;</span>
</span></span><span style=display:flex><span>    volumes:
</span></span><span style=display:flex><span>      - ./role_id:/dgraph/vault/role_id
</span></span><span style=display:flex><span>      - ./secret_id:/dgraph/vault/secret_id
</span></span><span style=display:flex><span>  zero1:
</span></span><span style=display:flex><span>    command: dgraph zero --my=zero1:5080 --replicas 1 --raft idx=1
</span></span><span style=display:flex><span>    container_name: zero1
</span></span><span style=display:flex><span>    image: dgraph/dgraph:
</span></span></code></pre></div><p>In this example, you will also need to configure a <a href=https://www.vaultproject.io/>Hashicorp Vault</a> service named <code>vault</code> in the above <code>docker-compose.yaml</code>, and then run through this sequence:</p><ol><li>Launch <code>vault</code> service: <code>docker-compose up --detach vault</code></li><li>Unseal and Configure <code>vault</code> with the required prerequisites (see <a href=#configuring-a-hashicorp-vault-server>Configuring a Hashicorp Vault Server</a>).</li><li>Save role-id and secret-id as <code>./role_id</code> and <code>secret_id</code></li><li>Launch Dgraph Zero and Alpha: <code>docker-compose up --detach</code></li></ol><h3 id=example-using-kubernetes-helm-chart-with-hashicorp-vault-configuration>Example using Kubernetes Helm Chart with Hashicorp Vault configuration</h3><p>If you deploy Dgraph on <a href=https://kubernetes.io/>Kubernetes</a>, you can configure the ACL feature using the <a href=https://artifacthub.io/packages/helm/dgraph/dgraph>Dgraph Helm Chart</a>.</p><p>The next step is that we need to create a <a href=https://helm.sh/>Helm</a> chart config values file, such as <code>dgraph_values.yaml</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green>## dgraph_values.yaml</span>
</span></span><span style=display:flex><span>alpha:
</span></span><span style=display:flex><span>  configFile:
</span></span><span style=display:flex><span>    config.yaml: |<span style=color:#a31515>
</span></span></span><span style=display:flex><span><span style=color:#a31515>      vault:
</span></span></span><span style=display:flex><span><span style=color:#a31515>        addr: http://vault-headless.default.svc.cluster.local:9200
</span></span></span><span style=display:flex><span><span style=color:#a31515>        acl_field: hmac_secret_file
</span></span></span><span style=display:flex><span><span style=color:#a31515>        acl_format: raw
</span></span></span><span style=display:flex><span><span style=color:#a31515>        path: secret/data/dgraph/alpha
</span></span></span><span style=display:flex><span><span style=color:#a31515>        role_id_file: /dgraph/vault/role_id
</span></span></span><span style=display:flex><span><span style=color:#a31515>        secret_id_file: /dgraph/vault/secret_id
</span></span></span><span style=display:flex><span><span style=color:#a31515>      security:
</span></span></span><span style=display:flex><span><span style=color:#a31515>        whitelist: 10.0.0.0/8,172.0.0.0/8,192.168.0.0/16‘</span>      
</span></span></code></pre></div><p>To set up this chart, the <a href=https://www.vaultproject.io/>Hashicorp Vault</a> service must be installed and available. You can use the <a href=https://www.vaultproject.io/docs/platform/k8s/helm>Hashicorp Vault Helm Chart</a> and configure it to <a href=https://learn.hashicorp.com/collections/vault/auto-unseal>auto unseal</a> so that the service is immediately available after deployment.</p><h2 id=accessing-secured-dgraph>Accessing secured Dgraph</h2><p>Before managing users and groups and configuring ACL rules, you will need to login in order to get a token that is needed to access Dgraph. You will use this token with the <code>X-Dgraph-AccessToken</code> header field.</p><h3 id=logging-in>Logging In</h3><p>To login, send a POST request to <code>/admin</code> with the GraphQL mutation. For example, to log in as the root user <code>groot</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>login</span>(userId: <span style=color:#a31515>&#34;groot&#34;</span>, <span style=color:#2b91af>password</span>: <span style=color:#a31515>&#34;password&#34;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>response</span> {
</span></span><span style=display:flex><span>      accessJWT
</span></span><span style=display:flex><span>      refreshJWT
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Response:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;data&#34;: {
</span></span><span style=display:flex><span>    &#34;accessJWT&#34;: <span style=color:#a31515>&#34;&lt;accessJWT&gt;&#34;</span>,
</span></span><span style=display:flex><span>    &#34;refreshJWT&#34;: <span style=color:#a31515>&#34;&lt;refreshJWT&gt;&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=access-token>Access Token</h4><p>The response includes the access and refresh JWTs which are used for the authentication itself and refreshing the authentication token, respectively. Save the JWTs from the response for later HTTP requests.</p><p>You can run authenticated requests by passing the access JWT to a request via the <code>X-Dgraph-AccessToken</code> header. Add the header <code>X-Dgraph-AccessToken</code> with the <code>accessJWT</code> value which you got in the login response in the GraphQL tool which you&rsquo;re using to make the request.</p><p>For example, if you were using the GraphQL Playground, you would add this in the headers section:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ &#34;X-Dgraph-AccessToken&#34; : <span style=color:#a31515>&#34;&lt;accessJWT&gt;&#34;</span> }
</span></span></code></pre></div><p>And in the main code section, you can add a mutation, such as:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>addUser</span>(<span style=color:#00f>input</span>: [{ <span style=color:#2b91af>name</span>: <span style=color:#a31515>&#34;alice&#34;</span>, <span style=color:#2b91af>password</span>: <span style=color:#a31515>&#34;whiterabbit&#34;</span> }]) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>user</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=refresh-token>Refresh Token</h4><p>The refresh token can be used in the <code>/admin</code> POST GraphQL mutation to receive new access and refresh JWTs, which is useful to renew the authenticated session once the ACL access TTL expires (controlled by Dgraph Alpha&rsquo;s flag <code>--acl_access_ttl</code> which is set to 6h0m0s by default).</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>login</span>(
</span></span><span style=display:flex><span>    userId: <span style=color:#a31515>&#34;groot&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#2b91af>password</span>: <span style=color:#a31515>&#34;password&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#2b91af>refreshToken</span>: <span style=color:#a31515>&#34;&lt;refreshJWT&gt;&#34;</span>
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>response</span> {
</span></span><span style=display:flex><span>      accessJWT
</span></span><span style=display:flex><span>      refreshJWT
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=login-using-a-client>Login using a client</h3><p>With ACL configured, you need to log in as a user to access data protected by ACL rules. You can do this using the client&rsquo;s <code>.login(USER_ID, USER_PASSWORD)</code> method.</p><p>Here are some code samples using a client:</p><ul><li><strong>Go</strong> (<a href=https://github.com/dgraph-io/dgo>dgo client</a>): example <code>acl_over_tls_test.go</code> (<a href=https://github.com/dgraph-io/dgraph/blob/master/tlstest/acl/acl_over_tls_test.go>here</a>)</li><li><strong>Java</strong> (<a href=https://github.com/dgraph-io/dgraph4j>dgraph4j</a>): example <code>AclTest.java</code> (<a href=https://github.com/dgraph-io/dgraph4j/blob/master/src/test/java/io/dgraph/AclTest.java>here</a>)</li></ul><h3 id=login-using-curl>Login using curl</h3><p>If you are using <code>curl</code> from the command line, you can use the following with the above <a href=#logging-in>login mutation</a> saved to <code>login.graphql</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:green>## Login and save results</span>
</span></span><span style=display:flex><span>JSON_RESULT=<span style=color:#00f>$(</span>curl http://localhost:8080/admin --silent --request POST <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --header <span style=color:#a31515>&#34;Content-Type: application/graphql&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --upload-file login.graphql
</span></span><span style=display:flex><span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>## Extracting a token using GNU grep, perl, the silver searcher, or jq</span>
</span></span><span style=display:flex><span>TOKEN=<span style=color:#00f>$(</span>grep -oP <span style=color:#a31515>&#39;(?&lt;=accessJWT&#34;:&#34;)[^&#34;]*&#39;</span> &lt;&lt;&lt; $JSON_RESULT<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>TOKEN=<span style=color:#00f>$(</span>perl -wln -e <span style=color:#a31515>&#39;/(?&lt;=accessJWT&#34;:&#34;)[^&#34;]*/ and print $&amp;;&#39;</span> &lt;&lt;&lt; $JSON_RESULT<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>TOKEN=<span style=color:#00f>$(</span>ag -o <span style=color:#a31515>&#39;(?&lt;=accessJWT&#34;:&#34;)[^&#34;]*&#39;</span> &lt;&lt;&lt; $JSON_RESULT<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>TOKEN=<span style=color:#00f>$(</span>jq -r <span style=color:#a31515>&#39;.data.login.response.accessJWT&#39;</span> &lt;&lt;&lt; $JSON_RESULT<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>## Run a GraphQL query using the token</span>
</span></span><span style=display:flex><span>curl http://localhost:8080/admin --silent --request POST <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --header <span style=color:#a31515>&#34;Content-Type: application/graphql&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --header <span style=color:#a31515>&#34;X-Dgraph-AccessToken: </span>$TOKEN<span style=color:#a31515>&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --upload-file some_other_query.graphql
</span></span></code></pre></div><div class="notices tip"><span class=type>Tip</span> Parsing JSON results on the command line can be challenging, so you will find some alternatives to extract the desired data using popular tools, such as <a href=https://github.com/ggreer/the_silver_searcher>the silver searcher</a> or the json query tool <a href=https://stedolan.github.io/jq>jq</a>, embedded in this snippet.</div><h2 id=user-and-group-administration>User and group administration</h2><p>The default configuration comes with a user <code>groot</code>, with a password of <code>password</code>. The <code>groot</code> user is part of administrative group called <code>guardians</code> that have access to everything. You can add more users to the <code>guardians</code> group as needed.</p><h3 id=reset-the-root-password>Reset the root password</h3><p>You can reset the root password like this example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>updateUser</span>(
</span></span><span style=display:flex><span>    <span style=color:#00f>input</span>: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>filter</span>: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;groot&#34;</span> } }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>set</span>: { <span style=color:#2b91af>password</span>: <span style=color:#a31515>&#34;$up3r$3cr3t1337p@$$w0rd&#34;</span> }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>user</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=create-a-regular-user>Create a regular user</h3><p>To create a user <code>alice</code>, with password <code>whiterabbit</code>, you should execute the following GraphQL mutation:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>addUser</span>(<span style=color:#00f>input</span>: [{<span style=color:#2b91af>name</span>: <span style=color:#a31515>&#34;alice&#34;</span>, <span style=color:#2b91af>password</span>: <span style=color:#a31515>&#34;whiterabbit&#34;</span>}]) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>user</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=create-a-group>Create a group</h3><p>To create a group <code>dev</code>, you should execute:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>addGroup</span>(<span style=color:#00f>input</span>: [{<span style=color:#2b91af>name</span>: <span style=color:#a31515>&#34;dev&#34;</span>}]) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>group</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>      users {
</span></span><span style=display:flex><span>        name
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=assign-a-user-to-a-group>Assign a user to a group</h3><p>To assign the user <code>alice</code> to both the group <code>dev</code> and the group <code>sre</code>, the mutation should be</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>updateUser</span>(
</span></span><span style=display:flex><span>    <span style=color:#00f>input</span>: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>filter</span>: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;alice&#34;</span> } }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>set</span>: { <span style=color:#2b91af>groups</span>: [{ <span style=color:#2b91af>name</span>: <span style=color:#a31515>&#34;dev&#34;</span> }, { <span style=color:#2b91af>name</span>: <span style=color:#a31515>&#34;sre&#34;</span> }] }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>user</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>      groups {
</span></span><span style=display:flex><span>        name
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=remove-a-user-from-a-group>Remove a user from a group</h3><p>To remove <code>alice</code> from the <code>dev</code> group, the mutation should be</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>updateUser</span>(
</span></span><span style=display:flex><span>    <span style=color:#00f>input</span>: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>filter</span>: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;alice&#34;</span> } }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>remove</span>: { <span style=color:#2b91af>groups</span>: [{ <span style=color:#2b91af>name</span>: <span style=color:#a31515>&#34;dev&#34;</span> }] }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>user</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>      groups {
</span></span><span style=display:flex><span>        name
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=delete-a-user>Delete a User</h3><p>To delete the user <code>alice</code>, you should execute</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>deleteUser</span>(filter: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;alice&#34;</span> } }) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>msg</span>
</span></span><span style=display:flex><span>    numUids
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=delete-a-group>Delete a Group</h3><p>To delete the group <code>sre</code>, the mutation should be</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>deleteGroup</span>(filter: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;sre&#34;</span> } }) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>msg</span>
</span></span><span style=display:flex><span>    numUids
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=acl-rules-configuration>ACL rules configuration</h2><p>You can set up ACL rules using the Dgraph Ratel UI or by using a GraphQL tool, such as <a href=https://insomnia.rest/>Insomnia</a>, <a href=https://github.com/prisma/graphql-playground>GraphQL Playground</a>, <a href=https://github.com/skevy/graphiql-app>GraphiQL</a>, etc. You can set the permissions on a predicate for the group using a pattern similar to the UNIX file permission conventions shown below:</p><table><thead><tr><th>Permission</th><th>Value</th><th>Binary</th></tr></thead><tbody><tr><td><code>READ</code></td><td><code>4</code></td><td><code>100</code></td></tr><tr><td><code>WRITE</code></td><td><code>2</code></td><td><code>010</code></td></tr><tr><td><code>MODIFY</code></td><td><code>1</code></td><td><code>001</code></td></tr><tr><td><code>READ</code> + <code>WRITE</code></td><td><code>6</code></td><td><code>110</code></td></tr><tr><td><code>READ</code> + <code>WRITE</code> + <code>MODIFY</code></td><td><code>7</code></td><td><code>111</code></td></tr></tbody></table><p>These permissions represent the following:</p><ul><li><code>READ</code> - group has permission to read read the predicate</li><li><code>WRITE</code> - group has permission to write or update the predicate</li><li><code>MODIFY</code> - group has permission to change the predicate&rsquo;s schema</li></ul><p>The following examples will grant full permissions to predicates to the group <code>dev</code>. If there are no rules for
a predicate, the default behavior is to block all (<code>READ</code>, <code>WRITE</code> and <code>MODIFY</code>) operations.</p><h3 id=assign-predicate-permissions-to-a-group>Assign predicate permissions to a group</h3><p>Here we assign a permission rule for the <code>friend</code> predicate to the group:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>updateGroup</span>(
</span></span><span style=display:flex><span>    <span style=color:#00f>input</span>: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>filter</span>: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;dev&#34;</span> } }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>set</span>: { <span style=color:#2b91af>rules</span>: [{ <span style=color:#2b91af>predicate</span>: <span style=color:#a31515>&#34;friend&#34;</span>, <span style=color:#2b91af>permission</span>: <span style=color:#2b91af>7</span> }] }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>group</span> {
</span></span><span style=display:flex><span>      name
</span></span><span style=display:flex><span>      rules {
</span></span><span style=display:flex><span>        permission
</span></span><span style=display:flex><span>        predicate
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In case you have <a href=/query-language/schema/#reverse-edges>reverse edges</a>, they have to be given the permission to the group as well</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>updateGroup</span>(
</span></span><span style=display:flex><span>    <span style=color:#00f>input</span>: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>filter</span>: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;dev&#34;</span> } }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>set</span>: { <span style=color:#2b91af>rules</span>: [{ <span style=color:#2b91af>predicate</span>: <span style=color:#a31515>&#34;~friend&#34;</span>, <span style=color:#2b91af>permission</span>: <span style=color:#2b91af>7</span> }] }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>group</span> {
</span></span><span style=display:flex><span>      name
</span></span><span style=display:flex><span>      rules {
</span></span><span style=display:flex><span>        permission
</span></span><span style=display:flex><span>        predicate
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In some cases, it may be desirable to manage permissions for all the predicates together rather than individual ones. This can be achieved using the <code>dgraph.all</code> keyword.</p><p>The following example provides <code>read+write</code> access to the <code>dev</code> group over all the predicates of a given namespace using the <code>dgraph.all</code> keyword.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>updateGroup</span>(
</span></span><span style=display:flex><span>    <span style=color:#00f>input</span>: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>filter</span>: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;dev&#34;</span> } }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>set</span>: { <span style=color:#2b91af>rules</span>: [{ <span style=color:#2b91af>predicate</span>: <span style=color:#a31515>&#34;dgraph.all&#34;</span>, <span style=color:#2b91af>permission</span>: <span style=color:#2b91af>6</span> }] }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>group</span> {
</span></span><span style=display:flex><span>      name
</span></span><span style=display:flex><span>      rules {
</span></span><span style=display:flex><span>        permission
</span></span><span style=display:flex><span>        predicate
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class="notices note"><span class=type>Note</span> The permissions assigned to a group <code>dev</code> is the union of permissions from <code>dgraph.all</code> and permissions for a specific predicate <code>name</code>. So if the group is assigned <code>READ</code> permission for <code>dgraph.all</code> and <code>WRITE</code> permission for predicate <code>name</code> it will have both, <code>READ</code> and <code>WRITE</code> permissions for the <code>name</code> predicate, as a result of the union.</div><h3 id=remove-a-rule-from-a-group>Remove a rule from a group</h3><p>To remove a rule or rules from the group <code>dev</code>, the mutation should be:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>updateGroup</span>(
</span></span><span style=display:flex><span>    <span style=color:#00f>input</span>: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>filter</span>: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;dev&#34;</span> } }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>remove</span>: { <span style=color:#2b91af>rules</span>: [ <span style=color:#a31515>&#34;friend&#34;</span>, <span style=color:#a31515>&#34;~friend&#34;</span> ] }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>group</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>      rules {
</span></span><span style=display:flex><span>        predicate
</span></span><span style=display:flex><span>        permission
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=querying-users-and-groups>Querying users and groups</h2><p>You can set up ACL rules using the Dgraph Ratel UI or by using a GraphQL tool, such as <a href=https://insomnia.rest/>Insomnia</a>, <a href=https://github.com/prisma/graphql-playground>GraphQL Playground</a>, <a href=https://github.com/skevy/graphiql-app>GraphiQL</a>, etc. The permissions can be set on a predicate for the group using using pattern similar to the UNIX file permission convention:</p><p>You can query and get information for users and groups. These sections show output that will show the user <code>alice</code> and the <code>dev</code> group along with rules for <code>friend</code> and <code>~friend</code> predicates.</p><h3 id=query-for-users>Query for users</h3><p>Let&rsquo;s query for the user <code>alice</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>queryUser</span>(filter: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;alice&#34;</span> } }) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>    groups {
</span></span><span style=display:flex><span>      name
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The output should show the groups that the user has been added to, e.g.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;data&#34;: {
</span></span><span style=display:flex><span>    &#34;queryUser&#34;: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        &#34;name&#34;: <span style=color:#a31515>&#34;alice&#34;</span>,
</span></span><span style=display:flex><span>        &#34;groups&#34;: [
</span></span><span style=display:flex><span>          {
</span></span><span style=display:flex><span>            &#34;name&#34;: <span style=color:#a31515>&#34;dev&#34;</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=get-user-information>Get user information</h3><p>We can obtain information about a user with the following query:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>getUser</span>(name: <span style=color:#a31515>&#34;alice&#34;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>    groups {
</span></span><span style=display:flex><span>      name
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The output should show the groups that the user has been added to, e.g.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;data&#34;: {
</span></span><span style=display:flex><span>    &#34;getUser&#34;: {
</span></span><span style=display:flex><span>      &#34;name&#34;: <span style=color:#a31515>&#34;alice&#34;</span>,
</span></span><span style=display:flex><span>      &#34;groups&#34;: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          &#34;name&#34;: <span style=color:#a31515>&#34;dev&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=query-for-groups>Query for groups</h3><p>Let&rsquo;s query for the <code>dev</code> group:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>queryGroup</span>(filter: { <span style=color:#2b91af>name</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;dev&#34;</span> } }) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>    users {
</span></span><span style=display:flex><span>      name
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    rules {
</span></span><span style=display:flex><span>      permission
</span></span><span style=display:flex><span>      predicate
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The output should include the users in the group as well as the permissions, the
group&rsquo;s ACL rules, e.g.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;data&#34;: {
</span></span><span style=display:flex><span>    &#34;queryGroup&#34;: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        &#34;name&#34;: <span style=color:#a31515>&#34;dev&#34;</span>,
</span></span><span style=display:flex><span>        &#34;users&#34;: [
</span></span><span style=display:flex><span>          {
</span></span><span style=display:flex><span>            &#34;name&#34;: <span style=color:#a31515>&#34;alice&#34;</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        &#34;rules&#34;: [
</span></span><span style=display:flex><span>          {
</span></span><span style=display:flex><span>            &#34;permission&#34;: 7,
</span></span><span style=display:flex><span>            &#34;predicate&#34;: <span style=color:#a31515>&#34;friend&#34;</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          {
</span></span><span style=display:flex><span>            &#34;permission&#34;: 7,
</span></span><span style=display:flex><span>            &#34;predicate&#34;: <span style=color:#a31515>&#34;~friend&#34;</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=get-group-information>Get group information</h3><p>To check the <code>dev</code> group information:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>getGroup</span>(name: <span style=color:#a31515>&#34;dev&#34;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>name</span>
</span></span><span style=display:flex><span>    users {
</span></span><span style=display:flex><span>      name
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    rules {
</span></span><span style=display:flex><span>      permission
</span></span><span style=display:flex><span>      predicate
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The output should include the users in the group as well as the permissions, the
group&rsquo;s ACL rules, e.g.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;data&#34;: {
</span></span><span style=display:flex><span>    &#34;getGroup&#34;: {
</span></span><span style=display:flex><span>      &#34;name&#34;: <span style=color:#a31515>&#34;dev&#34;</span>,
</span></span><span style=display:flex><span>      &#34;users&#34;: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          &#34;name&#34;: <span style=color:#a31515>&#34;alice&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      &#34;rules&#34;: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          &#34;permission&#34;: 7,
</span></span><span style=display:flex><span>          &#34;predicate&#34;: <span style=color:#a31515>&#34;friend&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          &#34;permission&#34;: 7,
</span></span><span style=display:flex><span>          &#34;predicate&#34;: <span style=color:#a31515>&#34;~friend&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=reset-groot-password>Reset Groot Password</h2><p>If you have forgotten the password to the <code>groot</code> user, then you may reset the <code>groot</code> password (or
the password for any user) by following these steps.</p><ol><li>Stop Dgraph Alpha.</li><li>Turn off ACLs by removing the <code>--acl_hmac_secret</code> config flag in the Alpha config. This leaves
the Alpha open with no ACL rules, so be sure to restrict access, including stopping request
traffic to this Alpha.</li><li>Start Dgraph Alpha.</li><li>Connect to Dgraph Alpha using Ratel and run the following upsert mutation to update the <code>groot</code> password
to <code>newpassword</code> (choose your own secure password):<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span>upsert {
</span></span><span style=display:flex><span>  <span style=color:#00f>query</span> {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>groot</span> as var(func: <span style=color:#2b91af>eq</span>(dgraph<span>.</span>xid, <span style=color:#a31515>&#34;groot&#34;</span>))
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>set</span> {
</span></span><span style=display:flex><span>      uid(groot) <span>&lt;</span>dgraph<span>.</span>password<span>&gt;</span> <span style=color:#a31515>&#34;newpassword&#34;</span> <span>.</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li>Restart Dgraph Alpha with ACLs turned on by setting the <code>--acl_hmac_secret</code> config flag.</li><li>Login as groot with your new password.</li></ol></div><div class=post__comments><footer class=clearfix><a target=_blank href=https://discuss.dgraph.io><img class=logo src=https://discuss-dgraph-io.s3.dualstack.us-west-1.amazonaws.com/original/2X/4/4167dff901e0bed240f529edd1d9f318462968f8.png></a>
<a class=question-btn target=_blank href=https://discuss.dgraph.io/c/docs/49><i class="fa fa-question-circle"></i> Ask a Question</a>
<a class=edit-btn target=_blank href=https://github.com/dgraph-io/librebaas-docs/edit/master/content/enterprise-features/access-control-lists.md><i class="fa fa-github-alt"></i> Edit Page</a></footer></div></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#enable-enterprise-acl-feature>Enable enterprise ACL feature</a><ul><li><a href=#example-using-dgraph-cli>Example using Dgraph CLI</a></li><li><a href=#example-using-docker-compose>Example using Docker Compose</a></li><li><a href=#example-using-kubernetes-helm-chart>Example using Kubernetes Helm Chart</a></li></ul></li><li><a href=#storing-acl-secret-in-hashicorp-vault>Storing ACL secret in Hashicorp Vault</a><ul><li><a href=#configuring-a-hashicorp-vault-server>Configuring a Hashicorp Vault Server</a></li><li><a href=#example-using-dgraph-cli-with-hashicorp-vault-configuration>Example using Dgraph CLI with Hashicorp Vault configuration</a></li><li><a href=#example-using-docker-compose-with-hashicorp-vault-configuration>Example using Docker Compose with Hashicorp Vault configuration</a></li><li><a href=#example-using-kubernetes-helm-chart-with-hashicorp-vault-configuration>Example using Kubernetes Helm Chart with Hashicorp Vault configuration</a></li></ul></li><li><a href=#accessing-secured-dgraph>Accessing secured Dgraph</a><ul><li><a href=#logging-in>Logging In</a><ul><li><a href=#access-token>Access Token</a></li><li><a href=#refresh-token>Refresh Token</a></li></ul></li><li><a href=#login-using-a-client>Login using a client</a></li><li><a href=#login-using-curl>Login using curl</a></li></ul></li><li><a href=#user-and-group-administration>User and group administration</a><ul><li><a href=#reset-the-root-password>Reset the root password</a></li><li><a href=#create-a-regular-user>Create a regular user</a></li><li><a href=#create-a-group>Create a group</a></li><li><a href=#assign-a-user-to-a-group>Assign a user to a group</a></li><li><a href=#remove-a-user-from-a-group>Remove a user from a group</a></li><li><a href=#delete-a-user>Delete a User</a></li><li><a href=#delete-a-group>Delete a Group</a></li></ul></li><li><a href=#acl-rules-configuration>ACL rules configuration</a><ul><li><a href=#assign-predicate-permissions-to-a-group>Assign predicate permissions to a group</a></li><li><a href=#remove-a-rule-from-a-group>Remove a rule from a group</a></li></ul></li><li><a href=#querying-users-and-groups>Querying users and groups</a><ul><li><a href=#query-for-users>Query for users</a></li><li><a href=#get-user-information>Get user information</a></li><li><a href=#query-for-groups>Query for groups</a></li><li><a href=#get-group-information>Get group information</a></li></ul></li><li><a href=#reset-groot-password>Reset Groot Password</a></li></ul></nav></div></div></main><div class="modal fade" id=runnable-modal tabindex=-1 role=dialog aria-labelledby=exampleModalLabel aria-hidden=true><a href=# data-dismiss=modal class=modal-close-btn>Close</a><div class=modal-dialog role=document><div class=modal-content><div class=modal-body></div></div></div></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script>
<script type=text/javascript>if(window.docsearch){var version="latest",path=window.location.pathname,arr=/(?:\/)?((?:master)|(?:v[0-9][^/]+))(?:\/)?.*$/.exec(path);arr!=null&&arr.length>1&&(version=arr[1]),window.docsearch({apiKey:"fe4cbc1640c6c87bbc5f099902d86f97",indexName:"dgraph",inputSelector:"#algolia-doc-search",algoliaOptions:{filters:`version:${version}`},debug:!1})}</script><script type=text/javascript>adroll_adv_id="L42C3U2UXBBPVAMISVXVLC",adroll_pix_id="MOR4VUNPK5B2LHEZ2NNTDX",adroll_version="2.0",function(e,t,n,s,o){e.__adroll_loaded=!0,e.adroll=e.adroll||[],e.adroll.f=["setProperties","identify","track"];var i="https://s.adroll.com/j/"+adroll_adv_id+"/roundtrip.js";for(o=0;o<e.adroll.f.length;o++)e.adroll[e.adroll.f[o]]=e.adroll[e.adroll.f[o]]||function(t){return function(){e.adroll.push([t,arguments])}}(e.adroll.f[o]);n=t.createElement("script"),s=t.getElementsByTagName("script")[0],n.async=1,n.src=i,s.parentNode.insertBefore(n,s)}(window,document),adroll.track("pageView")</script><script src=/js/clipboard.min.js></script>
<script src=/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script>
<script src=/js/runnable.js?6e7f328df4134d18ba5c8dd11f84deb8></script>
<script>hljs.initHighlightingOnLoad()</script><script async src=//unpkg.com/@dgraph-io/community></script>
<script src=https://cdn.ranksci.com/dgraph-411505.min.js type=text/javascript></script></body></html>