<!doctype html><html lang=en class="js csstransforms3d"><head><script>var subPaths={"/deploy/#install-dgraph":"/deploy/download","/deploy/#docker":"/deploy/download/#docker","/deploy/#automatic-download":"/deploy/download/#automatic-download","/deploy/#manual-download-[optional]":"/deploy/download/#manual-download-[optional]","/deploy/#building-from-source":"/deploy/download/#building-from-source","/deploy/#understanding-dgraph-cluster":"/deploy/cluster-setup/#understanding-dgraph-cluster","/deploy/#sharding":"/deploy/cluster-setup/#sharding","/deploy/#shard-rebalancing":"/deploy/cluster-setup/#shard-rebalancing","/deploy/#consistent-replication":"/deploy/cluster-setup/#consistent-replication","/deploy/#types-of-ports":"/deploy/ports-usage/#types-of-ports","/deploy/#ports-used-by-different-nodes":"/deploy/ports-usage/#ports-used-by-different-nodes","/deploy/#ha-cluster-setup":"/deploy/ports-usage/#ha-cluster-setup","/deploy/#dgraph-zero":"/deploy/ports-usage/#dgraph-zero","/deploy/#dgraph-alpha":"/deploy/ports-usage/#dgraph-alpha","/deploy/#run-directly-on-the-host":"/deploy/single-host-setup/#run-directly-on-the-host","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker":"/deploy/single-host-setup/#run-using-docker","/deploy/#create-docker-network":"/deploy/single-host-setup/#create-docker-network","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker-compose-(on-single-aws-instance)":"/deploy/single-host-setup/#run-using-docker-compose-(on-single-aws-instance)","/deploy/#using-docker-swarm":"/deploy/multi-host-setup/#using-docker-swarm","/deploy/#cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#cluster-setup-using-docker-swarm","/deploy/#ha-cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#ha-cluster-setup-using-docker-swarm","/deploy/#single-server":"/deploy/kubernetes/#single-server","/deploy/#deploy-single-server":"/deploy/kubernetes/#deploy-single-server","/deploy/#verify-single-server":"/deploy/kubernetes/#verify-single-server","/deploy/#test-single-server-setup":"/deploy/kubernetes/#test-single-server-setup","/deploy/#remove-single-server-resources":"/deploy/kubernetes/#remove-single-server-resources","/deploy/#ha-cluster-setup-using-kubernetes":"/deploy/kubernetes/#ha-cluster-setup-using-kubernetes","/deploy/#validate-kubernetes-cluster-for-ha":"/deploy/kubernetes/#validate-kubernetes-cluster-for-ha","/deploy/#verify-dgraph-ha-cluster":"/deploy/kubernetes/#verify-dgraph-ha-cluster","/deploy/#test-dgraph-ha-cluster-setup":"/deploy/kubernetes/#test-dgraph-ha-cluster-setup","/deploy/#delete-dgraph-ha-cluster-resources":"/deploy/kubernetes/#delete-dgraph-ha-cluster-resources","/deploy/#using-helm-chart":"/deploy/kubernetes/#using-helm-chart","/deploy/#installing-the-chart":"/deploy/kubernetes/#installing-the-chart","/deploy/#upgrading-the-chart":"/deploy/kubernetes/#upgrading-the-chart","/deploy/#deleting-the-chart":"/deploy/kubernetes/#deleting-the-chart","/deploy/#configuration":"/deploy/kubernetes/#configuration","/deploy/#monitoring-in-kubernetes":"/deploy/kubernetes/#monitoring-in-kubernetes","/deploy/#kubernetes-storage":"/deploy/kubernetes/#kubernetes-storage","/deploy/#local-storage":"/deploy/kubernetes/#local-storage","/deploy/#non-local-persistent-disks":"/deploy/kubernetes/#non-local-persistent-disks","/deploy/#removing-a-dgraph-pod":"/deploy/kubernetes/#removing-a-dgraph-pod","/deploy/#kubernetes-and-bulk-loader":"/deploy/kubernetes/#kubernetes-and-bulk-loader","/deploy/#more-about-dgraph-alpha":"/deploy/dgraph-alpha","/deploy/#querying-health":"/deploy/dgraph-alpha/#querying-health","/deploy/#more-about-dgraph-zero":"/deploy/dgraph-zero","/deploy/#more-about-state-endpoint":"/deploy/dgraph-zero/#more-about-state-endpoint","/deploy/#query-logging":"/deploy/log-format/#query-logging","/deploy/#dgraph-certificate-management-tool":"/deploy/tls-configuration/#dgraph-certificate-management-tool","/deploy/#file-naming-conventions":"/deploy/tls-configuration/#file-naming-conventions","/deploy/#certificate-inspection":"/deploy/tls-configuration/#certificate-inspection","/deploy/#tls-options":"/deploy/tls-configuration/#tls-options","/deploy/#using-tls-without-client-authentication":"/deploy/tls-configuration/#using-tls-without-client-authentication","/deploy/#using-tls-with-client-authentication":"/deploy/tls-configuration/#using-tls-with-client-authentication","/deploy/#client-authentication-options":"/deploy/tls-configuration/#client-authentication-options","/deploy/#using-ratel-ui-with-client-authentication":"/deploy/tls-configuration/#using-ratel-ui-with-client-authentication","/deploy/#using-curl-with-client-authentication":"/deploy/tls-configuration/#using-curl-with-client-authentication","/deploy/#access-data-using-a-client":"/deploy/tls-configuration/#access-data-using-a-client","/deploy/#troubleshooting-ratel-s-client-authentication":"/deploy/tls-configuration/#troubleshooting-ratel-s-client-authentication","/deploy/#live-loader":"/deploy/fast-data-loading/#live-loader","/deploy/#encrypted-imports-via-live-loader":"/deploy/fast-data-loading/#encrypted-imports-via-live-loader","/deploy/#encrypted-rdf-json-file-and-schema-via-live-loader":"/deploy/fast-data-loading/#encrypted-rdf-json-file-and-schema-via-live-loader","/deploy/#other-live-loader-options":"/deploy/fast-data-loading/#other-live-loader-options","/deploy/#bulk-loader":"/deploy/fast-data-loading/#bulk-loader","/deploy/#encryption-at-rest-with-bulk-loader":"/deploy/fast-data-loading/#encryption-at-rest-with-bulk-loader","/deploy/#encrypting-imports-via-bulk-loader":"/deploy/fast-data-loading/#encrypting-imports-via-bulk-loader","/deploy/#other-bulk-loader-options":"/deploy/fast-data-loading/#other-bulk-loader-options","/deploy/#tuning-monitoring":"/deploy/fast-data-loading/#tuning-monitoring","/deploy/#disk-metrics":"/deploy/metrics/#disk-metrics","/deploy/#memory-metrics":"/deploy/metrics/#memory-metrics","/deploy/#activity-metrics":"/deploy/metrics/#activity-metrics","/deploy/#health-metrics":"/deploy/metrics/#health-metrics","/deploy/#go-metrics":"/deploy/metrics/#go-metrics","/deploy/#examining-traces-with-zpages":"/deploy/tracing/#examining-traces-with-zpages","/deploy/#examining-traces-with-jaeger":"/deploy/tracing/#examining-traces-with-jaeger","/deploy/#setting-up-multiple-dgraph-clusters-with-jaeger":"/deploy/tracing/#setting-up-multiple-dgraph-clusters-with-jaeger","/deploy/#whitelisting-admin-operations":"/deploy/dgraph-administration/#whitelisting-admin-operations","/deploy/#restricting-mutation-operations":"/deploy/dgraph-administration/#restricting-mutation-operations","/deploy/#securing-alter-operations":"/deploy/dgraph-administration/#securing-alter-operations","/deploy/#export-database":"/deploy/dgraph-administration/#exporting-database","/deploy/#encrypting-exports":"/deploy/dgraph-administration/#encrypting-exports","/deploy/#shutting-down-database":"/deploy/dgraph-administration/#shutting-down-database","/deploy/#deleting-database":"/deploy/dgraph-administration/#deleting-database","/deploy/#upgrading-database":"/deploy/dgraph-administration/#upgrading-database","/deploy/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers":"/deploy/dgraph-administration/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers","/deploy/#post-installation":"/deploy/dgraph-administration/#post-installation","/deploy/#running-oom-out-of-memory":"/deploy/troubleshooting/#running-oom-out-of-memory","/deploy/#too-many-open-files":"/deploy/troubleshooting/#too-many-open-files","/deploy/#cluster-requirements":"/deploy/production-checklist/#cluster-requirements","/deploy/#machine-requirements":"/deploy/production-checklist/#machine-requirements","/deploy/#operating-system":"/deploy/production-checklist/#operating-system","/deploy/#cpu-and-memory":"/deploy/production-checklist/#cpu-and-memory","/deploy/#disk":"/deploy/production-checklist/#disk","/deploy/#firewall-rules":"/deployproduction-checklist/#firewall-rules","/deploy/#operating-system-tuning":"/deploy/production-checklist/#operating-system-tuning","/deploy/#deployment":"/deploy/production-checklist/#deployment","/deploy/#terminology":"/deploy/production-checklist/#terminology","/deploy/#basic-setup-2-node-cluster":"/deploy/production-checklist/#basic-setup-2-node-cluster","/deploy/#ha-setup-6-node-cluster":"/deploy/production-checklist/#ha-setup-6-node-cluster","/deploy/#supplementary-services":"/deploy/production-checklist/#supplementary-services","/deploy/#see-also":"/deploy/","/query-language/#take-a-tour-https-tour-dgraph-io":"/query-language/graphql-fundamentals/#take-a-tour-https-tour-dgraph-io","/query-language/#running-examples":"/query-language/graphql-fundamentals/#running-examples","/query-language/#graphql-fundamentals":"/query-language/graphql-fundamentals/#graphql-fundamentals","/query-language/#returning-values":"/query-language/graphql-fundamentals/#returning-values","/query-language/#expanding-graph-edges":"/query-language/graphql-fundamentals/#expanding-graph-edges","/query-language/#comments":"/query-language/graphql-fundamentals/#comments","/query-language/#applying-filters":"/query-language/graphql-fundamentals/#applying-filters","/query-language/#language-support":"/query-language/graphql-fundamentals/#language-support","/query-language/#functions":"/query-language/functions","/query-language/#term-matching":"/query-language/functions/#term-matching","/query-language/#allofterms":"/query-language/functions/#allofterms","/query-language/#usage-at-root":"/query-language/functions/#usage-at-root","/query-language/#usage-as-filter":"/query-language/functions/#usage-as-filter","/query-language/#anyofterms":"/query-language/functions/#anyofterms","/query-language/#usage-at-root-1":"/query-language/functions/#usage-at-root-1","/query-language/#usage-as-filter-1":"/query-language/functions/#usage-as-filter-1","/query-language/#regular-expressions":"/query-language/functions/#regular-expressions","/query-language/#technical-details":"/query-language/functions/#technical-details","/query-language/#writing-efficient-regular-expressions-and-limitations":"/query-language/functions/#writing-efficient-regular-expressions-and-limitations","/query-language/#fuzzy-matching":"/query-language/functions/#fuzzy-matching","/query-language/#full-text-search":"/query-language/functions/#full-text-search","/query-language/#inequality":"/query-language/functions/#inequality","/query-language/#equal-to":"/query-language/functions/#equal-to","/query-language/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to":"/query-language/functions/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to","/query-language/#uid":"/query-language/functions/#uid","/query-language/#uid-in":"/query-language/functions/#uid-in","/query-language/#has":"/query-language/functions/#has","/query-language/#geolocation":"/query-language/functions/#geolocation","/query-language/#mutations":"/query-language/functions/#mutations","/query-language/#query":"/query-language/functions/#query","/query-language/#near":"/query-language/functions/#near","/query-language/#within":"/query-language/functions/#within","/query-language/#contains":"/query-language/functions/#contains","/query-language/#intersects":"/query-language/functions/#intersects","/query-language/#connecting-filters":"/query-language/connecting-filters/","/query-language/#and-or-and-not":"/query-language/connecting-filters/#and-or-and-not","/query-language/#alias":"/query-language/alias","/query-language/#pagination":"/query-language/pagination","/query-language/#first":"/query-language/pagination/#first","/query-language/#offset":"/query-language/paginatio/n#offset","/query-language/#after":"/query-language/pagination/#after","/query-language/#count":"/query-language/count","/query-language/#sorting":"/query-language/sorting","/query-language/#multiple-query-blocks":"/query-language/multiple-query-blocks","/query-language/#var-blocks":"/query-language/multiple-query-blocks/#var-blocks","/query-language/#query-variables":"/query-language/query-variables/","/query-language/#value-variables":"/query-language/value-variables/","/query-language/#variable-propagation":"/query-language/value-variables/#variable-propagation","/query-language/#aggregation":"/query-language/aggregation/","/query-language/#min":"/query-language/aggregation/#min","/query-language/#usage-at-root-2":"/query-language/aggregation/#usage-at-root-2","/query-language/#usage-at-other-levels":"/query-language/aggregation/#usage-at-other-levels","/query-language/#max":"/query-language/aggregation/#max","/query-language/#usage-at-root-3":"/query-language/aggregation/#usage-at-root-3","/query-language/#usage-at-other-levels-1":"/query-language/aggregation/#usage-at-other-levels-1","/query-language/#sum-and-avg":"/query-language/aggregation/#sum-and-avg","/query-language/#usage-at-root-4":"/query-language/aggregation/#usage-at-root-4","/query-language/#usage-at-other-levels-2":"/query-language/aggregation/#usage-at-other-levels-2","/query-language/#aggregating-aggregates":"/query-language/aggregation/#aggregating-aggregates","/query-language/#math-on-value-variables":"/query-language/math-on-value-variables/","/query-language/#groupby":"/query-language/groupby/","/query-language/#expand-predicates":"/query-language/expand-predicates/","/query-language/#filtering-during-expand":"/query-language/expand-predicates/#filtering-during-expand","/query-language/#cascade-directive":"/query-language/cascade-directive/","/query-language/#normalize-directive":"/query-language/normalize-directive/","/query-language/#ignorereflex-directive":"/query-language/ignorereflex-directive/","/query-language/#debug":"/query-language/debug/","/query-language/#schema":"/query-language/schema/","/query-language/#schema-types":"/query-language/schema/#schema-types","/query-language/#scalar-types":"/query-language/schema/#scalar-types","/query-language/#uid-type":"/query-language/schema/#uid-type","/query-language/#adding-or-modifying-schema":"/query-language/schema/#adding-or-modifying-schema","/query-language/#indexes-in-background":"/query-language/schema/#indexes-in-background","/query-language/#http-api":"/query-language/schema/#http-api","/query-language/#grpc-api":"/query-language/schema/#grpc-api","/query-language/#predicate-name-rules":"/query-language/schema/#predicate-name-rules","/query-language/#allowed-special-characters":"/query-language/schema/#allowed-special-characters","/query-language/#forbidden-special-characters":"/query-language/schema/#forbidden-special-characters","/query-language/#predicates-i18n":"/query-language/schema/#predicates-i18n","/query-language/#upsert-directive":"/query-language/schema/#upsert-directive","/query-language/#noconflict-directive":"/query-language/schema/#noconflict-directive","/query-language/#rdf-types":"/query-language/schema/#rdf-types","/query-language/#extended-types":"/query-language/schema/#extended-types","/query-language/#password-type":"/query-language/schema/#password-type","/query-language/#indexing":"/query-language/schema/#indexing","/query-language/#string-indices":"/query-language/schema/#string-indices","/query-language/#datetime-indices":"/query-language/schema/#datetime-indices","/query-language/#sortable-indices":"/query-language/schema/#sortable-indices","/query-language/#count-index":"/query-language/schema/#count-index","/query-language/#list-type":"/query-language/schema/#list-type","/query-language/#filtering-on-list":"/query-language/schema/#filtering-on-list","/query-language/#reverse-edges":"/query-language/schema/#reverse-edges","/query-language/#querying-schema":"/query-language/schema/#querying-schema","/query-language/#type-system":"/query-language/type-system/","/query-language/#type-definition":"/query-language/schema/#type-definition","/query-language/#setting-the-type-of-a-node":"/query-language/schema/#setting-the-type-of-a-node","/query-language/#using-types-during-queries":"/query-language/schema/#using-types-during-queries","/query-language/#deleting-a-type":"/query-language/schema/#deleting-a-type","/query-language/#expand-queries-and-types":"/query-language/schema/#expand-queries-and-types","/query-language/#facets-edge-attributes":"/query-language/facets/","/query-language/#facets-on-scalar-predicates":"/query-language/facets/#facets-on-scalar-predicates","/query-language/#facets-i18n":"/query-language/facets/#facets-i18n","/query-language/#alias-with-facets":"/query-language/facets/#alias-with-facets","/query-language/#facets-on-uid-predicates":"/query-language/facets/#facets-on-uid-predicates","/query-language/#filtering-on-facets":"/query-language/facets/#filtering-on-facets","/query-language/#sorting-using-facets":"/query-language/facets/#sorting-using-facets","/query-language/#assigning-facet-values-to-a-variable":"/query-language/facets/#assigning-facet-values-to-a-variable","/query-language/#facets-and-variable-propagation":"/query-language/facets/#facets-and-variable-propagation","/query-language/#facets-and-aggregation":"/query-language/facets/#facets-and-aggregation","/query-language/#k-shortest-path-queries":"/query-language/k-shortest-path-queries/","/query-language/#recurse-query":"/query-language/recurse-query/","/query-language/#fragments":"/query-language/fragments/","/query-language/#graphql-variables":"/query-language/graphql-variables/","/query-language/#indexing-with-custom-tokenizers":"/query-language/indexing-custom-tokenizers/","/query-language/#caveats":"/query-language/indexing-custom-tokenizers/#caveats","/query-language/#implementing-a-plugin":"/query-language/indexing-custom-tokenizers/#implementing-a-plugin","/query-language/#building-the-plugin":"/query-language/indexing-custom-tokenizers/#building-the-plugin","/query-language/#running-dgraph-with-plugins":"/query-language/indexing-custom-tokenizers/#running-dgraph-with-plugins","/query-language/#adding-the-index-to-the-schema":"/query-language/indexing-custom-tokenizers/#adding-the-index-to-the-schema","/query-language/#using-the-index-in-queries":"/query-language/indexing-custom-tokenizers/#using-the-index-in-queries","/query-language/#examples":"/query-language/indexing-custom-tokenizers/#examples","/query-language/#unicode-characters":"/query-language/indexing-custom-tokenizers/#unicode-characters","/query-language/#cidr-range":"/query-language/indexing-custom-tokenizers/#cidr-range","/query-language/#anagram":"/query-language/indexing-custom-tokenizers/#anagram","/query-language/#integer-prime-factors":"/query-language/indexing-custom-tokenizers/#integer-prime-factors","/design-concepts/#can-we-do-pre-writes-only-on-leaders":"/design-concepts/transactions-faq/","/design-concepts/#edges":"/design-concepts/concepts/#edges","/design-concepts/#posting-list":"/design-concepts/concepts/#posting-list","/design-concepts/#badger":"/design-concepts/concepts/#badger","/design-concepts/#group":"/design-concepts/concepts/#group","/design-concepts/#replication-and-server-failure":"/design-concepts/concepts/#replication-and-server-failure","/design-concepts/#new-server-and-discovery":"/design-concepts/concepts/#new-server-and-discovery","/design-concepts/#write-ahead-logs":"/design-concepts/concepts/#write-ahead-logs","/design-concepts/#mutations":"/design-concepts/concepts/#mutations","/design-concepts/#queries":"/design-concepts/concepts/#queries","/design-concepts/#network-calls":"/design-concepts/concepts/#network-calls","/design-concepts/#worker":"/design-concepts/concepts/#worker","/design-concepts/#worker-pool":"/design-concepts/concepts/#worker-pool","/design-concepts/#protocol-buffers":"/design-concepts/concepts/#protocol-buffers","/design-concepts/#sql-nosql":"/design-concepts/minimizing-network-calls/#sql-nosql","/design-concepts/#dgraph":"/design-concepts/minimizing-network-calls/#dgraph","/design-concepts/#term":"/design-concepts/raft/#dgraph","/design-concepts/#server-states":"/design-concepts/raft/#server-states","/design-concepts/#communication":"/design-concepts/raft/#communication","/design-concepts/#log-entries":"/design-concepts/raft/#log-entries","/design-concepts/#voting":"/design-concepts/raft/#voting","/design-concepts/#cluster-membership":"/design-concepts/raft/#cluster-membership","/design-concepts/#log-compaction":"/design-concepts/raft/#log-compaction","/design-concepts/#clients":"/design-concepts/raft/#clients","/design-concepts/#linearizable-semantics":"/design-concepts/raft/#linearizable-semantics","/design-concepts/#read-only-queries":"/design-concepts/raft/#read-only-queries","/mutations/#deletion-of-non-list-predicates":"/mutations/delete/#deletion-of-non-list-predicates","/mutations/#setting-literal-values":"/mutations/json-mutation-format/#setting-literal-values","/mutations/#language-support":"/mutations/json-mutation-format/#language-support","/mutations/#geolocation-support":"/mutations/json-mutation-format/#geolocation-support","/mutations/#referencing-existing-nodes":"/mutations/json-mutation-format/#referencing-existing-nodes","/mutations/#edges-between-nodes":"/mutations/json-mutation-format/#edges-between-nodes","/mutations/#deleting-literal-values":"/mutations/json-mutation-format/#deleting-literal-values","/mutations/#deleting-edges":"/mutations/json-mutation-format/#deleting-edges","/mutations/#facets":"/mutations/json-mutation-format/#facets","/mutations/#deleting-facets":"/mutations/json-mutation-format/#deleting-facets","/mutations/#creating-a-list-with-json-and-interacting-with":"/mutations/json-mutation-format/#creating-a-list-with-json-and-interacting-with","/mutations/#facets-in-list-type-with-json":"/mutations/json-mutation-format/#facets-in-list-type-with-json","/mutations/#specifying-multiple-operations":"/mutations/json-mutation-format/#specifying-multiple-operations","/mutations/#json-syntax-using-raw-http-or-ratel-ui":"/mutations/json-mutation-format/#json-syntax-using-raw-http-or-ratel-ui","/mutations/#using-json-operations-via-curl":"/mutations/json-mutation-format/#using-json-operations-via-curl","/mutations/#uid-function":"/mutations/upsert-block/#uid-function","/mutations/#val-function":"/mutations/upsert-block/#val-function","/mutations/#example-of-uid-function":"/mutations/upsert-block/#example-of-uid-function","/mutations/#example-of-val-function":"/mutations/upsert-block/#example-of-val-function","/mutations/#bulk-delete-example":"/mutations/upsert-block/#bulk-delete-example","/mutations/#example-of-conditional-upsert":"/mutations/conditional-upsert/#example-of-conditional-upsert","/mutations/#example-of-multiple-mutation-blocks":"/mutations/conditional-upsert/#example-of-multiple-mutation-blocks","/enterprise-features/#configure-backup":"/enterprise-features/binary-backups/#configure-backup","/enterprise-features/#configure-amazon-s3-credentials":"/enterprise-features/binary-backups/#configure-amazon-s3-credentials","/enterprise-features/#configure-minio-credentials":"/enterprise-features/binary-backups/#configure-minio-credentials","/enterprise-features/#create-a-backup":"/enterprise-features/binary-backups/#create-a-backup","/enterprise-features/#backup-to-amazon-s3":"/enterprise-features/binary-backups/#backup-to-amazon-s3","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-google-cloud-storage-via-minio-gateway":"/enterprise-features/binary-backups/#backup-to-google-cloud-storage-via-minio-gateway","/enterprise-features/#test-using-minio-browser":"/enterprise-features/binary-backups/#test-using-minio-browser","/enterprise-features/#test-using-minio-client":"/enterprise-features/binary-backups/#test-using-minio-client","/enterprise-features/#disabling-https-for-s3-and-minio-backups":"/enterprise-features/binary-backups/#disabling-https-for-s3-and-minio-backups","/enterprise-features/#overriding-credentials":"/enterprise-features/binary-backups/#overriding-credentials","/enterprise-features/#backup-to-nfs":"/enterprise-features/binary-backups/#backup-to-nfs","/enterprise-features/#forcing-a-full-backup":"/enterprise-features/binary-backups/#forcing-a-full-backup","/enterprise-features/#encrypted-backups":"/enterprise-features/binary-backups/#encrypted-backups","/enterprise-features/#new-flag-“encrypted”-in-manifest.json":"/enterprise-features/binary-backups/#new-flag-“encrypted”-in-manifest.json","/enterprise-features/#aes-and-chaining-with-gzip":"/enterprise-features/binary-backups/#aes-and-chaining-with-gzip","/enterprise-features/#backup":"/enterprise-features/binary-backups/#backup","/enterprise-features/#restore-from-backup":"/enterprise-features/binary-backups/#restore-from-backup","/enterprise-features/#restore-from-amazon-s3":"/enterprise-features/binary-backups/#restore-from-amazon-s3","/enterprise-features/#restore-from-minio":"/enterprise-features/binary-backups/#restore-from-minio","/enterprise-features/#restore-from-local-directory-or-nfs":"/enterprise-features/binary-backups/#restore-from-local-directory-or-nfs","/enterprise-features/#restore-and-update-timestamp":"/enterprise-features/binary-backups/#restore-and-update-timestamp","/enterprise-features/#turn-on-acls":"/enterprise-features/access-control-lists/#turn-on-acls","/enterprise-features/#set-up-acl-rules":"/enterprise-features/access-control-lists/#set-up-acl-rules","/enterprise-features/#using-graphql-admin-api":"/enterprise-features/access-control-lists/#using-graphql-admin-api","/enterprise-features/#retrieve-users-and-groups-information":"/enterprise-features/access-control-lists/#retrieve-users-and-groups-information","/enterprise-features/#using-a-graphql-tool":"/enterprise-features/access-control-lists/#using-a-graphql-tool","/enterprise-features/#access-data-using-a-client":"/enterprise-features/access-control-lists/#access-data-using-a-client","/enterprise-features/#access-data-using-the-graphql-api":"/enterprise-features/access-control-lists/#access-data-using-the-graphql-api","/enterprise-features/#reset-groot-password":"/enterprise-features/access-control-lists/#reset-groot-password","/enterprise-features/#set-up-encryption":"/enterprise-features/encryption-at-rest/#set-up-encryption","/enterprise-features/#turn-on-encryption":"/enterprise-features/encryption-at-rest/#turn-on-encryption","/enterprise-features/#turn-off-encryption":"/enterprise-features/encryption-at-rest/#turn-off-encryption","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/howto/#metrics-information":"/howto/retrieving-debug-information/#metrics-information","/howto/#profiling-information":"/howto/retrieving-debug-information/#profiling-information","/howto/#cpu-profile":"/howto/retrieving-debug-information/#cpu-profile","/howto/#memory-profile":"/howto/retrieving-debug-information/#memory-profile","/howto/#block-profile":"/howto/retrieving-debug-information/#block-profile","/howto/#goroutine-stack":"/howto/retrieving-debug-information/#goroutine-stack","/howto/#example-usage":"/howto/using-debug-tool/#example-usage","/howto/#debug-tool-output":"/howto/using-debug-tool/#debug-tool-output","/howto/#key-lookup":"/howto/using-debug-tool/#key-lookup","/howto/#key-history":"/howto/using-debug-tool/#key-history","/howto/#basic-integration":"/howto/dgraph-sentry-integration/#basic-integration","/howto/#data-handling":"/howto/dgraph-sentry-integration/#data-handling","/howto/#increment-tool-output":"/howto/using-increment-tool/#increment-tool-output","/howto/#download-zip":"/howto/load-balancing-nginx/#download-zip","/howto/#start-dgraph-cluster":"/howto/load-balancing-nginx/#start-dgraph-cluster","/howto/#use-the-increment-tool-to-start-a-grpc-lb":"/howto/load-balancing-nginx/#use-the-increment-tool-to-start-a-grpc-lb","/howto/#check-logs":"/howto/load-balancing-nginx/#check-logs","/howto/#upsert-procedure":"/howto/upserts/#upsert-procedure","/howto/#upsert-block":"/howto/upserts/#upsert-block","/howto/#conflicts":"/howto/upserts/#conflicts","/howto/#schema-types-scalar-uid-and-list-uid":"/howto/migrate-dgraph-1-1/#schema-types-scalar-uid-and-list-uid","/howto/#type-system":"/howto/migrate-dgraph-1-1/#type-system","/howto/#live-loader-and-bulk-loader-command-line-flags":"/howto/migrate-dgraph-1-1/#live-loader-and-bulk-loader-command-line-flags","/howto/#http-api":"/howto/migrate-dgraph-1-1/#http-api"},urlSplit,origPath,redirectPaths=["clients","query-language","mutations","deploy","enterprise-features","howto","design-concepts"],pathSplit=document.URL.split("/");redirectPaths.includes(pathSplit[pathSplit.length-2])&&(urlSplit=pathSplit[pathSplit.length-1].split("#"),origPath="/"+pathSplit[pathSplit.length-2]+"/#"+urlSplit[1],origPath in subPaths?(loc=""+subPaths[origPath],window.location.replace(loc)):urlSplit[1]&&(loc=""+pathSplit.slice(4,pathSplit.length-1).join("/")+"/#"+urlSplit[1],window.location.replace(loc)))</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta name=generator content="Hugo 0.112.1"><meta name=description content><link rel=canonical href=/enterprise-features/binary-backups/><link rel=apple-touch-icon sizes=57x57 href=/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/images/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/images/favicons/manifest.json><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script>
<script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin=anonymous></script>
<link href=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css rel=stylesheet integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin=anonymous><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin=anonymous></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin=anonymous></script><title>Binary Backups - Enterprise features</title><link href=/css/theme.css?6a79ff0832398fa8541cbaef6b6dd556 rel=stylesheet><link href=/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script>
<script src=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script>
<link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><link rel=stylesheet href=//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><script>!function(){var t,n,e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(t=0;t<e.methods.length;t++)n=e.methods[t],e[n]=e.factory(n);e.load=function(t,n){var o,s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(s,o),e._loadOptions=n},e._writeKey="aQlf725vSBKhpQnINiGBc6rCtFyVCiAP",e.SNIPPET_VERSION="4.13.2",e.load("aQlf725vSBKhpQnINiGBc6rCtFyVCiAP"),e.page(),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll("a");t.forEach(t=>e.trackLink(t,"Click",{id:t.id,to:t.href,text:t.innerText}))})}}()</script></head><body><nav id=header><div class=header-left><div><a href=https://libremfg.com/features-gql class=brand><img src=/images/libre-logo.png alt=libre class=logo></a><div class=logo-tagline><span>Baas Documentation</span></div></div></div><div class=header-right><div style=margin-top:10px><div class="menu-search align-middle"><div class=menu-search-inner><input type=search class="form-control form-control-sm" id=algolia-doc-search placeholder="Search documentation" aria-label="Search docs" autocomplete=off></div></div></div><div><ul class=menu><li><a href=https://libremfg.com/features-gql target=_blank>Home</a></li><li><a href=https://www.libremfg.com/pricing-gql/ target=_blank>Pricing</a></li><li><a href=https://discord.gg/vtJ7JE4sha target=_blank>Community</a></li><li><a href=https://github.com/libremfg/libremfg.github.io target=_blank>GitHub</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><div class=menu-header></div><ul class=topics><li class="topic main-topic children"><a id=datahub href=#>DataHub</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/datahub/overview/>Overview</a></li><li class="topic sub-topic"><a href=/datahub/isa-95-data-model/>ISA 95 Data Model</a></li><li class="topic sub-topic"><a href=/datahub/streaming-data/>Streaming Data</a></li></ul></li><li class="topic main-topic"><a href=/>Home</a></li><li class="topic main-topic"><a href=/dgraph-overview/>Dgraph Overview</a></li><li class="topic main-topic children"><a id=bpmn href=#>BPMN</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Events</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/bpmn/events/overview/>Events Overview</a></li><li class="topic sub-topic"><a href=/bpmn/events/message/>Message Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/timer/>Timer Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/signal/>Signal Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/escalation/>Escalation Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/error/>Error Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/conditional/>Conditional Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/compensation/>Compensation Event</a></li></ul></li><li class="topic sub-topic"><a href=#>Gateways</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/bpmn/gateways/overview/>Gateway Overview</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/parallel/>Parallel Gateway</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/inclusive/>Inclusive Gateway</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/complex/>Complex Gateway</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/event-based/>Event Based Gateway</a></li></ul></li><li class="topic sub-topic"><a href=#>Tasks</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/bpmn/tasks/overview/>Tasks Overview</a></li></ul></li></ul></li><li class="topic main-topic children"><a id=graphql href=#>GraphQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/quick-start/>Quick Start</a></li><li class="topic sub-topic"><a href=/graphql/how-dgraph-graphql-works/>How GraphQL works in Dgraph</a></li><li class="topic sub-topic"><a href=#>To-Do List App Tutorial</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-schema-design/>Schema Design</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-ui/>Creating a Basic UI</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth-rules/>Authorization Rules</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth0-jwt/>Using Auth0</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-firebase-jwt/>Using Firebase Authentication</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/deploy/>Deploying on Dgraph Cloud</a></li></ul></li><li class="topic sub-topic"><a href=#>Authorization</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/authorization/authorization-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/authorization/directive/>The @auth Directive</a></li><li class="topic sub-topic"><a href=/graphql/authorization/mutations/>Mutations</a></li></ul></li><li class="topic sub-topic"><a href=#>API</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/api/api-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/api/requests/>Requests and Responses</a></li><li class="topic sub-topic"><a href=/graphql/api/variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/graphql/api/fragments/>GraphQL Fragments</a></li><li class="topic sub-topic"><a href=/graphql/api/multiples/>Multiple GraphQL Operations in a Request</a></li><li class="topic sub-topic"><a href=/graphql/api/errors/>GraphQL Errors</a></li></ul></li><li class="topic sub-topic"><a href=#>Schema</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/schema/schema-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/schema/reserved/>Reserved Names</a></li><li class="topic sub-topic"><a href=/graphql/schema/migration/>Schema Migration</a></li><li class="topic sub-topic"><a href=/graphql/schema/types/>Types</a></li><li class="topic sub-topic"><a href=/graphql/schema/ids/>IDs</a></li><li class="topic sub-topic"><a href=/graphql/schema/graph-links/>Links in the Graph</a></li><li class="topic sub-topic"><a href=/graphql/schema/search/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/schema/documentation/>Documentation and Comments</a></li><li class="topic sub-topic"><a href=/graphql/schema/deprecated/>Deprecation</a></li><li class="topic sub-topic"><a href=/graphql/schema/dgraph-schema/>Dgraph Schema Fragment</a></li><li class="topic sub-topic"><a href=/graphql/schema/default/>@default Directive</a></li></ul></li><li class="topic sub-topic"><a href=#>Queries</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/queries/queries-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/queries/search-filtering/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/queries/aggregate/>Aggregate Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/persistent-queries/>Persistent Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/and-or-not/>And, Or and Not</a></li><li class="topic sub-topic"><a href=/graphql/queries/cached-results/>Cached Results</a></li><li class="topic sub-topic"><a href=/graphql/queries/order-page/>Order and Pagination</a></li><li class="topic sub-topic"><a href=/graphql/queries/cascade/>@cascade Directive</a></li><li class="topic sub-topic"><a href=/graphql/queries/skip-include/>@skip and @include Directives</a></li></ul></li><li class="topic sub-topic"><a href=#>Mutations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/mutations/mutations-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/mutations/add/>Add</a></li><li class="topic sub-topic"><a href=/graphql/mutations/upsert/>Upsert</a></li><li class="topic sub-topic"><a href=/graphql/mutations/update/>Update</a></li><li class="topic sub-topic"><a href=/graphql/mutations/delete/>Delete</a></li><li class="topic sub-topic"><a href=/graphql/mutations/deep/>Deep</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/subscriptions/>Subscriptions</a></li><li class="topic sub-topic"><a href=#>Custom Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/custom/custom-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/custom/directive/>The @custom Directive</a></li><li class="topic sub-topic"><a href=/graphql/custom/query/>Custom Queries</a></li><li class="topic sub-topic"><a href=/graphql/custom/mutation/>Custom Mutations</a></li><li class="topic sub-topic"><a href=/graphql/custom/field/>Custom Fields</a></li><li class="topic sub-topic"><a href=/graphql/custom/dql/>Custom DQL</a></li></ul></li><li class="topic sub-topic"><a href=#>Lambda Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/lambda/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/lambda/field/>Lambda Fields</a></li><li class="topic sub-topic"><a href=/graphql/lambda/query/>Lambda Queries</a></li><li class="topic sub-topic"><a href=/graphql/lambda/mutation/>Lambda Mutations</a></li><li class="topic sub-topic"><a href=/graphql/lambda/webhook/>Lambda Webhooks</a></li><li class="topic sub-topic"><a href=/graphql/lambda/server/>Lambda Server</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/directives/>Directives</a></li><li class="topic sub-topic"><a href=/graphql/admin/>Administrative API</a></li><li class="topic sub-topic"><a href=/graphql/dgraph/>GraphQL on Existing Dgraph</a></li><li class="topic sub-topic"><a href=/graphql/federation/>Apollo Federation</a></li></ul></li><li class="topic main-topic children"><a id=deploy-and-manage href=#>Deploy and Manage</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/overview/>Deployment and Management Overview</a></li><li class="topic sub-topic"><a href=/deploy/download/>Download Dgraph</a></li><li class="topic sub-topic"><a href=/deploy/config/>Configuration</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-zero/>More about Dgraph Zero</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-alpha/>More about Dgraph Alpha</a></li><li class="topic sub-topic"><a href=/deploy/single-host-setup/>Single Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/multi-host-setup/>Multi-Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/kubernetes/>Using Kubernetes</a></li><li class="topic sub-topic"><a href=/deploy/cluster-setup/>Cluster Setup</a></li><li class="topic sub-topic"><a href=/deploy/cluster-checklist/>Cluster Checklist</a></li><li class="topic sub-topic"><a href=/deploy/production-checklist/>Production Checklist</a></li><li class="topic sub-topic"><a href=#>Administration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/dgraph-administration/>Dgraph Administration</a></li><li class="topic sub-topic"><a href=/deploy/log-format/>Logging</a></li><li class="topic sub-topic"><a href=/deploy/ludicrous-mode/>Ludicrous Mode</a></li><li class="topic sub-topic"><a href=/deploy/monitoring/>Monitoring</a></li><li class="topic sub-topic"><a href=/deploy/metrics/>Metrics</a></li><li class="topic sub-topic"><a href=/deploy/tracing/>Tracing</a></li><li class="topic sub-topic"><a href=/deploy/data-compression/>Data compression on Disk</a></li></ul></li><li class="topic sub-topic"><a href=#>Fast Data Loading</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/fast-data-loading/overview/>Overview</a></li><li class="topic sub-topic"><a href=/deploy/fast-data-loading/bulk-loader/>Bulk Loader</a></li><li class="topic sub-topic"><a href=/deploy/fast-data-loading/live-loader/>Live Loader</a></li></ul></li><li class="topic sub-topic"><a href=#>Security</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/ports-usage/>Ports Usage</a></li><li class="topic sub-topic"><a href=/deploy/tls-configuration/>TLS Configuration</a></li></ul></li><li class="topic sub-topic"><a href=/deploy/decrypt/>Data Decryption</a></li><li class="topic sub-topic"><a href=/deploy/cli-command-reference/>Dgraph CLI Reference</a></li><li class="topic sub-topic"><a href=/deploy/troubleshooting/>Troubleshooting</a></li></ul></li><li class="topic main-topic children active"><a id=enterprise-features href=#>Enterprise Features</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/enterprise-features/audit-logs/>Audit Logging</a></li><li class="topic sub-topic"><a href=/enterprise-features/lsbackup/>Backup List Tool</a></li><li class="topic sub-topic active"><a href=/enterprise-features/binary-backups/>Binary Backups</a></li><li class="topic sub-topic"><a href=/enterprise-features/encryption-at-rest/>Encryption at Rest</a></li><li class="topic sub-topic"><a href=/enterprise-features/learner-nodes/>Learner Nodes</a></li><li class="topic sub-topic"><a href=/enterprise-features/license/>License</a></li></ul></li><li class="topic main-topic children"><a id=migration href=#>Migration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/migration/loading-csv-data/>Loading CSV Data</a></li><li class="topic sub-topic"><a href=/migration/migrate-tool/>Migration Tool</a></li><li class="topic sub-topic"><a href=/migration/migrate-dgraph-1-1/>Migrate from Dgraph v1.0</a></li><li class="topic sub-topic"><a href=/migration/dgraph-compared-to-other-databases/>Dgraph Compared to Other Databases</a></li></ul></li><li class="topic main-topic"><a href=/faq/>FAQ</a></li><li class="topic main-topic children"><a id=how-to-guides href=#>How To Guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/howto/retrieving-debug-information/>Retrieving Debug Information</a></li><li class="topic sub-topic"><a href=/howto/completion/>Shell Completion</a></li><li class="topic sub-topic"><a href=/howto/using-debug-tool/>Using the Debug Tool</a></li><li class="topic sub-topic"><a href=/howto/dgraph-sentry-integration/>Using the Dgraph Sentry Integration</a></li><li class="topic sub-topic"><a href=/howto/using-increment-tool/>Using the Increment Tool</a></li><li class="topic sub-topic"><a href=/howto/giving-nodes-type/>Giving Nodes a Type</a></li><li class="topic sub-topic"><a href=/howto/login-system/>A Simple Login System</a></li><li class="topic sub-topic"><a href=/howto/load-balancing-nginx/>Load Balancing Queries with NGINX</a></li><li class="topic sub-topic"><a href=/howto/upserts/>Upserts</a></li><li class="topic sub-topic"><a href=/howto/jepsen-tests/>Run Jepsen Tests</a></li><li class="topic sub-topic"><a href=/howto/lambda-webhooks-example/>Lambda Webhooks Example</a></li></ul></li><li class="topic main-topic children"><a id=design-concepts href=#>Design Concepts</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/design-concepts/transactions-faq/>Transactions: FAQ</a></li><li class="topic sub-topic"><a href=/design-concepts/consistency-model/>Consistency Model</a></li><li class="topic sub-topic"><a href=/design-concepts/concepts/>Concepts</a></li><li class="topic sub-topic"><a href=/design-concepts/minimizing-network-calls/>How Dgraph Minimizes Network Calls</a></li><li class="topic sub-topic"><a href=/design-concepts/raft/>RAFT</a></li></ul></li><li class="topic main-topic"><a href=/releases/>Releases</a></li><li class="topic main-topic children"><a id=dql href=#>dql</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/get-started/>Get Started</a></li><li class="topic sub-topic"><a href=/tutorials/>Tutorials</a></li><li class="topic sub-topic"><a href=#>Query Language Reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/query-language/graphql-fundamentals/>DQL Fundamentals</a></li><li class="topic sub-topic"><a href=/query-language/functions/>Functions</a></li><li class="topic sub-topic"><a href=/query-language/connecting-filters/>Connecting Filters</a></li><li class="topic sub-topic"><a href=/query-language/alias/>Aliases</a></li><li class="topic sub-topic"><a href=/query-language/pagination/>Pagination in DQL</a></li><li class="topic sub-topic"><a href=/query-language/count/>Count</a></li><li class="topic sub-topic"><a href=/query-language/sorting/>Sorting</a></li><li class="topic sub-topic"><a href=/query-language/multiple-query-blocks/>Multiple Query Blocks</a></li><li class="topic sub-topic"><a href=/query-language/query-variables/>Query Variables</a></li><li class="topic sub-topic"><a href=/query-language/value-variables/>Value Variables</a></li><li class="topic sub-topic"><a href=/query-language/aggregation/>Aggregation</a></li><li class="topic sub-topic"><a href=/query-language/math-on-value-variables/>Math on Value Variables</a></li><li class="topic sub-topic"><a href=/query-language/groupby/>GroupBy</a></li><li class="topic sub-topic"><a href=/query-language/expand-predicates/>Expand Predicates</a></li><li class="topic sub-topic"><a href=/query-language/cascade-directive/>Cascade Directive</a></li><li class="topic sub-topic"><a href=/query-language/normalize-directive/>@normalize Directive</a></li><li class="topic sub-topic"><a href=/query-language/ignorereflex-directive/>@ignorereflex Directive</a></li><li class="topic sub-topic"><a href=/query-language/debug/>Debug</a></li><li class="topic sub-topic"><a href=/query-language/schema/>Schemas in DQL</a></li><li class="topic sub-topic"><a href=/query-language/type-system/>Type System</a></li><li class="topic sub-topic"><a href=/query-language/facets/>Facets and Edge Attributes</a></li><li class="topic sub-topic"><a href=/query-language/kshortest-path-quries/>Shortest Path Queries</a></li><li class="topic sub-topic"><a href=/query-language/recurse-query/>Recurse Query</a></li><li class="topic sub-topic"><a href=/query-language/fragments/>Fragments</a></li><li class="topic sub-topic"><a href=/query-language/graphql-variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/query-language/indexing-custom-tokenizers/>Indexing with Custom Tokenizers</a></li></ul></li><li class="topic sub-topic"><a href=/tips/>Tips and Tricks</a></li><li class="topic sub-topic"><a href=#>Mutations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/mutations/triples/>Triples</a></li><li class="topic sub-topic"><a href=/mutations/blank-nodes/>Blank Nodes and UIDs</a></li><li class="topic sub-topic"><a href=/mutations/external-ids/>External IDs</a></li><li class="topic sub-topic"><a href=/mutations/external-ids-upsert-block/>External IDs and Upsert Block</a></li><li class="topic sub-topic"><a href=/mutations/language-rdf-types/>Language and RDF Types</a></li><li class="topic sub-topic"><a href=/mutations/batch-mutations/>Batch Mutations</a></li><li class="topic sub-topic"><a href=/mutations/delete/>Delete</a></li><li class="topic sub-topic"><a href=/mutations/facets-in-list-type-with-rdf/>Facet Lists in RDF</a></li><li class="topic sub-topic"><a href=/mutations/mutations-using-curl/>Mutations Using cURL</a></li><li class="topic sub-topic"><a href=/mutations/json-mutation-format/>JSON Mutation Format</a></li><li class="topic sub-topic"><a href=/mutations/upsert-block/>Upsert Blocks</a></li><li class="topic sub-topic"><a href=/mutations/conditional-upsert/>Conditional Upsert</a></li><li class="topic sub-topic"><a href=/mutations/reverse-edges/>Reverse Edges</a></li></ul></li></ul></li></ul><ul class=sidebar-menu><li><a href=https://dgraph.io/ target=_blank>Home</a></li><li><a href=https://discuss.dgraph.io/ target=_blank>Community</a></li><li><a href=https://github.com/dgraph-io/dgraph target=_blank>GitHub</a></li></ul></aside><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#configure-backup>Configure Backup</a><ul><li><a href=#configure-amazon-s3-credentials>Configure Amazon S3 Credentials</a></li><li><a href=#configure-minio-credentials>Configure Minio Credentials</a></li></ul></li><li><a href=#create-a-backup>Create a Backup</a><ul><li><a href=#backup-to-amazon-s3>Backup to Amazon S3</a></li><li><a href=#backup-to-minio>Backup to Minio</a></li><li><a href=#backup-using-a-minio-gateway>Backup using a MinIO Gateway</a><ul><li><a href=#azure-blob-storage>Azure Blob Storage</a></li><li><a href=#google-cloud-storage>Google Cloud Storage</a></li><li><a href=#test-using-minio-browser>Test Using MinIO Browser</a></li></ul></li><li><a href=#disabling-https-for-s3-and-minio-backups>Disabling HTTPS for S3 and Minio backups</a></li><li><a href=#overriding-credentials>Overriding Credentials</a></li><li><a href=#backup-to-nfs>Backup to NFS</a></li><li><a href=#forcing-a-full-backup>Forcing a Full Backup</a></li></ul></li><li><a href=#listing-backups>Listing Backups</a><ul><li><a href=#automating-backups>Automating Backups</a></li></ul></li><li><a href=#export-backups>Export Backups</a><ul><li><a href=#using-exports-instead-of-binary-backups>Using exports instead of binary backups</a></li><li><a href=#binary-backups-and-exports-folders>Binary Backups and Exports folders</a></li><li><a href=#benefits>Benefits</a></li><li><a href=#how-to-use-it>How to use it</a></li></ul></li><li><a href=#encrypted-backups>Encrypted Backups</a><ul><li><a href=#new-encrypted-flag-in-manifestjson>New <code>Encrypted</code> flag in manifest.json</a></li><li><a href=#aes-and-chaining-with-gzip>AES And Chaining with Gzip</a></li><li><a href=#backup>Backup</a></li></ul></li><li><a href=#online-restore>Online restore</a></li><li><a href=#incremental-restore>Incremental Restore</a></li><li><a href=#offline-restore>Offline restore</a><ul><li><a href=#restore-from-amazon-s3>Restore from Amazon S3</a></li><li><a href=#restore-from-minio>Restore from MinIO</a></li><li><a href=#restore-from-local-directory-or-nfs>Restore from Local Directory or NFS</a></li><li><a href=#restore-and-update-timestamp>Restore and Update Timestamp</a></li></ul></li></ul></nav></div><article><a class=question-btn target=_blank href=https://discord.com/invite/vtJ7JE4sha><i class="fa fa-question-circle"></i> Ask a Question</a><h1 class=post-title>Binary Backups</h1><div><div class="notices note"><span class=type>Note</span> This feature was introduced in <a href=https://github.com/dgraph-io/dgraph/releases/tag/v1.1.0>v1.1.0</a>.</div><p>Binary backups are full backups of Dgraph that are backed up directly to cloud
storage such as Amazon S3 or any Minio storage backend. Backups can also be
saved to an on-premise network file system shared by all Alpha servers. These
backups can be used to restore a new Dgraph cluster to the previous state from
the backup. Unlike <a href=/deploy/dgraph-administration/#exporting-database>exports</a>,
binary backups are Dgraph-specific and can be used to restore a cluster quickly.</p><h2 id=configure-backup>Configure Backup</h2><p>Backup is only enabled when a valid license file is supplied to a Zero server OR within the thirty
(30) day trial period, no exceptions.</p><h3 id=configure-amazon-s3-credentials>Configure Amazon S3 Credentials</h3><p>To backup to Amazon S3, the Alpha server must have the following AWS credentials set
via environment variables:</p><table><thead><tr><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>AWS_ACCESS_KEY_ID</code> or <code>AWS_ACCESS_KEY</code></td><td>AWS access key with permissions to write to the destination bucket.</td></tr><tr><td><code>AWS_SECRET_ACCESS_KEY</code> or <code>AWS_SECRET_KEY</code></td><td>AWS access key with permissions to write to the destination bucket.</td></tr><tr><td><code>AWS_SESSION_TOKEN</code></td><td>AWS session token (if required).</td></tr></tbody></table><p>Starting with <a href=https://github.com/dgraph-io/dgraph/releases/tag/v20.07.0>v20.07.0</a> if the system has access to the S3 bucket, you no longer need to explicitly include these environment variables.</p><p>In AWS, you can accomplish this by doing the following:</p><ol><li>Create an <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html>IAM Role</a> with an IAM Policy that grants access to the S3 bucket.</li><li>Depending on whether you want to grant access to an EC2 instance, or to a pod running on <a href=https://aws.amazon.com/eks/>EKS</a>, you can do one of these options:<ul><li><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html>Instance Profile</a> can pass the IAM Role to an EC2 Instance</li><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html>IAM Roles for Amazon EC2</a> to attach the IAM Role to a running EC2 Instance</li><li><a href=https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html>IAM roles for service accounts</a> to associate the IAM Role to a <a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/>Kubernetes Service Account</a>.</li></ul></li></ol><h3 id=configure-minio-credentials>Configure Minio Credentials</h3><p>To backup to Minio, the Alpha server must have the following Minio credentials set via
environment variables:</p><table><thead><tr><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>MINIO_ACCESS_KEY</code></td><td>Minio access key with permissions to write to the destination bucket.</td></tr><tr><td><code>MINIO_SECRET_KEY</code></td><td>Minio secret key with permissions to write to the destination bucket.</td></tr></tbody></table><h2 id=create-a-backup>Create a Backup</h2><p>To create a backup, make an HTTP POST request to <code>/admin</code> to a Dgraph
Alpha HTTP address and port (default, &ldquo;localhost:8080&rdquo;). Like with all <code>/admin</code>
endpoints, this is only accessible on the same machine as the Alpha server unless
<a href=/deploy/dgraph-administration/#whitelisting-admin-operations>whitelisted for admin operations</a>.
You can look at <code>BackupInput</code> given below for all the possible options.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>input</span> <span style=color:#2b91af>BackupInput</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Destination for the backup: e.g. Minio or S3 bucket.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		destination: <span style=color:#2b91af>String</span>!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Access key credential for the destination.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		accessKey: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Secret key credential for the destination.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>		
</span></span><span style=display:flex><span>		secretKey: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		AWS session token, if required.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		sessionToken: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Set to true to allow backing up to S3 or Minio bucket that requires no credentials.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		anonymous: <span style=color:#2b91af>Boolean</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Force a full backup instead of an incremental backup.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		forceFull: <span style=color:#2b91af>Boolean</span>
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><p>Execute the following mutation on /admin endpoint using any GraphQL compatible client like Insomnia, GraphQL Playground or GraphiQL.</p><h3 id=backup-to-amazon-s3>Backup to Amazon S3</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>backup</span>(<span style=color:#00f>input</span>: {<span style=color:#2b91af>destination</span>: <span style=color:#a31515>&#34;s3://s3.us-west-2.amazonaws.com/&lt;bucketname&gt;&#34;</span>}) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>response</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>message</span>
</span></span><span style=display:flex><span>      code
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    taskId
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=backup-to-minio>Backup to Minio</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>backup</span>(<span style=color:#00f>input</span>: {<span style=color:#2b91af>destination</span>: <span style=color:#a31515>&#34;minio://127.0.0.1:9000/&lt;bucketname&gt;&#34;</span>}) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>response</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>message</span>
</span></span><span style=display:flex><span>      code
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    taskId
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=backup-using-a-minio-gateway>Backup using a MinIO Gateway</h3><h4 id=azure-blob-storage>Azure Blob Storage</h4><p>You can use <a href=https://azure.microsoft.com/services/storage/blobs/>Azure Blob Storage</a> through the <a href=https://docs.min.io/docs/minio-gateway-for-azure.html>MinIO Azure Gateway</a>. You need to configure a <a href=https://docs.microsoft.com/azure/storage/common/storage-account-overview>storage account</a> and a<a href=https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction#containers>container</a> to organize the blobs.</p><p>For MinIO configuration, you will need to <a href=https://docs.microsoft.com/azure/storage/common/storage-account-keys-manage>retrieve storage accounts keys</a>. The <a href=https://docs.min.io/docs/minio-gateway-for-azure.html>MinIO Azure Gateway</a> will use <code>MINIO_ACCESS_KEY</code> and <code>MINIO_SECRET_KEY</code> to correspond to Azure Storage Account <code>AccountName</code> and <code>AccountKey</code>.</p><p>Once you have the <code>AccountName</code> and <code>AccountKey</code>, you can access Azure Blob Storage locally using one of these methods:</p><ul><li>Run <a href=https://docs.min.io/docs/minio-gateway-for-azure.html>MinIO Azure Gateway</a> using Docker<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --publish 9000:9000 --name gateway <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --env <span style=color:#a31515>&#34;MINIO_ACCESS_KEY=&lt;AccountName&gt;&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --env <span style=color:#a31515>&#34;MINIO_SECRET_KEY=&lt;AccountKey&gt;&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  minio/minio gateway azure
</span></span></code></pre></div></li><li>Run <a href=https://docs.min.io/docs/minio-gateway-for-azure.html>MinIO Azure Gateway</a> using the MinIO Binary<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export MINIO_ACCESS_KEY=<span style=color:#a31515>&#34;&lt;AccountName&gt;&#34;</span>
</span></span><span style=display:flex><span>export MINIO_SECRET_KEY=<span style=color:#a31515>&#34;&lt;AccountKey&gt;&#34;</span>
</span></span><span style=display:flex><span>minio gateway azure
</span></span></code></pre></div></li></ul><h4 id=google-cloud-storage>Google Cloud Storage</h4><p>You can use <a href=https://cloud.google.com/storage>Google Cloud Storage</a> through the <a href=https://docs.min.io/docs/minio-gateway-for-gcs.html>MinIO GCS Gateway</a>. You will need to <a href=https://cloud.google.com/storage/docs/creating-buckets>create storage buckets</a>, create a Service Account key for GCS and get a credentials file. See <a href=https://github.com/minio/minio/blob/master/docs/gateway/gcs.md#11-create-a-service-account-ey-for-gcs-and-get-the-credentials-file>Create a Service Account key</a> for further information.</p><p>Once you have a <code>credentials.json</code>, you can access GCS locally using one of these methods:</p><ul><li>Run <a href=https://docs.min.io/docs/minio-gateway-for-gcs.html>MinIO GCS Gateway</a> using Docker<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --publish 9000:9000 --name gateway <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --volume /path/to/credentials.json:/credentials.json <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --env <span style=color:#a31515>&#34;GOOGLE_APPLICATION_CREDENTIALS=/credentials.json&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --env <span style=color:#a31515>&#34;MINIO_ACCESS_KEY=minioaccountname&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  --env <span style=color:#a31515>&#34;MINIO_SECRET_KEY=minioaccountkey&#34;</span> <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>  minio/minio gateway gcs &lt;project-id&gt;
</span></span></code></pre></div></li><li>Run <a href=https://docs.min.io/docs/minio-gateway-for-gcs.html>MinIO GCS Gateway</a> using the MinIO Binary<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json
</span></span><span style=display:flex><span>export MINIO_ACCESS_KEY=minioaccesskey
</span></span><span style=display:flex><span>export MINIO_SECRET_KEY=miniosecretkey
</span></span><span style=display:flex><span>minio gateway gcs &lt;project-id&gt;
</span></span></code></pre></div></li></ul><h4 id=test-using-minio-browser>Test Using MinIO Browser</h4><p>MinIO Gateway comes with an embedded web-based object browser. After using one of the aforementioned methods to run the MinIO Gateway, you can test that MinIO Gateway is running, open a web browser, navigate to http://127.0.0.1:9000, and ensure that the object browser is displayed and can access the remote object storage.</p><h3 id=disabling-https-for-s3-and-minio-backups>Disabling HTTPS for S3 and Minio backups</h3><p>By default, Dgraph assumes the destination bucket is using HTTPS. If that is not
the case, the backup will fail. To send a backup to a bucket using HTTP
(insecure), set the query parameter <code>secure=false</code> with the destination
endpoint in the <code>destination</code> field:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>backup</span>(<span style=color:#00f>input</span>: {<span style=color:#2b91af>destination</span>: <span style=color:#a31515>&#34;minio://127.0.0.1:9000/&lt;bucketname&gt;?secure=false&#34;</span>}) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>response</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>message</span>
</span></span><span style=display:flex><span>      code
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    taskId
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=overriding-credentials>Overriding Credentials</h3><p>The <code>accessKey</code>, <code>secretKey</code>, and <code>sessionToken</code> parameters can be used to
override the default credentials. Please note that unless HTTPS is used, the
credentials will be transmitted in plain text so use these parameters with
discretion. The environment variables should be used by default but these
options are there to allow for greater flexibility.</p><p>The <code>anonymous</code> parameter can be set to &ldquo;true&rdquo; to allow backing up to S3 or
MinIO bucket that requires no credentials (i.e a public bucket).</p><h3 id=backup-to-nfs>Backup to NFS</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>backup</span>(<span style=color:#00f>input</span>: {<span style=color:#2b91af>destination</span>: <span style=color:#a31515>&#34;/path/to/local/directory&#34;</span>}) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>response</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>message</span>
</span></span><span style=display:flex><span>      code
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    taskId
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>A local filesystem will work only if all the Alpha servers have access to it (e.g all
the Alpha servers are running on the same filesystems as a normal process, not a Docker
container). However, an NFS is recommended so that backups work seamlessly across
multiple machines and/or containers.</p><h3 id=forcing-a-full-backup>Forcing a Full Backup</h3><p>By default, an incremental backup will be created if there&rsquo;s another full backup
in the specified location. To create a full backup, set the <code>forceFull</code> field
to <code>true</code> in the mutation. Each series of backups can be
identified by a unique ID and each backup in the series is assigned a monotonically increasing number. The following section contains more details on how to restore a backup series.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>backup</span>(<span style=color:#00f>input</span>: {<span style=color:#2b91af>destination</span>: <span style=color:#a31515>&#34;/path/to/local/directory&#34;</span>, <span style=color:#2b91af>forceFull</span>: <span style=color:#2b91af>true</span>}) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>response</span> {
</span></span><span style=display:flex><span>      message
</span></span><span style=display:flex><span>      code
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    taskId
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=listing-backups>Listing Backups</h2><p>The GraphQL admin interface includes the <code>listBackups</code> endpoint that lists the
backups in the given location along with the information included in the
<code>manifest.json</code> file. An example of a request to list the backups in the
<code>/data/backup</code> location is included below:</p><pre tabindex=0><code>query backup() {
	listBackups(input: {location: &#34;/data/backup&#34;}) {
		backupId
		backupNum
		encrypted
		groups {
			groupId
			predicates
		}
		path
		since
		type
	}
}
</code></pre><p>The listBackups input can contain the following fields. Only the <code>location</code>
field is required.</p><pre tabindex=0><code>input ListBackupsInput {
	&#34;&#34;&#34;
	Destination for the backup: e.g. Minio or S3 bucket.
	&#34;&#34;&#34;
	location: String!

	&#34;&#34;&#34;
	Access key credential for the destination.
	&#34;&#34;&#34;
	accessKey: String

	&#34;&#34;&#34;
	Secret key credential for the destination.
	&#34;&#34;&#34;
	secretKey: String

	&#34;&#34;&#34;
	AWS session token, if required.
	&#34;&#34;&#34;
	sessionToken: String

	&#34;&#34;&#34;
	Whether the destination doesn&#39;t require credentials (e.g. S3 public bucket).
	&#34;&#34;&#34;
	anonymous: Boolean
}
</code></pre><p>The output is of <code>[Manifest]</code> type. The fields inside the <code>Manifest</code> type corresponds to the fields in the <code>manifest.json</code> file.</p><pre tabindex=0><code>type Manifest {
	&#34;&#34;&#34;
	Unique ID for the backup series.
	&#34;&#34;&#34;
	backupId: String

	&#34;&#34;&#34;
	Number of this backup within the backup series. The full backup always has a value of one.
	&#34;&#34;&#34;
	backupNum: Int

	&#34;&#34;&#34;
	Whether this backup was encrypted.
	&#34;&#34;&#34;
	encrypted: Boolean

	&#34;&#34;&#34;
	List of groups and the predicates they store in this backup.
	&#34;&#34;&#34;
	groups: [BackupGroup]

	&#34;&#34;&#34;
	Path to the manifest file.
	&#34;&#34;&#34;
	path: String

	&#34;&#34;&#34;
	The timestamp at which this backup was taken. The next incremental backup will
	start from this timestamp.
	&#34;&#34;&#34;
	since: Int

	&#34;&#34;&#34;
	The type of backup, either full or incremental.
	&#34;&#34;&#34;
	type: String
}

type BackupGroup {
	&#34;&#34;&#34;
	The ID of the cluster group.
	&#34;&#34;&#34;
	groupId: Int

	&#34;&#34;&#34;
	List of predicates assigned to the group.
	&#34;&#34;&#34;
	predicates: [String]
}
</code></pre><h3 id=automating-backups>Automating Backups</h3><p>You can use the provided endpoint to automate backups, however, there are a few
things to keep in mind.</p><ul><li><p>The requests should go to a single Alpha server. The Alpha server that receives the request
is responsible for looking up the location and determining from which point the
backup should resume.</p></li><li><p>Versions of Dgraph starting with v20.07.1, v20.03.5, and v1.2.7 have a way to
block multiple backup requests going to the same Alpha server. For previous versions,
keep this in mind and avoid sending multiple requests at once. This is for the
same reason as the point above.</p></li><li><p>You can have multiple backup series in the same location although the feature
still works if you set up a unique location for each series.</p></li></ul><h2 id=export-backups>Export Backups</h2><p>The <code>export_backup</code> tool lets you convert a binary backup into an exported folder.</p><p>If you need to upgrade between two major Dgraph versions that have incompatible changes,
you can use the <code>export_backup</code> tool to apply changes (either to the exported <code>.rdf</code> file or to the schema file),
and then import back the dataset into the new Dgraph version.</p><h3 id=using-exports-instead-of-binary-backups>Using exports instead of binary backups</h3><p>An example of this use-case would be to migrate existing schemas from Dgraph v1.0 to Dgraph .
You need to update the schema file from an export so all predicates of type <code>uid</code> are changed to <code>[uid]</code>.
Then use the updated schema when loading data into Dgraph .</p><p>For example, for the following schema:</p><pre tabindex=0><code>name: string .
friend: uid .
</code></pre><p>becomes</p><pre tabindex=0><code>name: string .
friend: [uid] .
</code></pre><p>Because you have to do a modification to the schema itself, you need an export.
You can use the <code>export_backup</code> tool to convert your binary backup into an export folder.</p><h3 id=binary-backups-and-exports-folders>Binary Backups and Exports folders</h3><p>A Binary Backup directory has the following structure:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>backup
</span></span><span style=display:flex><span>├── dgraph.20210102.204757.509
</span></span><span style=display:flex><span>│   └── r9-g1.backup
</span></span><span style=display:flex><span>├── dgraph.20210104.224757.707
</span></span><span style=display:flex><span>│   └── r9-g1.backup
</span></span><span style=display:flex><span>└── manifest.json
</span></span></code></pre></div><p>An Export directory has the following structure:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph.r9.u0108.1621
</span></span><span style=display:flex><span>├── g01.gql_schema.gz
</span></span><span style=display:flex><span>├── g01.rdf.gz
</span></span><span style=display:flex><span>└── g01.schema.gz
</span></span></code></pre></div><p>If you want to do the changes cited above, you need to edit the <code>g01.schema.gz</code> file.</p><h3 id=benefits>Benefits</h3><p>With the <code>export_backup</code> tool you get the speed benefit from the binary backups, which are faster than regular exports.
So if you have a big dataset, you don&rsquo;t need to wait a long time until an export is completed.
Instead, just take a binary backup and convert it to an export only when needed.</p><h3 id=how-to-use-it>How to use it</h3><p>Ensure that you have created a binary backup. The directory tree of a binary backup usually looks like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>backup
</span></span><span style=display:flex><span>├── dgraph.20210104.224757.709
</span></span><span style=display:flex><span>│   └── r9-g1.backup
</span></span><span style=display:flex><span>└── manifest.json
</span></span></code></pre></div><p>Then run the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph export_backup --location <span style=color:#a31515>&#34;&lt;location-of-your-binary-backup&gt;&#34;</span> --destination <span style=color:#a31515>&#34;&lt;destination-of-the-export-dir&gt;&#34;</span>
</span></span></code></pre></div><p>Once completed you will find your export folder (in this case <code>dgraph.r9.u0108.1621</code>).
The tree of the directory should look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph.r9.u0108.1621
</span></span><span style=display:flex><span>├── g01.gql_schema.gz
</span></span><span style=display:flex><span>├── g01.rdf.gz
</span></span><span style=display:flex><span>└── g01.schema.gz
</span></span></code></pre></div><h2 id=encrypted-backups>Encrypted Backups</h2><p>Encrypted backups are an Enterprise feature that are available from <code>v20.03.1</code> and <code>v1.2.3</code> and allow you to encrypt your backups and restore them. This
documentation describes how to implement encryption into your binary backups.</p><p>Starting with<code> v20.07.0</code>, we also added support for Encrypted Backups using encryption keys sitting on <a href=https://www.vaultproject.io/>Hashicorp Vault</a>.</p><h3 id=new-encrypted-flag-in-manifestjson>New <code>Encrypted</code> flag in manifest.json</h3><p>A new <code>Encrypted</code> flag is added to the <code>manifest.json</code>. This flag indicates if the corresponding binary backup is encrypted or not. To be backward compatible, if this flag is absent, it is presumed that the corresponding backup is not encrypted.</p><p>For a series of full and incremental backups, per the current design, we don&rsquo;t allow the mixing of encrypted and unencrypted backups. As a result, all full and incremental backups in a series must either be encrypted fully or not at all. This flag helps with checking this restriction.</p><h3 id=aes-and-chaining-with-gzip>AES And Chaining with Gzip</h3><p>If encryption is turned on an Alpha server, then we use the configured encryption key. The key size (16, 24, 32 bytes) determines AES-128/192/256 cipher chosen. We use the AES CTR mode. Currently, the binary backup is already gzipped. With encryption, we will encrypt the gzipped data.</p><p>During <strong>backup</strong>: the 16 bytes IV is prepended to the Cipher-text data after encryption.</p><h3 id=backup>Backup</h3><p>Backup is an online tool, meaning it is available when Dgraph Alpha server is running. For encrypted backups, the Dgraph Alpha server must be configured with the <code>--encryption key-file=value</code>. Starting with v20.07.0, the Dgraph Alpha server can alternatively be configured to interface with a <a href=https://www.vaultproject.io/>Hashicorp Vault</a> server to obtain keys.</p><div class="notices note"><span class=type>Note</span> <code>encryption key-file=value</code> flag or <code>vault</code> superflag was used for encryption-at-rest and will now also be used for encrypted backups.</div><h2 id=online-restore>Online restore</h2><p>To restore from a backup to a live cluster, execute a mutation on the <code>/admin</code>
endpoint with the following format:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span>{
</span></span><span style=display:flex><span>  <span style=color:#2b91af>restore</span>(<span style=color:#00f>input</span>:{
</span></span><span style=display:flex><span>    <span style=color:#2b91af>location</span>: <span style=color:#a31515>&#34;/path/to/backup/directory&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#2b91af>backupId</span>: <span style=color:#a31515>&#34;id_of_backup_to_restore&#34;</span><span>&#39;</span>
</span></span><span style=display:flex><span>  }){
</span></span><span style=display:flex><span>    <span style=color:#2b91af>message</span>
</span></span><span style=display:flex><span>    <span style=color:#2b91af>code</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Online restores only require you to send this request. The <code>UID</code> and timestamp
leases are updated accordingly. The latest backup to be restored should contain
the same number of groups in its <code>manifest.json</code> file as the cluster to which it
is being restored.</p><div class="notices note"><span class=type>Note</span> When using backups made from a Dgraph cluster that uses encryption (so backups are encrypted),
you need to use the same key from that original cluster when doing a restore process.
Dgraph&rsquo;s <a href=/enterprise-features/encryption-at-rest/>Encryption at Rest</a> uses a symmetric-key
algorithm where the same key is used for both encryption and decryption, so the encryption key from that
cluster is needed for the restore process.</div><p>Online restore can be performed from Amazon S3 / Minio or from a local directory. Below is the documentation for the fields inside <code>RestoreInput</code> that can be passed into
the mutation.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>input</span> <span style=color:#2b91af>RestoreInput</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Destination for the backup: e.g. Minio or S3 bucket.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		location: <span style=color:#2b91af>String</span>!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Backup ID of the backup series to restore. This ID is included in the manifest.json file.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		If missing, it defaults to the latest series.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		backupId: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Number of the backup within the backup series to be restored. Backups with a greater value
</span></span></span><span style=display:flex><span><span style=color:#a31515>		will be ignored. If the value is zero or is missing, the entire series will be restored.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		backupNum: <span style=color:#2b91af>Int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Path to the key file needed to decrypt the backup. This file should be accessible
</span></span></span><span style=display:flex><span><span style=color:#a31515>		by all Alpha servers in the group. The backup will be written using the encryption key
</span></span></span><span style=display:flex><span><span style=color:#a31515>		with which the cluster was started, which might be different than this key.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		encryptionKeyFile: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Vault server address where the key is stored. This server must be accessible
</span></span></span><span style=display:flex><span><span style=color:#a31515>		by all Alpha servers in the group. Default &#34;http://localhost:8200&#34;.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		vaultAddr: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Path to the Vault RoleID file.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		vaultRoleIDFile: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Path to the Vault SecretID file.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		vaultSecretIDFile: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Vault kv store path where the key lives. Default &#34;secret/data/dgraph&#34;.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		vaultPath: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Vault kv store field whose value is the key. Default &#34;enc_key&#34;.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		vaultField: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Vault kv store field&#39;s format. Must be &#34;base64&#34; or &#34;raw&#34;. Default &#34;base64&#34;.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		vaultFormat: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Access key credential for the destination.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		accessKey: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Secret key credential for the destination.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>		
</span></span><span style=display:flex><span>		secretKey: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		AWS session token, if required.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		sessionToken: <span style=color:#2b91af>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		Set to true to allow backing up to S3 or Minio bucket that requires no credentials.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		anonymous: <span style=color:#2b91af>Boolean</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		All the backups with num &gt;= incrementalFrom will be restored.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		incrementalFrom: <span style=color:#2b91af>Int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>		If isPartial is set to true then the cluster will be kept in draining mode after
</span></span></span><span style=display:flex><span><span style=color:#a31515>		restore. This makes sure that the db is not corrupted by any mutations or tablet moves in
</span></span></span><span style=display:flex><span><span style=color:#a31515>		between two restores.
</span></span></span><span style=display:flex><span><span style=color:#a31515>		&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>		isPartial: <span style=color:#2b91af>Boolean</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Restore requests returns immediately without waiting for the operation to finish.</p><h2 id=incremental-restore>Incremental Restore</h2><p>You can use incremental restore to restore a set of incremental backups on a cluster with a part of the backup already restored.
The system does not appect any mutations made between a normal restore and an incremental restore, because the cluster is in the draining mode. When the cluster is in a draining mode only an admin request to bring the cluster back to normal mode accepted.</p><p>Note: Before you start an incremental restore ensure that you set <code>isPartial</code> to <code>true</code> in your noraml restore.</p><p>To incrementally restore from a backup to a live cluster, execute a mutation on the <code>/admin</code>
endpoint with the following format:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span>{
</span></span><span style=display:flex><span>  <span style=color:#2b91af>restore</span>(<span style=color:#00f>input</span>:{
</span></span><span style=display:flex><span>    <span style=color:#2b91af>incrementalFrom</span>:<span style=color:#a31515>&#34;incremental_backup_from&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#2b91af>location</span>: <span style=color:#a31515>&#34;/path/to/backup/directory&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#2b91af>backupId</span>: <span style=color:#a31515>&#34;id_of_backup_to_restore&#34;</span><span>&#39;</span>
</span></span><span style=display:flex><span>  }){
</span></span><span style=display:flex><span>    <span style=color:#2b91af>message</span>
</span></span><span style=display:flex><span>    <span style=color:#2b91af>code</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=offline-restore>Offline restore</h2><p>The restore utility is now a standalone tool. A new flag, <code>--encryption key-file=value</code>, is now part of the restore utility, so you can use it to decrypt the backup. The file specified using this flag must contain the same key that was used for encryption during backup. Alternatively, starting with <code>v20.07.0</code>, the <code>vault</code> superflag can be used to restore a backup.</p><p>You can use the <code>dgraph restore</code> command to restore the postings directory from a previously-created backup to a directory in the local filesystem. This command restores a backup to a new Dgraph cluster, so it is not designed to restore a backup to a Dgraph cluster that is currently live. During a restore operation, a new Dgraph Zero server might run to fully restore the backup state.</p><p>You can use the <code>--location</code> (<code>-l</code>) flag to specify a source URI with Dgraph backup objects. This URI supports all the schemes used for backup.</p><p>You can use the <code>--postings</code> (<code>-p</code>) flag to set the directory where restored posting directories are saved. This directory contains a posting directory for each group in the restored backup.</p><p>You can use the <code>--zero</code> (<code>-z</code>) flag to specify a Dgraph Zero server address to update the start timestamp and UID lease using the restored version. If no Dgraph Zero server address is passed, the command will complain unless you set the value of the <code>--force_zero</code> flag to false. If do not pass a zero value to this command, you need to manually update the timestamp and UID lease using the Dgraph Zero server&rsquo;s HTTP &lsquo;assign&rsquo; endpoint. The updated values should be those that are printed near the end of the command&rsquo;s output.</p><p>You use the <code>--backup_id</code> optional flag to specify the ID of the backup series to restore. A backup series consists of a full backup and all of the incremental backups built on top of it. Each time a new full backup is created, a new backup series with a different ID is started. The backup series ID is stored in each <code>manifest.json</code> file stored in each backup folder.</p><p>You use the <code>--encryption key-file=value</code> flag in cases where you took the backup in an encrypted cluster. The string for this flag must point to the location of the same key file used to run the cluster.</p><p>You use the <code>--vault</code> <a href=/deploy/cli-command-reference/>superflag</a> to specify the <a href=https://www.vaultproject.io/>Hashicorp Vault</a> server address (<code>addr</code>), role id (<code>role-id-file</code>), secret id (<code>secret-id-file</code>) and the field that contains the encryption key (<code>enc-field</code>) that was used to encrypt the backup.</p><p>The restore feature creates a cluster with as many groups as the original cluster had at the time of the last backup. For each group, <code>dgraph restore</code> creates a posting directory (<code>p&lt;N></code>) that corresponds to the backup group ID. For example, a backup for Dgraph Alpha group 2 would have the name <code>.../r32-g2.backup</code> and would be loaded to posting directory <code>p2</code>.</p><p>After running the restore command, the directories inside the <code>postings</code> directory need to be manually copied over to the machines/containers running the Dgraph Alpha servers before running the <code>dgraph alpha</code> command. For example, in a database cluster with two Dgraph Alpha groups and one replica each, <code>p1</code> needs to be moved to the location of the first Dgraph Alpha node and <code>p2</code> needs to be moved to the location of the second Dgraph Alpha node.</p><p>By default, Dgraph will look for a posting directory with the name <code>p</code>, so make sure to rename the directories after moving them. You can also use the <code>-p</code> option of the <code>dgraph alpha</code> command to specify a different path from the default.</p><h3 id=restore-from-amazon-s3>Restore from Amazon S3</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph restore --postings <span style=color:#a31515>&#34;/var/db/dgraph&#34;</span> --location <span style=color:#a31515>&#34;s3://s3.&lt;region&gt;.amazonaws.com/&lt;bucketname&gt;&#34;</span>
</span></span></code></pre></div><h3 id=restore-from-minio>Restore from MinIO</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph restore --postings <span style=color:#a31515>&#34;/var/db/dgraph&#34;</span> --location <span style=color:#a31515>&#34;minio://127.0.0.1:9000/&lt;bucketname&gt;&#34;</span>
</span></span></code></pre></div><h3 id=restore-from-local-directory-or-nfs>Restore from Local Directory or NFS</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph restore --postings <span style=color:#a31515>&#34;/var/db/dgraph&#34;</span> --location <span style=color:#a31515>&#34;/var/backups/dgraph&#34;</span>
</span></span></code></pre></div><h3 id=restore-and-update-timestamp>Restore and Update Timestamp</h3><p>Specify the Zero server address and port for the new cluster with <code>--zero</code>/<code>-z</code> to update the timestamp.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph restore --postings <span style=color:#a31515>&#34;/var/db/dgraph&#34;</span> --location <span style=color:#a31515>&#34;/var/backups/dgraph&#34;</span> --zero <span style=color:#a31515>&#34;localhost:5080&#34;</span>
</span></span></code></pre></div></div><div class=post__comments><footer class=clearfix><a class=question-btn target=_blank href=https://discord.com/invite/vtJ7JE4sha><i class="fa fa-question-circle"></i> Ask a Question</a>
<a class=edit-btn target=_blank href=https://github.com/libremfg/libremfg.github.io/issues><i class="fa fa-github-alt"></i> Edit Page</a></footer></div></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#configure-backup>Configure Backup</a><ul><li><a href=#configure-amazon-s3-credentials>Configure Amazon S3 Credentials</a></li><li><a href=#configure-minio-credentials>Configure Minio Credentials</a></li></ul></li><li><a href=#create-a-backup>Create a Backup</a><ul><li><a href=#backup-to-amazon-s3>Backup to Amazon S3</a></li><li><a href=#backup-to-minio>Backup to Minio</a></li><li><a href=#backup-using-a-minio-gateway>Backup using a MinIO Gateway</a><ul><li><a href=#azure-blob-storage>Azure Blob Storage</a></li><li><a href=#google-cloud-storage>Google Cloud Storage</a></li><li><a href=#test-using-minio-browser>Test Using MinIO Browser</a></li></ul></li><li><a href=#disabling-https-for-s3-and-minio-backups>Disabling HTTPS for S3 and Minio backups</a></li><li><a href=#overriding-credentials>Overriding Credentials</a></li><li><a href=#backup-to-nfs>Backup to NFS</a></li><li><a href=#forcing-a-full-backup>Forcing a Full Backup</a></li></ul></li><li><a href=#listing-backups>Listing Backups</a><ul><li><a href=#automating-backups>Automating Backups</a></li></ul></li><li><a href=#export-backups>Export Backups</a><ul><li><a href=#using-exports-instead-of-binary-backups>Using exports instead of binary backups</a></li><li><a href=#binary-backups-and-exports-folders>Binary Backups and Exports folders</a></li><li><a href=#benefits>Benefits</a></li><li><a href=#how-to-use-it>How to use it</a></li></ul></li><li><a href=#encrypted-backups>Encrypted Backups</a><ul><li><a href=#new-encrypted-flag-in-manifestjson>New <code>Encrypted</code> flag in manifest.json</a></li><li><a href=#aes-and-chaining-with-gzip>AES And Chaining with Gzip</a></li><li><a href=#backup>Backup</a></li></ul></li><li><a href=#online-restore>Online restore</a></li><li><a href=#incremental-restore>Incremental Restore</a></li><li><a href=#offline-restore>Offline restore</a><ul><li><a href=#restore-from-amazon-s3>Restore from Amazon S3</a></li><li><a href=#restore-from-minio>Restore from MinIO</a></li><li><a href=#restore-from-local-directory-or-nfs>Restore from Local Directory or NFS</a></li><li><a href=#restore-and-update-timestamp>Restore and Update Timestamp</a></li></ul></li></ul></nav></div></div></main><div class="modal fade" id=runnable-modal tabindex=-1 role=dialog aria-labelledby=exampleModalLabel aria-hidden=true><a href=# data-dismiss=modal class=modal-close-btn>Close</a><div class=modal-dialog role=document><div class=modal-content><div class=modal-body></div></div></div></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script>
<script type=text/javascript>if(window.docsearch){var version="latest",path=window.location.pathname,arr=/(?:\/)?((?:master)|(?:v[0-9][^/]+))(?:\/)?.*$/.exec(path);arr!=null&&arr.length>1&&(version=arr[1]),window.docsearch({apiKey:"fe4cbc1640c6c87bbc5f099902d86f97",indexName:"dgraph",inputSelector:"#algolia-doc-search",algoliaOptions:{filters:`version:${version}`},debug:!1})}</script><script type=text/javascript>adroll_adv_id="L42C3U2UXBBPVAMISVXVLC",adroll_pix_id="MOR4VUNPK5B2LHEZ2NNTDX",adroll_version="2.0",function(e,t,n,s,o){e.__adroll_loaded=!0,e.adroll=e.adroll||[],e.adroll.f=["setProperties","identify","track"];var i="https://s.adroll.com/j/"+adroll_adv_id+"/roundtrip.js";for(o=0;o<e.adroll.f.length;o++)e.adroll[e.adroll.f[o]]=e.adroll[e.adroll.f[o]]||function(t){return function(){e.adroll.push([t,arguments])}}(e.adroll.f[o]);n=t.createElement("script"),s=t.getElementsByTagName("script")[0],n.async=1,n.src=i,s.parentNode.insertBefore(n,s)}(window,document),adroll.track("pageView")</script><script src=/js/clipboard.min.js></script>
<script src=/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script>
<script src=/js/runnable.js?6e7f328df4134d18ba5c8dd11f84deb8></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>