<!doctype html><html lang=en class="js csstransforms3d"><head><script>var subPaths={"/clients/#implementation":"/clients/overview/#implementation","/clients/#transactions":"/clients/overview/#transactions","/clients/#create-the-client":"/clients/go/#create-the-client","/clients/#alter-the-database":"/clients/go/#alter-the-database","/clients/#create-a-transaction":"/clients/go/#create-a-transaction","/clients/#read-only-transactions":"/clients/go/#read-only-transactions","/clients/#run-a-query":"/clients/go/#run-a query","/clients/#run-a-mutation":"/clients/go/#run-a-mutation","/clients/#commit-the-transaction":"/clients/go/#commit-the-transaction","/clients/#complete-example":"/clients/go/#complete-example","/clients/#grpc":"/clients/javascript/#grpc","/clients/#http":"/clients/javascript#http","/clients/#create-the-client-1":"/clients/raw-http/#create-the-client-1","/clients/#alter-the-database-1":"/clients/raw-http/#alter-the-database-1","/clients/#start-a-transaction":"/clients/raw-http/#start-a-transaction","/clients/#run-a-query-1":"/clients/raw-http/#run-a-query","/clients/#run-a-mutation-1":"/clients/raw-http/#run-a-mutation","/clients/#committing-the-transaction":"/clients/raw-http/#committing-the-transaction","/clients/#aborting-the-transaction":"/clients/raw-http/#aborting-the-transaction","/clients/#running-read-only-queries":"/clients/raw-http/#running-read-only-queries","/clients/#running-best-effort-queries":"/clients/raw-http/#running-best-effort-queries","/clients/#compression-via-http":"/clients/raw-http/#compression-via-http","/clients/#run-a-query-in-json-format":"/clients/raw-http/#run-a-query-in-json-format","/deploy/#install-dgraph":"/deploy/download","/deploy/#docker":"/deploy/download/#docker","/deploy/#automatic-download":"/deploy/download/#automatic-download","/deploy/#manual-download-[optional]":"/deploy/download/#manual-download-[optional]","/deploy/#building-from-source":"/deploy/download/#building-from-source","/deploy/#understanding-dgraph-cluster":"/deploy/cluster-setup/#understanding-dgraph-cluster","/deploy/#sharding":"/deploy/cluster-setup/#sharding","/deploy/#shard-rebalancing":"/deploy/cluster-setup/#shard-rebalancing","/deploy/#consistent-replication":"/deploy/cluster-setup/#consistent-replication","/deploy/#types-of-ports":"/deploy/ports-usage/#types-of-ports","/deploy/#ports-used-by-different-nodes":"/deploy/ports-usage/#ports-used-by-different-nodes","/deploy/#ha-cluster-setup":"/deploy/ports-usage/#ha-cluster-setup","/deploy/#dgraph-zero":"/deploy/ports-usage/#dgraph-zero","/deploy/#dgraph-alpha":"/deploy/ports-usage/#dgraph-alpha","/deploy/#run-directly-on-the-host":"/deploy/single-host-setup/#run-directly-on-the-host","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker":"/deploy/single-host-setup/#run-using-docker","/deploy/#create-docker-network":"/deploy/single-host-setup/#create-docker-network","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker-compose-(on-single-aws-instance)":"/deploy/single-host-setup/#run-using-docker-compose-(on-single-aws-instance)","/deploy/#using-docker-swarm":"/deploy/multi-host-setup/#using-docker-swarm","/deploy/#cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#cluster-setup-using-docker-swarm","/deploy/#ha-cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#ha-cluster-setup-using-docker-swarm","/deploy/#single-server":"/deploy/kubernetes/#single-server","/deploy/#deploy-single-server":"/deploy/kubernetes/#deploy-single-server","/deploy/#verify-single-server":"/deploy/kubernetes/#verify-single-server","/deploy/#test-single-server-setup":"/deploy/kubernetes/#test-single-server-setup","/deploy/#remove-single-server-resources":"/deploy/kubernetes/#remove-single-server-resources","/deploy/#ha-cluster-setup-using-kubernetes":"/deploy/kubernetes/#ha-cluster-setup-using-kubernetes","/deploy/#validate-kubernetes-cluster-for-ha":"/deploy/kubernetes/#validate-kubernetes-cluster-for-ha","/deploy/#verify-dgraph-ha-cluster":"/deploy/kubernetes/#verify-dgraph-ha-cluster","/deploy/#test-dgraph-ha-cluster-setup":"/deploy/kubernetes/#test-dgraph-ha-cluster-setup","/deploy/#delete-dgraph-ha-cluster-resources":"/deploy/kubernetes/#delete-dgraph-ha-cluster-resources","/deploy/#using-helm-chart":"/deploy/kubernetes/#using-helm-chart","/deploy/#installing-the-chart":"/deploy/kubernetes/#installing-the-chart","/deploy/#upgrading-the-chart":"/deploy/kubernetes/#upgrading-the-chart","/deploy/#deleting-the-chart":"/deploy/kubernetes/#deleting-the-chart","/deploy/#configuration":"/deploy/kubernetes/#configuration","/deploy/#monitoring-in-kubernetes":"/deploy/kubernetes/#monitoring-in-kubernetes","/deploy/#kubernetes-storage":"/deploy/kubernetes/#kubernetes-storage","/deploy/#local-storage":"/deploy/kubernetes/#local-storage","/deploy/#non-local-persistent-disks":"/deploy/kubernetes/#non-local-persistent-disks","/deploy/#removing-a-dgraph-pod":"/deploy/kubernetes/#removing-a-dgraph-pod","/deploy/#kubernetes-and-bulk-loader":"/deploy/kubernetes/#kubernetes-and-bulk-loader","/deploy/#more-about-dgraph-alpha":"/deploy/dgraph-alpha","/deploy/#querying-health":"/deploy/dgraph-alpha/#querying-health","/deploy/#more-about-dgraph-zero":"/deploy/dgraph-zero","/deploy/#more-about-state-endpoint":"/deploy/dgraph-zero/#more-about-state-endpoint","/deploy/#query-logging":"/deploy/log-format/#query-logging","/deploy/#dgraph-certificate-management-tool":"/deploy/tls-configuration/#dgraph-certificate-management-tool","/deploy/#file-naming-conventions":"/deploy/tls-configuration/#file-naming-conventions","/deploy/#certificate-inspection":"/deploy/tls-configuration/#certificate-inspection","/deploy/#tls-options":"/deploy/tls-configuration/#tls-options","/deploy/#using-tls-without-client-authentication":"/deploy/tls-configuration/#using-tls-without-client-authentication","/deploy/#using-tls-with-client-authentication":"/deploy/tls-configuration/#using-tls-with-client-authentication","/deploy/#client-authentication-options":"/deploy/tls-configuration/#client-authentication-options","/deploy/#using-ratel-ui-with-client-authentication":"/deploy/tls-configuration/#using-ratel-ui-with-client-authentication","/deploy/#using-curl-with-client-authentication":"/deploy/tls-configuration/#using-curl-with-client-authentication","/deploy/#access-data-using-a-client":"/deploy/tls-configuration/#access-data-using-a-client","/deploy/#troubleshooting-ratel-s-client-authentication":"/deploy/tls-configuration/#troubleshooting-ratel-s-client-authentication","/deploy/#live-loader":"/deploy/fast-data-loading/#live-loader","/deploy/#encrypted-imports-via-live-loader":"/deploy/fast-data-loading/#encrypted-imports-via-live-loader","/deploy/#encrypted-rdf-json-file-and-schema-via-live-loader":"/deploy/fast-data-loading/#encrypted-rdf-json-file-and-schema-via-live-loader","/deploy/#other-live-loader-options":"/deploy/fast-data-loading/#other-live-loader-options","/deploy/#bulk-loader":"/deploy/fast-data-loading/#bulk-loader","/deploy/#encryption-at-rest-with-bulk-loader":"/deploy/fast-data-loading/#encryption-at-rest-with-bulk-loader","/deploy/#encrypting-imports-via-bulk-loader":"/deploy/fast-data-loading/#encrypting-imports-via-bulk-loader","/deploy/#other-bulk-loader-options":"/deploy/fast-data-loading/#other-bulk-loader-options","/deploy/#tuning-monitoring":"/deploy/fast-data-loading/#tuning-monitoring","/deploy/#disk-metrics":"/deploy/metrics/#disk-metrics","/deploy/#memory-metrics":"/deploy/metrics/#memory-metrics","/deploy/#activity-metrics":"/deploy/metrics/#activity-metrics","/deploy/#health-metrics":"/deploy/metrics/#health-metrics","/deploy/#go-metrics":"/deploy/metrics/#go-metrics","/deploy/#examining-traces-with-zpages":"/deploy/tracing/#examining-traces-with-zpages","/deploy/#examining-traces-with-jaeger":"/deploy/tracing/#examining-traces-with-jaeger","/deploy/#setting-up-multiple-dgraph-clusters-with-jaeger":"/deploy/tracing/#setting-up-multiple-dgraph-clusters-with-jaeger","/deploy/#whitelisting-admin-operations":"/deploy/dgraph-administration/#whitelisting-admin-operations","/deploy/#restricting-mutation-operations":"/deploy/dgraph-administration/#restricting-mutation-operations","/deploy/#securing-alter-operations":"/deploy/dgraph-administration/#securing-alter-operations","/deploy/#export-database":"/deploy/dgraph-administration/#exporting-database","/deploy/#encrypting-exports":"/deploy/dgraph-administration/#encrypting-exports","/deploy/#shutting-down-database":"/deploy/dgraph-administration/#shutting-down-database","/deploy/#deleting-database":"/deploy/dgraph-administration/#deleting-database","/deploy/#upgrading-database":"/deploy/dgraph-administration/#upgrading-database","/deploy/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers":"/deploy/dgraph-administration/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers","/deploy/#post-installation":"/deploy/dgraph-administration/#post-installation","/deploy/#running-oom-out-of-memory":"/deploy/troubleshooting/#running-oom-out-of-memory","/deploy/#too-many-open-files":"/deploy/troubleshooting/#too-many-open-files","/deploy/#cluster-requirements":"/deploy/production-checklist/#cluster-requirements","/deploy/#machine-requirements":"/deploy/production-checklist/#machine-requirements","/deploy/#operating-system":"/deploy/production-checklist/#operating-system","/deploy/#cpu-and-memory":"/deploy/production-checklist/#cpu-and-memory","/deploy/#disk":"/deploy/production-checklist/#disk","/deploy/#firewall-rules":"/deployproduction-checklist/#firewall-rules","/deploy/#operating-system-tuning":"/deploy/production-checklist/#operating-system-tuning","/deploy/#deployment":"/deploy/production-checklist/#deployment","/deploy/#terminology":"/deploy/production-checklist/#terminology","/deploy/#basic-setup-2-node-cluster":"/deploy/production-checklist/#basic-setup-2-node-cluster","/deploy/#ha-setup-6-node-cluster":"/deploy/production-checklist/#ha-setup-6-node-cluster","/deploy/#supplementary-services":"/deploy/production-checklist/#supplementary-services","/deploy/#see-also":"/deploy/","/query-language/#take-a-tour-https-tour-dgraph-io":"/query-language/graphql-fundamentals/#take-a-tour-https-tour-dgraph-io","/query-language/#running-examples":"/query-language/graphql-fundamentals/#running-examples","/query-language/#graphql-fundamentals":"/query-language/graphql-fundamentals/#graphql-fundamentals","/query-language/#returning-values":"/query-language/graphql-fundamentals/#returning-values","/query-language/#expanding-graph-edges":"/query-language/graphql-fundamentals/#expanding-graph-edges","/query-language/#comments":"/query-language/graphql-fundamentals/#comments","/query-language/#applying-filters":"/query-language/graphql-fundamentals/#applying-filters","/query-language/#language-support":"/query-language/graphql-fundamentals/#language-support","/query-language/#functions":"/query-language/functions","/query-language/#term-matching":"/query-language/functions/#term-matching","/query-language/#allofterms":"/query-language/functions/#allofterms","/query-language/#usage-at-root":"/query-language/functions/#usage-at-root","/query-language/#usage-as-filter":"/query-language/functions/#usage-as-filter","/query-language/#anyofterms":"/query-language/functions/#anyofterms","/query-language/#usage-at-root-1":"/query-language/functions/#usage-at-root-1","/query-language/#usage-as-filter-1":"/query-language/functions/#usage-as-filter-1","/query-language/#regular-expressions":"/query-language/functions/#regular-expressions","/query-language/#technical-details":"/query-language/functions/#technical-details","/query-language/#writing-efficient-regular-expressions-and-limitations":"/query-language/functions/#writing-efficient-regular-expressions-and-limitations","/query-language/#fuzzy-matching":"/query-language/functions/#fuzzy-matching","/query-language/#full-text-search":"/query-language/functions/#full-text-search","/query-language/#inequality":"/query-language/functions/#inequality","/query-language/#equal-to":"/query-language/functions/#equal-to","/query-language/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to":"/query-language/functions/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to","/query-language/#uid":"/query-language/functions/#uid","/query-language/#uid-in":"/query-language/functions/#uid-in","/query-language/#has":"/query-language/functions/#has","/query-language/#geolocation":"/query-language/functions/#geolocation","/query-language/#mutations":"/query-language/functions/#mutations","/query-language/#query":"/query-language/functions/#query","/query-language/#near":"/query-language/functions/#near","/query-language/#within":"/query-language/functions/#within","/query-language/#contains":"/query-language/functions/#contains","/query-language/#intersects":"/query-language/functions/#intersects","/query-language/#connecting-filters":"/query-language/connecting-filters/","/query-language/#and-or-and-not":"/query-language/connecting-filters/#and-or-and-not","/query-language/#alias":"/query-language/alias","/query-language/#pagination":"/query-language/pagination","/query-language/#first":"/query-language/pagination/#first","/query-language/#offset":"/query-language/paginatio/n#offset","/query-language/#after":"/query-language/pagination/#after","/query-language/#count":"/query-language/count","/query-language/#sorting":"/query-language/sorting","/query-language/#multiple-query-blocks":"/query-language/multiple-query-blocks","/query-language/#var-blocks":"/query-language/multiple-query-blocks/#var-blocks","/query-language/#query-variables":"/query-language/query-variables/","/query-language/#value-variables":"/query-language/value-variables/","/query-language/#variable-propagation":"/query-language/value-variables/#variable-propagation","/query-language/#aggregation":"/query-language/aggregation/","/query-language/#min":"/query-language/aggregation/#min","/query-language/#usage-at-root-2":"/query-language/aggregation/#usage-at-root-2","/query-language/#usage-at-other-levels":"/query-language/aggregation/#usage-at-other-levels","/query-language/#max":"/query-language/aggregation/#max","/query-language/#usage-at-root-3":"/query-language/aggregation/#usage-at-root-3","/query-language/#usage-at-other-levels-1":"/query-language/aggregation/#usage-at-other-levels-1","/query-language/#sum-and-avg":"/query-language/aggregation/#sum-and-avg","/query-language/#usage-at-root-4":"/query-language/aggregation/#usage-at-root-4","/query-language/#usage-at-other-levels-2":"/query-language/aggregation/#usage-at-other-levels-2","/query-language/#aggregating-aggregates":"/query-language/aggregation/#aggregating-aggregates","/query-language/#math-on-value-variables":"/query-language/math-on-value-variables/","/query-language/#groupby":"/query-language/groupby/","/query-language/#expand-predicates":"/query-language/expand-predicates/","/query-language/#filtering-during-expand":"/query-language/expand-predicates/#filtering-during-expand","/query-language/#cascade-directive":"/query-language/cascade-directive/","/query-language/#normalize-directive":"/query-language/normalize-directive/","/query-language/#ignorereflex-directive":"/query-language/ignorereflex-directive/","/query-language/#debug":"/query-language/debug/","/query-language/#schema":"/query-language/schema/","/query-language/#schema-types":"/query-language/schema/#schema-types","/query-language/#scalar-types":"/query-language/schema/#scalar-types","/query-language/#uid-type":"/query-language/schema/#uid-type","/query-language/#adding-or-modifying-schema":"/query-language/schema/#adding-or-modifying-schema","/query-language/#indexes-in-background":"/query-language/schema/#indexes-in-background","/query-language/#http-api":"/query-language/schema/#http-api","/query-language/#grpc-api":"/query-language/schema/#grpc-api","/query-language/#predicate-name-rules":"/query-language/schema/#predicate-name-rules","/query-language/#allowed-special-characters":"/query-language/schema/#allowed-special-characters","/query-language/#forbidden-special-characters":"/query-language/schema/#forbidden-special-characters","/query-language/#predicates-i18n":"/query-language/schema/#predicates-i18n","/query-language/#upsert-directive":"/query-language/schema/#upsert-directive","/query-language/#noconflict-directive":"/query-language/schema/#noconflict-directive","/query-language/#rdf-types":"/query-language/schema/#rdf-types","/query-language/#extended-types":"/query-language/schema/#extended-types","/query-language/#password-type":"/query-language/schema/#password-type","/query-language/#indexing":"/query-language/schema/#indexing","/query-language/#string-indices":"/query-language/schema/#string-indices","/query-language/#datetime-indices":"/query-language/schema/#datetime-indices","/query-language/#sortable-indices":"/query-language/schema/#sortable-indices","/query-language/#count-index":"/query-language/schema/#count-index","/query-language/#list-type":"/query-language/schema/#list-type","/query-language/#filtering-on-list":"/query-language/schema/#filtering-on-list","/query-language/#reverse-edges":"/query-language/schema/#reverse-edges","/query-language/#querying-schema":"/query-language/schema/#querying-schema","/query-language/#type-system":"/query-language/type-system/","/query-language/#type-definition":"/query-language/schema/#type-definition","/query-language/#setting-the-type-of-a-node":"/query-language/schema/#setting-the-type-of-a-node","/query-language/#using-types-during-queries":"/query-language/schema/#using-types-during-queries","/query-language/#deleting-a-type":"/query-language/schema/#deleting-a-type","/query-language/#expand-queries-and-types":"/query-language/schema/#expand-queries-and-types","/query-language/#facets-edge-attributes":"/query-language/facets/","/query-language/#facets-on-scalar-predicates":"/query-language/facets/#facets-on-scalar-predicates","/query-language/#facets-i18n":"/query-language/facets/#facets-i18n","/query-language/#alias-with-facets":"/query-language/facets/#alias-with-facets","/query-language/#facets-on-uid-predicates":"/query-language/facets/#facets-on-uid-predicates","/query-language/#filtering-on-facets":"/query-language/facets/#filtering-on-facets","/query-language/#sorting-using-facets":"/query-language/facets/#sorting-using-facets","/query-language/#assigning-facet-values-to-a-variable":"/query-language/facets/#assigning-facet-values-to-a-variable","/query-language/#facets-and-variable-propagation":"/query-language/facets/#facets-and-variable-propagation","/query-language/#facets-and-aggregation":"/query-language/facets/#facets-and-aggregation","/query-language/#k-shortest-path-queries":"/query-language/k-shortest-path-queries/","/query-language/#recurse-query":"/query-language/recurse-query/","/query-language/#fragments":"/query-language/fragments/","/query-language/#graphql-variables":"/query-language/graphql-variables/","/query-language/#indexing-with-custom-tokenizers":"/query-language/indexing-custom-tokenizers/","/query-language/#caveats":"/query-language/indexing-custom-tokenizers/#caveats","/query-language/#implementing-a-plugin":"/query-language/indexing-custom-tokenizers/#implementing-a-plugin","/query-language/#building-the-plugin":"/query-language/indexing-custom-tokenizers/#building-the-plugin","/query-language/#running-dgraph-with-plugins":"/query-language/indexing-custom-tokenizers/#running-dgraph-with-plugins","/query-language/#adding-the-index-to-the-schema":"/query-language/indexing-custom-tokenizers/#adding-the-index-to-the-schema","/query-language/#using-the-index-in-queries":"/query-language/indexing-custom-tokenizers/#using-the-index-in-queries","/query-language/#examples":"/query-language/indexing-custom-tokenizers/#examples","/query-language/#unicode-characters":"/query-language/indexing-custom-tokenizers/#unicode-characters","/query-language/#cidr-range":"/query-language/indexing-custom-tokenizers/#cidr-range","/query-language/#anagram":"/query-language/indexing-custom-tokenizers/#anagram","/query-language/#integer-prime-factors":"/query-language/indexing-custom-tokenizers/#integer-prime-factors","/design-concepts/#can-we-do-pre-writes-only-on-leaders":"/design-concepts/transactions-faq/","/design-concepts/#edges":"/design-concepts/concepts/#edges","/design-concepts/#posting-list":"/design-concepts/concepts/#posting-list","/design-concepts/#badger":"/design-concepts/concepts/#badger","/design-concepts/#group":"/design-concepts/concepts/#group","/design-concepts/#replication-and-server-failure":"/design-concepts/concepts/#replication-and-server-failure","/design-concepts/#new-server-and-discovery":"/design-concepts/concepts/#new-server-and-discovery","/design-concepts/#write-ahead-logs":"/design-concepts/concepts/#write-ahead-logs","/design-concepts/#mutations":"/design-concepts/concepts/#mutations","/design-concepts/#queries":"/design-concepts/concepts/#queries","/design-concepts/#network-calls":"/design-concepts/concepts/#network-calls","/design-concepts/#worker":"/design-concepts/concepts/#worker","/design-concepts/#worker-pool":"/design-concepts/concepts/#worker-pool","/design-concepts/#protocol-buffers":"/design-concepts/concepts/#protocol-buffers","/design-concepts/#sql-nosql":"/design-concepts/minimizing-network-calls/#sql-nosql","/design-concepts/#dgraph":"/design-concepts/minimizing-network-calls/#dgraph","/design-concepts/#term":"/design-concepts/raft/#dgraph","/design-concepts/#server-states":"/design-concepts/raft/#server-states","/design-concepts/#communication":"/design-concepts/raft/#communication","/design-concepts/#log-entries":"/design-concepts/raft/#log-entries","/design-concepts/#voting":"/design-concepts/raft/#voting","/design-concepts/#cluster-membership":"/design-concepts/raft/#cluster-membership","/design-concepts/#log-compaction":"/design-concepts/raft/#log-compaction","/design-concepts/#clients":"/design-concepts/raft/#clients","/design-concepts/#linearizable-semantics":"/design-concepts/raft/#linearizable-semantics","/design-concepts/#read-only-queries":"/design-concepts/raft/#read-only-queries","/mutations/#deletion-of-non-list-predicates":"/mutations/delete/#deletion-of-non-list-predicates","/mutations/#setting-literal-values":"/mutations/json-mutation-format/#setting-literal-values","/mutations/#language-support":"/mutations/json-mutation-format/#language-support","/mutations/#geolocation-support":"/mutations/json-mutation-format/#geolocation-support","/mutations/#referencing-existing-nodes":"/mutations/json-mutation-format/#referencing-existing-nodes","/mutations/#edges-between-nodes":"/mutations/json-mutation-format/#edges-between-nodes","/mutations/#deleting-literal-values":"/mutations/json-mutation-format/#deleting-literal-values","/mutations/#deleting-edges":"/mutations/json-mutation-format/#deleting-edges","/mutations/#facets":"/mutations/json-mutation-format/#facets","/mutations/#deleting-facets":"/mutations/json-mutation-format/#deleting-facets","/mutations/#creating-a-list-with-json-and-interacting-with":"/mutations/json-mutation-format/#creating-a-list-with-json-and-interacting-with","/mutations/#facets-in-list-type-with-json":"/mutations/json-mutation-format/#facets-in-list-type-with-json","/mutations/#specifying-multiple-operations":"/mutations/json-mutation-format/#specifying-multiple-operations","/mutations/#json-syntax-using-raw-http-or-ratel-ui":"/mutations/json-mutation-format/#json-syntax-using-raw-http-or-ratel-ui","/mutations/#using-json-operations-via-curl":"/mutations/json-mutation-format/#using-json-operations-via-curl","/mutations/#uid-function":"/mutations/upsert-block/#uid-function","/mutations/#val-function":"/mutations/upsert-block/#val-function","/mutations/#example-of-uid-function":"/mutations/upsert-block/#example-of-uid-function","/mutations/#example-of-val-function":"/mutations/upsert-block/#example-of-val-function","/mutations/#bulk-delete-example":"/mutations/upsert-block/#bulk-delete-example","/mutations/#example-of-conditional-upsert":"/mutations/conditional-upsert/#example-of-conditional-upsert","/mutations/#example-of-multiple-mutation-blocks":"/mutations/conditional-upsert/#example-of-multiple-mutation-blocks","/enterprise-features/#configure-backup":"/enterprise-features/binary-backups/#configure-backup","/enterprise-features/#configure-amazon-s3-credentials":"/enterprise-features/binary-backups/#configure-amazon-s3-credentials","/enterprise-features/#configure-minio-credentials":"/enterprise-features/binary-backups/#configure-minio-credentials","/enterprise-features/#create-a-backup":"/enterprise-features/binary-backups/#create-a-backup","/enterprise-features/#backup-to-amazon-s3":"/enterprise-features/binary-backups/#backup-to-amazon-s3","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-google-cloud-storage-via-minio-gateway":"/enterprise-features/binary-backups/#backup-to-google-cloud-storage-via-minio-gateway","/enterprise-features/#test-using-minio-browser":"/enterprise-features/binary-backups/#test-using-minio-browser","/enterprise-features/#test-using-minio-client":"/enterprise-features/binary-backups/#test-using-minio-client","/enterprise-features/#disabling-https-for-s3-and-minio-backups":"/enterprise-features/binary-backups/#disabling-https-for-s3-and-minio-backups","/enterprise-features/#overriding-credentials":"/enterprise-features/binary-backups/#overriding-credentials","/enterprise-features/#backup-to-nfs":"/enterprise-features/binary-backups/#backup-to-nfs","/enterprise-features/#forcing-a-full-backup":"/enterprise-features/binary-backups/#forcing-a-full-backup","/enterprise-features/#encrypted-backups":"/enterprise-features/binary-backups/#encrypted-backups","/enterprise-features/#new-flag-“encrypted”-in-manifest.json":"/enterprise-features/binary-backups/#new-flag-“encrypted”-in-manifest.json","/enterprise-features/#aes-and-chaining-with-gzip":"/enterprise-features/binary-backups/#aes-and-chaining-with-gzip","/enterprise-features/#backup":"/enterprise-features/binary-backups/#backup","/enterprise-features/#restore-from-backup":"/enterprise-features/binary-backups/#restore-from-backup","/enterprise-features/#restore-from-amazon-s3":"/enterprise-features/binary-backups/#restore-from-amazon-s3","/enterprise-features/#restore-from-minio":"/enterprise-features/binary-backups/#restore-from-minio","/enterprise-features/#restore-from-local-directory-or-nfs":"/enterprise-features/binary-backups/#restore-from-local-directory-or-nfs","/enterprise-features/#restore-and-update-timestamp":"/enterprise-features/binary-backups/#restore-and-update-timestamp","/enterprise-features/#turn-on-acls":"/enterprise-features/access-control-lists/#turn-on-acls","/enterprise-features/#set-up-acl-rules":"/enterprise-features/access-control-lists/#set-up-acl-rules","/enterprise-features/#using-graphql-admin-api":"/enterprise-features/access-control-lists/#using-graphql-admin-api","/enterprise-features/#retrieve-users-and-groups-information":"/enterprise-features/access-control-lists/#retrieve-users-and-groups-information","/enterprise-features/#using-a-graphql-tool":"/enterprise-features/access-control-lists/#using-a-graphql-tool","/enterprise-features/#access-data-using-a-client":"/enterprise-features/access-control-lists/#access-data-using-a-client","/enterprise-features/#access-data-using-the-graphql-api":"/enterprise-features/access-control-lists/#access-data-using-the-graphql-api","/enterprise-features/#reset-groot-password":"/enterprise-features/access-control-lists/#reset-groot-password","/enterprise-features/#set-up-encryption":"/enterprise-features/encryption-at-rest/#set-up-encryption","/enterprise-features/#turn-on-encryption":"/enterprise-features/encryption-at-rest/#turn-on-encryption","/enterprise-features/#turn-off-encryption":"/enterprise-features/encryption-at-rest/#turn-off-encryption","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/howto/#metrics-information":"/howto/retrieving-debug-information/#metrics-information","/howto/#profiling-information":"/howto/retrieving-debug-information/#profiling-information","/howto/#cpu-profile":"/howto/retrieving-debug-information/#cpu-profile","/howto/#memory-profile":"/howto/retrieving-debug-information/#memory-profile","/howto/#block-profile":"/howto/retrieving-debug-information/#block-profile","/howto/#goroutine-stack":"/howto/retrieving-debug-information/#goroutine-stack","/howto/#example-usage":"/howto/using-debug-tool/#example-usage","/howto/#debug-tool-output":"/howto/using-debug-tool/#debug-tool-output","/howto/#key-lookup":"/howto/using-debug-tool/#key-lookup","/howto/#key-history":"/howto/using-debug-tool/#key-history","/howto/#basic-integration":"/howto/dgraph-sentry-integration/#basic-integration","/howto/#data-handling":"/howto/dgraph-sentry-integration/#data-handling","/howto/#example-usage":"/howto/using-increment-tool/#example-usage","/howto/#increment-tool-output":"/howto/using-increment-tool/#increment-tool-output","/howto/#download-zip":"/howto/load-balancing-nginx/#download-zip","/howto/#start-dgraph-cluster":"/howto/load-balancing-nginx/#start-dgraph-cluster","/howto/#use-the-increment-tool-to-start-a-grpc-lb":"/howto/load-balancing-nginx/#use-the-increment-tool-to-start-a-grpc-lb","/howto/#check-logs":"/howto/load-balancing-nginx/#check-logs","/howto/#upsert-procedure":"/howto/upserts/#upsert-procedure","/howto/#upsert-block":"/howto/upserts/#upsert-block","/howto/#conflicts":"/howto/upserts/#conflicts","/howto/#schema-types-scalar-uid-and-list-uid":"/howto/migrate-dgraph-1-1/#schema-types-scalar-uid-and-list-uid","/howto/#type-system":"/howto/migrate-dgraph-1-1/#type-system","/howto/#live-loader-and-bulk-loader-command-line-flags":"/howto/migrate-dgraph-1-1/#live-loader-and-bulk-loader-command-line-flags","/howto/#http-api":"/howto/migrate-dgraph-1-1/#http-api"},urlSplit,origPath,redirectPaths=["clients","query-language","mutations","deploy","enterprise-features","howto","design-concepts"],pathSplit=document.URL.split("/");redirectPaths.includes(pathSplit[pathSplit.length-2])&&(urlSplit=pathSplit[pathSplit.length-1].split("#"),origPath="/"+pathSplit[pathSplit.length-2]+"/#"+urlSplit[1],origPath in subPaths?(loc=""+subPaths[origPath],window.location.replace(loc)):urlSplit[1]&&(loc=""+pathSplit.slice(4,pathSplit.length-1).join("/")+"/#"+urlSplit[1],window.location.replace(loc)))</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta name=generator content="Hugo 0.101.0"><meta name=description content><link rel=canonical href=/clients/python/><link rel=apple-touch-icon sizes=57x57 href=/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/images/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/images/favicons/manifest.json><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script>
<script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin=anonymous></script>
<link href=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css rel=stylesheet integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin=anonymous><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin=anonymous></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin=anonymous></script>
<script>window.DGRAPH_ENDPOINT="https://play.dgraph.io/query?latency=true"</script><title>Python - Clients</title><link href=/css/theme.css?6a79ff0832398fa8541cbaef6b6dd556 rel=stylesheet><link href=/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script>
<script src=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script>
<link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><link rel=stylesheet href=//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><script>!function(){var t,n,e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(t=0;t<e.methods.length;t++)n=e.methods[t],e[n]=e.factory(n);e.load=function(t,n){var o,s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(s,o),e._loadOptions=n},e._writeKey="aQlf725vSBKhpQnINiGBc6rCtFyVCiAP",e.SNIPPET_VERSION="4.13.2",e.load("aQlf725vSBKhpQnINiGBc6rCtFyVCiAP"),e.page(),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll("a");t.forEach(t=>e.trackLink(t,"Click",{id:t.id,to:t.href,text:t.innerText}))})}}()</script></head><body><nav id=header><div class=header-left><div><a href=https://libremfg.com/features-gql class=brand><img src=/images/libre-logo.png alt=libre class=logo></a><div class=logo-tagline><span>Documentation</span></div></div><ul class=menu><li><a>Libre Baas</a></li></ul></div><div class=header-right><div style=margin-top:10px><div class="menu-search align-middle"><div class=menu-search-inner><input type=search class="form-control form-control-sm" id=algolia-doc-search placeholder="Search documentation" aria-label="Search docs" autocomplete=off></div></div></div><div><ul class=menu><li><a href=https://libremfg.com/features-gql target=_blank>Home</a></li><li><a href=https://www.libremfg.com/pricing-gql/ target=_blank>Pricing</a></li><li><a href=https://discord.gg/vtJ7JE4sha target=_blank>Community</a></li><li><a href=https://github.com/libremfg/libremfg.github.io target=_blank>GitHub</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><div class=menu-header></div><ul class=topics><li class="topic main-topic"><a href=/>Home</a></li><li class="topic main-topic"><a href=/dgraph-overview/>Dgraph Overview</a></li><li class="topic main-topic children"><a id=graphql href=#>GraphQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/quick-start/>Quick Start</a></li><li class="topic sub-topic"><a href=/graphql/how-dgraph-graphql-works/>How GraphQL works in Dgraph</a></li><li class="topic sub-topic"><a href=#>To-Do List App Tutorial</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-schema-design/>Schema Design</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-ui/>Creating a Basic UI</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth-rules/>Authorization Rules</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth0-jwt/>Using Auth0</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-firebase-jwt/>Using Firebase Authentication</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/deploy/>Deploying on Dgraph Cloud</a></li></ul></li><li class="topic sub-topic"><a href=#>Authorization</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/authorization/authorization-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/authorization/directive/>The @auth Directive</a></li><li class="topic sub-topic"><a href=/graphql/authorization/mutations/>Mutations</a></li></ul></li><li class="topic sub-topic"><a href=#>API</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/api/api-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/api/requests/>Requests and Responses</a></li><li class="topic sub-topic"><a href=/graphql/api/variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/graphql/api/fragments/>GraphQL Fragments</a></li><li class="topic sub-topic"><a href=/graphql/api/multiples/>Multiple GraphQL Operations in a Request</a></li><li class="topic sub-topic"><a href=/graphql/api/errors/>GraphQL Errors</a></li></ul></li><li class="topic sub-topic"><a href=#>Schema</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/schema/schema-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/schema/reserved/>Reserved Names</a></li><li class="topic sub-topic"><a href=/graphql/schema/migration/>Schema Migration</a></li><li class="topic sub-topic"><a href=/graphql/schema/types/>Types</a></li><li class="topic sub-topic"><a href=/graphql/schema/ids/>IDs</a></li><li class="topic sub-topic"><a href=/graphql/schema/graph-links/>Links in the Graph</a></li><li class="topic sub-topic"><a href=/graphql/schema/search/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/schema/generate/>The @generate Directive</a></li><li class="topic sub-topic"><a href=/graphql/schema/documentation/>Documentation and Comments</a></li><li class="topic sub-topic"><a href=/graphql/schema/deprecated/>Deprecation</a></li><li class="topic sub-topic"><a href=/graphql/schema/dgraph-schema/>Dgraph Schema Fragment</a></li></ul></li><li class="topic sub-topic"><a href=#>Queries</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/queries/queries-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/queries/search-filtering/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/queries/aggregate/>Aggregate Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/persistent-queries/>Persistent Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/and-or-not/>And, Or and Not</a></li><li class="topic sub-topic"><a href=/graphql/queries/cached-results/>Cached Results</a></li><li class="topic sub-topic"><a href=/graphql/queries/order-page/>Order and Pagination</a></li><li class="topic sub-topic"><a href=/graphql/queries/cascade/>@cascade Directive</a></li><li class="topic sub-topic"><a href=/graphql/queries/skip-include/>@skip and @include Directives</a></li></ul></li><li class="topic sub-topic"><a href=#>Mutations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/mutations/mutations-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/mutations/add/>Add</a></li><li class="topic sub-topic"><a href=/graphql/mutations/upsert/>Upsert</a></li><li class="topic sub-topic"><a href=/graphql/mutations/update/>Update</a></li><li class="topic sub-topic"><a href=/graphql/mutations/delete/>Delete</a></li><li class="topic sub-topic"><a href=/graphql/mutations/deep/>Deep</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/subscriptions/>Subscriptions</a></li><li class="topic sub-topic"><a href=#>Custom Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/custom/custom-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/custom/directive/>The @custom Directive</a></li><li class="topic sub-topic"><a href=/graphql/custom/query/>Custom Queries</a></li><li class="topic sub-topic"><a href=/graphql/custom/mutation/>Custom Mutations</a></li><li class="topic sub-topic"><a href=/graphql/custom/field/>Custom Fields</a></li><li class="topic sub-topic"><a href=/graphql/custom/dql/>Custom DQL</a></li></ul></li><li class="topic sub-topic"><a href=#>Lambda Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/lambda/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/lambda/field/>Lambda Fields</a></li><li class="topic sub-topic"><a href=/graphql/lambda/query/>Lambda Queries</a></li><li class="topic sub-topic"><a href=/graphql/lambda/mutation/>Lambda Mutations</a></li><li class="topic sub-topic"><a href=/graphql/lambda/webhook/>Lambda Webhooks</a></li><li class="topic sub-topic"><a href=/graphql/lambda/server/>Lambda Server</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/directives/>Directives</a></li><li class="topic sub-topic"><a href=/graphql/admin/>Administrative API</a></li><li class="topic sub-topic"><a href=/graphql/dgraph/>GraphQL on Existing Dgraph</a></li><li class="topic sub-topic"><a href=/graphql/federation/>Apollo Federation</a></li></ul></li><li class="topic main-topic children"><a id=dql href=#>DQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/get-started/>Get Started</a></li><li class="topic sub-topic"><a href=/tutorials/>Tutorials</a></li><li class="topic sub-topic"><a href=#>Query Language Reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/query-language/graphql-fundamentals/>DQL Fundamentals</a></li><li class="topic sub-topic"><a href=/query-language/functions/>Functions</a></li><li class="topic sub-topic"><a href=/query-language/connecting-filters/>Connecting Filters</a></li><li class="topic sub-topic"><a href=/query-language/alias/>Aliases</a></li><li class="topic sub-topic"><a href=/query-language/pagination/>Pagination in DQL</a></li><li class="topic sub-topic"><a href=/query-language/count/>Count</a></li><li class="topic sub-topic"><a href=/query-language/sorting/>Sorting</a></li><li class="topic sub-topic"><a href=/query-language/multiple-query-blocks/>Multiple Query Blocks</a></li><li class="topic sub-topic"><a href=/query-language/query-variables/>Query Variables</a></li><li class="topic sub-topic"><a href=/query-language/value-variables/>Value Variables</a></li><li class="topic sub-topic"><a href=/query-language/aggregation/>Aggregation</a></li><li class="topic sub-topic"><a href=/query-language/math-on-value-variables/>Math on Value Variables</a></li><li class="topic sub-topic"><a href=/query-language/groupby/>GroupBy</a></li><li class="topic sub-topic"><a href=/query-language/expand-predicates/>Expand Predicates</a></li><li class="topic sub-topic"><a href=/query-language/cascade-directive/>Cascade Directive</a></li><li class="topic sub-topic"><a href=/query-language/normalize-directive/>@normalize Directive</a></li><li class="topic sub-topic"><a href=/query-language/ignorereflex-directive/>@ignorereflex Directive</a></li><li class="topic sub-topic"><a href=/query-language/debug/>Debug</a></li><li class="topic sub-topic"><a href=/query-language/schema/>Schemas in DQL</a></li><li class="topic sub-topic"><a href=/query-language/type-system/>Type System</a></li><li class="topic sub-topic"><a href=/query-language/facets/>Facets and Edge Attributes</a></li><li class="topic sub-topic"><a href=/query-language/kshortest-path-quries/>Shortest Path Queries</a></li><li class="topic sub-topic"><a href=/query-language/recurse-query/>Recurse Query</a></li><li class="topic sub-topic"><a href=/query-language/fragments/>Fragments</a></li><li class="topic sub-topic"><a href=/query-language/graphql-variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/query-language/indexing-custom-tokenizers/>Indexing with Custom Tokenizers</a></li></ul></li><li class="topic sub-topic"><a href=/tips/>Tips and Tricks</a></li><li class="topic sub-topic"><a href=#>Mutations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/mutations/triples/>Triples</a></li><li class="topic sub-topic"><a href=/mutations/blank-nodes/>Blank Nodes and UIDs</a></li><li class="topic sub-topic"><a href=/mutations/external-ids/>External IDs</a></li><li class="topic sub-topic"><a href=/mutations/external-ids-upsert-block/>External IDs and Upsert Block</a></li><li class="topic sub-topic"><a href=/mutations/language-rdf-types/>Language and RDF Types</a></li><li class="topic sub-topic"><a href=/mutations/batch-mutations/>Batch Mutations</a></li><li class="topic sub-topic"><a href=/mutations/delete/>Delete</a></li><li class="topic sub-topic"><a href=/mutations/facets-in-list-type-with-rdf/>Facet Lists in RDF</a></li><li class="topic sub-topic"><a href=/mutations/mutations-using-curl/>Mutations Using cURL</a></li><li class="topic sub-topic"><a href=/mutations/json-mutation-format/>JSON Mutation Format</a></li><li class="topic sub-topic"><a href=/mutations/upsert-block/>Upsert Blocks</a></li><li class="topic sub-topic"><a href=/mutations/conditional-upsert/>Conditional Upsert</a></li><li class="topic sub-topic"><a href=/mutations/reverse-edges/>Reverse Edges</a></li></ul></li></ul></li><li class="topic main-topic children active"><a id=clients href=#>Clients</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/clients/overview/>Overview</a></li><li class="topic sub-topic"><a href=/clients/go/>Go</a></li><li class="topic sub-topic"><a href=/clients/csharp/>C#</a></li><li class="topic sub-topic"><a href=/clients/java/>Java</a></li><li class="topic sub-topic"><a href=#>JavaScript</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/clients/javascript/grpc/>gRPC Client</a></li><li class="topic sub-topic"><a href=/clients/javascript/http/>HTTP Client</a></li></ul></li><li class="topic sub-topic active"><a href=/clients/python/>Python</a></li><li class="topic sub-topic"><a href=/clients/unofficial-clients/>Unofficial Dgraph Clients</a></li><li class="topic sub-topic"><a href=/clients/raw-http/>Raw HTTP</a></li></ul></li><li class="topic main-topic children"><a id=ratel-ui href=#>Ratel UI</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/ratel/overview/>Ratel Overview</a></li><li class="topic sub-topic"><a href=/ratel/connection/>Connection</a></li><li class="topic sub-topic"><a href=/ratel/console/>Console</a></li><li class="topic sub-topic"><a href=/ratel/schema/>Schema</a></li><li class="topic sub-topic"><a href=/ratel/cluster/>Cluster</a></li><li class="topic sub-topic"><a href=/ratel/backups/>Backups</a></li></ul></li><li class="topic main-topic children"><a id=deploy-and-manage href=#>Deploy and Manage</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/overview/>Deployment and Management Overview</a></li><li class="topic sub-topic"><a href=/deploy/download/>Download Dgraph</a></li><li class="topic sub-topic"><a href=/deploy/config/>Configuration</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-zero/>More about Dgraph Zero</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-alpha/>More about Dgraph Alpha</a></li><li class="topic sub-topic"><a href=/deploy/single-host-setup/>Single Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/multi-host-setup/>Multi-Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/kubernetes/>Using Kubernetes</a></li><li class="topic sub-topic"><a href=/deploy/cluster-setup/>Cluster Setup</a></li><li class="topic sub-topic"><a href=/deploy/cluster-checklist/>Cluster Checklist</a></li><li class="topic sub-topic"><a href=/deploy/production-checklist/>Production Checklist</a></li><li class="topic sub-topic"><a href=#>Administration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/dgraph-administration/>Dgraph Administration</a></li><li class="topic sub-topic"><a href=/deploy/log-format/>Logging</a></li><li class="topic sub-topic"><a href=/deploy/ludicrous-mode/>Ludicrous Mode</a></li><li class="topic sub-topic"><a href=/deploy/monitoring/>Monitoring</a></li><li class="topic sub-topic"><a href=/deploy/metrics/>Metrics</a></li><li class="topic sub-topic"><a href=/deploy/tracing/>Tracing</a></li><li class="topic sub-topic"><a href=/deploy/data-compression/>Data compression on Disk</a></li></ul></li><li class="topic sub-topic"><a href=#>Fast Data Loading</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/fast-data-loading/overview/>Overview</a></li><li class="topic sub-topic"><a href=/deploy/fast-data-loading/bulk-loader/>Bulk Loader</a></li><li class="topic sub-topic"><a href=/deploy/fast-data-loading/live-loader/>Live Loader</a></li></ul></li><li class="topic sub-topic"><a href=#>Security</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/ports-usage/>Ports Usage</a></li><li class="topic sub-topic"><a href=/deploy/tls-configuration/>TLS Configuration</a></li></ul></li><li class="topic sub-topic"><a href=/deploy/decrypt/>Data Decryption</a></li><li class="topic sub-topic"><a href=/deploy/cli-command-reference/>Dgraph CLI Reference</a></li><li class="topic sub-topic"><a href=/deploy/troubleshooting/>Troubleshooting</a></li></ul></li><li class="topic main-topic children"><a id=enterprise-features href=#>Enterprise Features</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/enterprise-features/access-control-lists/>Access Control Lists</a></li><li class="topic sub-topic"><a href=/enterprise-features/audit-logs/>Audit Logging</a></li><li class="topic sub-topic"><a href=/enterprise-features/lsbackup/>Backup List Tool</a></li><li class="topic sub-topic"><a href=/enterprise-features/binary-backups/>Binary Backups</a></li><li class="topic sub-topic"><a href=/enterprise-features/change-data-capture/>Change Data Capture</a></li><li class="topic sub-topic"><a href=/enterprise-features/encryption-at-rest/>Encryption at Rest</a></li><li class="topic sub-topic"><a href=/enterprise-features/learner-nodes/>Learner Nodes</a></li><li class="topic sub-topic"><a href=/enterprise-features/license/>License</a></li><li class="topic sub-topic"><a href=/enterprise-features/multitenancy/>Multi-Tenancy</a></li></ul></li><li class="topic main-topic children"><a id=migration href=#>Migration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/migration/loading-csv-data/>Loading CSV Data</a></li><li class="topic sub-topic"><a href=/migration/migrate-tool/>Migration Tool</a></li><li class="topic sub-topic"><a href=/migration/migrate-dgraph-1-1/>Migrate from Dgraph v1.0</a></li><li class="topic sub-topic"><a href=/migration/dgraph-compared-to-other-databases/>Dgraph Compared to Other Databases</a></li></ul></li><li class="topic main-topic"><a href=/faq/>FAQ</a></li><li class="topic main-topic children"><a id=how-to-guides href=#>How To Guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/howto/retrieving-debug-information/>Retrieving Debug Information</a></li><li class="topic sub-topic"><a href=/howto/completion/>Shell Completion</a></li><li class="topic sub-topic"><a href=/howto/using-debug-tool/>Using the Debug Tool</a></li><li class="topic sub-topic"><a href=/howto/dgraph-sentry-integration/>Using the Dgraph Sentry Integration</a></li><li class="topic sub-topic"><a href=/howto/using-increment-tool/>Using the Increment Tool</a></li><li class="topic sub-topic"><a href=/howto/giving-nodes-type/>Giving Nodes a Type</a></li><li class="topic sub-topic"><a href=/howto/login-system/>A Simple Login System</a></li><li class="topic sub-topic"><a href=/howto/load-balancing-nginx/>Load Balancing Queries with NGINX</a></li><li class="topic sub-topic"><a href=/howto/upserts/>Upserts</a></li><li class="topic sub-topic"><a href=/howto/jepsen-tests/>Run Jepsen Tests</a></li><li class="topic sub-topic"><a href=/howto/concurrent-modification-java-multithreaded/>Concurrent mutations and conflicts</a></li><li class="topic sub-topic"><a href=/howto/lambda-webhooks-example/>Lambda Webhooks Example</a></li></ul></li><li class="topic main-topic children"><a id=design-concepts href=#>Design Concepts</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/design-concepts/transactions-faq/>Transactions: FAQ</a></li><li class="topic sub-topic"><a href=/design-concepts/consistency-model/>Consistency Model</a></li><li class="topic sub-topic"><a href=/design-concepts/concepts/>Concepts</a></li><li class="topic sub-topic"><a href=/design-concepts/minimizing-network-calls/>How Dgraph Minimizes Network Calls</a></li><li class="topic sub-topic"><a href=/design-concepts/raft/>RAFT</a></li></ul></li><li class="topic main-topic"><a href=/releases/>Releases</a></li></ul><ul class=sidebar-menu><li><a href=https://dgraph.io/ target=_blank>Home</a></li><li><a href=https://discuss.dgraph.io/ target=_blank>Community</a></li><li><a href=https://github.com/dgraph-io/dgraph target=_blank>GitHub</a></li></ul></aside><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#supported-versions>Supported Versions</a></li><li><a href=#using-a-client>Using a client</a><ul><li><a href=#creating-a-client>Creating a Client</a></li><li><a href=#multi-tenancy>Multi-tenancy</a></li><li><a href=#creating-a-client-for-dgraph-cloud-endpoint>Creating a Client for Dgraph Cloud Endpoint</a></li><li><a href=#altering-the-database>Altering the Database</a></li><li><a href=#creating-a-transaction>Creating a Transaction</a></li><li><a href=#running-a-mutation>Running a Mutation</a></li><li><a href=#committing-a-transaction>Committing a Transaction</a></li><li><a href=#running-a-query>Running a Query</a></li><li><a href=#running-an-upsert-query--mutation>Running an Upsert: Query + Mutation</a></li><li><a href=#running-a-conditional-upsert>Running a Conditional Upsert</a></li><li><a href=#cleaning-up-resources>Cleaning Up Resources</a></li><li><a href=#setting-metadata-headers>Setting Metadata Headers</a></li><li><a href=#setting-a-timeout>Setting a timeout</a></li><li><a href=#passing-credentials>Passing credentials</a></li><li><a href=#authenticating-to-a-reverse-tls-proxy>Authenticating to a reverse TLS proxy</a></li><li><a href=#async-methods>Async methods</a></li></ul></li></ul></nav></div><article><a class=question-btn target=_blank href=https://discuss.dgraph.io/c/docs/49><i class="fa fa-question-circle"></i> Ask a Question</a><h1 class=post-title>Python</h1><div><p>Official Dgraph client implementation for Python (Python >= v2.7 and >= v3.5), using <a href=https://grpc.io/>gRPC</a>.
This client follows the <a href=/clients/go/>Dgraph Go client</a> closely.</p><div class="notices tip"><span class=type>Tip</span> The official Python client <a href=https://github.com/dgraph-io/pydgraph>can be found here</a>.
Follow the <a href=https://github.com/dgraph-io/pydgraph#install>install instructions</a> to get it
up and running.</div><h2 id=supported-versions>Supported Versions</h2><p>More details on the supported versions can be found at <a href=https://github.com/dgraph-io/pydgraph#supported-versions>this link</a>.</p><h2 id=using-a-client>Using a client</h2><div class="notices tip"><span class=type>Tip</span> You can get a <a href=https://github.com/dgraph-io/pydgraph/tree/master/examples/simple>simple example</a>
project, which contains an end-to-end working example of how to use the Python client.</div><h3 id=creating-a-client>Creating a Client</h3><p>You can initialize a <code>DgraphClient</code> object by passing it a list of
<code>DgraphClientStub</code> clients as variadic arguments. Connecting to multiple Dgraph
servers in the same cluster allows for better distribution of workload.</p><p>The following code snippet shows just one connection.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#00f>import</span> pydgraph
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>client_stub = pydgraph.DgraphClientStub(<span style=color:#a31515>&#39;localhost:9080&#39;</span>)
</span></span><span style=display:flex><span>client = pydgraph.DgraphClient(client_stub)
</span></span></code></pre></div><h3 id=multi-tenancy>Multi-tenancy</h3><p>In <a href=/enterprise-features/multitenancy/>multi-tenancy</a> environments, PyDgraph provides a new method <code>login_into_namespace()</code>,
which will allow the users to login to a specific namespace.</p><p>In order to create a python client, and make the client login into namespace <code>123</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client_stub = pydgraph.DgraphClientStub(<span style=color:#a31515>&#39;localhost:9080&#39;</span>)
</span></span><span style=display:flex><span>client = pydgraph.DgraphClient(client_stub)
</span></span><span style=display:flex><span>// Login to namespace groot user of namespace 123
</span></span><span style=display:flex><span>client.login_into_namespace(<span style=color:#a31515>&#34;groot&#34;</span>, <span style=color:#a31515>&#34;password&#34;</span>, <span style=color:#a31515>&#34;123&#34;</span>)
</span></span></code></pre></div><p>In the example above, the client logs into namespace <code>123</code> using username <code>groot</code> and password <code>password</code>.
Once logged in, the client can perform all the operations allowed to the <code>groot</code> user of namespace <code>123</code>.</p><h3 id=creating-a-client-for-dgraph-cloud-endpoint>Creating a Client for Dgraph Cloud Endpoint</h3><p>If you want to connect to Dgraph running on your <a href=https://cloud.dgraph.io>Dgraph Cloud</a> instance, then all you need is the URL of your Dgraph Cloud endpoint and the API key. You can get a client using them as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#00f>import</span> pydgraph
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>client_stub = pydgraph.DgraphClientStub.from_cloud(<span style=color:#a31515>&#34;https://frozen-mango.eu-central-1.aws.cloud.dgraph.io/graphql&#34;</span>, <span style=color:#a31515>&#34;&lt;api-key&gt;&#34;</span>)
</span></span><span style=display:flex><span>client = pydgraph.DgraphClient(client_stub)
</span></span></code></pre></div><div class="notices note"><span class=type>Note</span> The <code>DgraphClientStub.from_slash_endpoint()</code> method has been deprecated and will be removed in v21.07. Please use <code>DgraphClientStub.from_cloud()</code> instead.</div><h3 id=altering-the-database>Altering the Database</h3><p>To set the schema, create an <code>Operation</code> object, set the schema and pass it to
<code>DgraphClient#alter(Operation)</code> method.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>schema = <span style=color:#a31515>&#39;name: string @index(exact) .&#39;</span>
</span></span><span style=display:flex><span>op = pydgraph.Operation(schema=schema)
</span></span><span style=display:flex><span>client.alter(op)
</span></span></code></pre></div><p>Starting with Dgraph version 20.03.0, indexes can be computed in the background.
You can set the <code>run_in_background</code> field of <code>pydgraph.Operation</code> to <code>True</code>
before passing it to the <code>Alter</code> function. You can find more details
<a href=https://docs.dgraph.io/master/query-language/#indexes-in-background>here</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>schema = <span style=color:#a31515>&#39;name: string @index(exact) .&#39;</span>
</span></span><span style=display:flex><span>op = pydgraph.Operation(schema=schema, run_in_background=<span style=color:#00f>True</span>)
</span></span><span style=display:flex><span>client.alter(op)
</span></span></code></pre></div><p><code>Operation</code> contains other fields as well, including the <code>drop</code> predicate and <code>drop all</code>.
Drop all is useful if you wish to discard all the data, and start with a clean
slate, without bringing the instance down.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green># Drop all data including schema from the Dgraph instance. This is a useful</span>
</span></span><span style=display:flex><span><span style=color:green># for small examples such as this since it puts Dgraph into a clean state.</span>
</span></span><span style=display:flex><span>op = pydgraph.Operation(drop_all=<span style=color:#00f>True</span>)
</span></span><span style=display:flex><span>client.alter(op)
</span></span></code></pre></div><h3 id=creating-a-transaction>Creating a Transaction</h3><p>To create a transaction, call the <code>DgraphClient#txn()</code> method, which returns a
new <code>Txn</code> object. This operation incurs no network overhead.</p><p>It is good practice to call <code>Txn#discard()</code> in a <code>finally</code> block after running
the transaction. Calling <code>Txn#discard()</code> after <code>Txn#commit()</code> is a no-op
and you can call <code>Txn#discard()</code> multiple times with no additional side-effects.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>txn = client.txn()
</span></span><span style=display:flex><span><span style=color:#00f>try</span>:
</span></span><span style=display:flex><span>  <span style=color:green># Do something here</span>
</span></span><span style=display:flex><span>  <span style=color:green># ...</span>
</span></span><span style=display:flex><span><span style=color:#00f>finally</span>:
</span></span><span style=display:flex><span>  txn.discard()
</span></span><span style=display:flex><span>  <span style=color:green># ...</span>
</span></span></code></pre></div><p>To create a read-only transaction, call <code>DgraphClient#txn(read_only=True)</code>.
Read-only transactions are ideal for transactions which only involve queries.
Mutations and commits are not allowed.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>txn = client.txn(read_only=<span style=color:#00f>True</span>)
</span></span><span style=display:flex><span><span style=color:#00f>try</span>:
</span></span><span style=display:flex><span>  <span style=color:green># Do some queries here</span>
</span></span><span style=display:flex><span>  <span style=color:green># ...</span>
</span></span><span style=display:flex><span><span style=color:#00f>finally</span>:
</span></span><span style=display:flex><span>  txn.discard()
</span></span><span style=display:flex><span>  <span style=color:green># ...</span>
</span></span></code></pre></div><p>To create a read-only transaction that executes best-effort queries, call
<code>DgraphClient#txn(read_only=True, best_effort=True)</code>. Best-effort queries are
faster than normal queries because they bypass the normal consensus protocol.
For this same reason, best-effort queries cannot guarantee to return the latest
data. Best-effort queries are only supported by read-only transactions.</p><h3 id=running-a-mutation>Running a Mutation</h3><p><code>Txn#mutate(mu=Mutation)</code> runs a mutation. It takes in a <code>Mutation</code> object,
which provides two main ways to set data: JSON and RDF N-Quad. You can choose
whichever way is convenient.</p><p><code>Txn#mutate()</code> provides convenience keyword arguments <code>set_obj</code> and <code>del_obj</code>
for setting JSON values and <code>set_nquads</code> and <code>del_nquads</code> for setting N-Quad
values. See examples below for usage.</p><p>We define a person object to represent a person and use it in a transaction.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green># Create data.</span>
</span></span><span style=display:flex><span>p = {
</span></span><span style=display:flex><span>    <span style=color:#a31515>&#39;name&#39;</span>: <span style=color:#a31515>&#39;Alice&#39;</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Run mutation.</span>
</span></span><span style=display:flex><span>txn.mutate(set_obj=p)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># If you want to use a mutation object, use this instead:</span>
</span></span><span style=display:flex><span><span style=color:green># mu = pydgraph.Mutation(set_json=json.dumps(p).encode(&#39;utf8&#39;))</span>
</span></span><span style=display:flex><span><span style=color:green># txn.mutate(mu)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># If you want to use N-Quads, use this instead:</span>
</span></span><span style=display:flex><span><span style=color:green># txn.mutate(set_nquads=&#39;_:alice &lt;name&gt; &#34;Alice&#34; .&#39;)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green># Delete data.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>query = <span style=color:#a31515>&#34;&#34;&#34;query all($a: string)
</span></span></span><span style=display:flex><span><span style=color:#a31515> {
</span></span></span><span style=display:flex><span><span style=color:#a31515>   all(func: eq(name, $a))
</span></span></span><span style=display:flex><span><span style=color:#a31515>    {
</span></span></span><span style=display:flex><span><span style=color:#a31515>      uid
</span></span></span><span style=display:flex><span><span style=color:#a31515>    }
</span></span></span><span style=display:flex><span><span style=color:#a31515>  }&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>variables = {<span style=color:#a31515>&#39;$a&#39;</span>: <span style=color:#a31515>&#39;Bob&#39;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res = txn.query(query, variables=variables)
</span></span><span style=display:flex><span>ppl = json.loads(res.json)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># For a mutation to delete a node, use this:</span>
</span></span><span style=display:flex><span>txn.mutate(del_obj=person)
</span></span></code></pre></div><p>For a complete example with multiple fields and relationships, look at the
[simple project][simple] in the <code>examples</code> folder.</p><p>Sometimes, you only want to commit a mutation, without querying anything further.
In such cases, you can set the keyword argument <code>commit_now=True</code> to indicate
that the mutation must be immediately committed.</p><p>A mutation can be executed using <code>txn.do_request</code> as well.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>mutation = txn.create_mutation(set_nquads=<span style=color:#a31515>&#39;_:alice &lt;name&gt; &#34;Alice&#34; .&#39;</span>)
</span></span><span style=display:flex><span>request = txn.create_request(mutations=[mutation], commit_now=<span style=color:#00f>True</span>)
</span></span><span style=display:flex><span>txn.do_request(request)
</span></span></code></pre></div><h3 id=committing-a-transaction>Committing a Transaction</h3><p>A transaction can be committed using the <code>Txn#commit()</code> method. If your transaction
consist solely of <code>Txn#query</code> or <code>Txn#queryWithVars</code> calls, and no calls to
<code>Txn#mutate</code>, then calling <code>Txn#commit()</code> is not necessary.</p><p>An error is raised if another transaction(s) modify the same data concurrently that was
modified in the current transaction. It is up to the user to retry transactions
when they fail.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>txn = client.txn()
</span></span><span style=display:flex><span><span style=color:#00f>try</span>:
</span></span><span style=display:flex><span>  <span style=color:green># ...</span>
</span></span><span style=display:flex><span>  <span style=color:green># Perform any number of queries and mutations</span>
</span></span><span style=display:flex><span>  <span style=color:green># ...</span>
</span></span><span style=display:flex><span>  <span style=color:green># and finally...</span>
</span></span><span style=display:flex><span>  txn.commit()
</span></span><span style=display:flex><span><span style=color:#00f>except</span> pydgraph.AbortedError:
</span></span><span style=display:flex><span>  <span style=color:green># Retry or handle exception.</span>
</span></span><span style=display:flex><span><span style=color:#00f>finally</span>:
</span></span><span style=display:flex><span>  <span style=color:green># Clean up. Calling this after txn.commit() is a no-op</span>
</span></span><span style=display:flex><span>  <span style=color:green># and hence safe.</span>
</span></span><span style=display:flex><span>  txn.discard()
</span></span></code></pre></div><h3 id=running-a-query>Running a Query</h3><p>You can run a query by calling <code>Txn#query(string)</code>. You will need to pass in a
<a href=https://dgraph.io/docs/query-language/>DQL</a> query string. If you want to pass an additional dictionary of any
variables that you might want to set in the query, call
<code>Txn#query(string, variables=d)</code> with the variables dictionary <code>d</code>.</p><p>The query response contains the <code>json</code> field, which returns the JSON response.</p><p>Let’s run a query with a variable <code>$a</code>, deserialize the result from JSON and
print it out:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green># Run query.</span>
</span></span><span style=display:flex><span>query = <span style=color:#a31515>&#34;&#34;&#34;query all($a: string) {
</span></span></span><span style=display:flex><span><span style=color:#a31515>  all(func: eq(name, $a))
</span></span></span><span style=display:flex><span><span style=color:#a31515>  {
</span></span></span><span style=display:flex><span><span style=color:#a31515>    name
</span></span></span><span style=display:flex><span><span style=color:#a31515>  }
</span></span></span><span style=display:flex><span><span style=color:#a31515>}&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>variables = {<span style=color:#a31515>&#39;$a&#39;</span>: <span style=color:#a31515>&#39;Alice&#39;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res = txn.query(query, variables=variables)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># If not doing a mutation in the same transaction, simply use:</span>
</span></span><span style=display:flex><span><span style=color:green># res = client.txn(read_only=True).query(query, variables=variables)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ppl = json.loads(res.json)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Print results.</span>
</span></span><span style=display:flex><span>print(<span style=color:#a31515>&#39;Number of people named &#34;Alice&#34;: </span><span style=color:#a31515>{}</span><span style=color:#a31515>&#39;</span>.format(len(ppl[<span style=color:#a31515>&#39;all&#39;</span>])))
</span></span><span style=display:flex><span><span style=color:#00f>for</span> person <span style=color:#00f>in</span> ppl[<span style=color:#a31515>&#39;all&#39;</span>]:
</span></span><span style=display:flex><span>  print(person)
</span></span></code></pre></div><p>This should print:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>Number of people named &#34;Alice&#34;: 1
</span></span><span style=display:flex><span>Alice
</span></span></code></pre></div><p>You can also use <code>txn.do_request</code> function to run the query.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>request = txn.create_request(query=query)
</span></span><span style=display:flex><span>txn.do_request(request)
</span></span></code></pre></div><h3 id=running-an-upsert-query--mutation>Running an Upsert: Query + Mutation</h3><p>The <code>txn.do_request</code> function allows you to use upsert blocks. An upsert block
contains one query block and one or more mutation blocks, so it lets you perform
queries and mutations in a single request. Variables defined in the query block
can be used in the mutation blocks using the <code>uid</code> and <code>val</code> functions
implemented by DQL.</p><p>To learn more about upsert blocks, see the
<a href=https://dgraph.io/docs/mutations/upsert-block/>Upsert Block documentation</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>query = <span style=color:#a31515>&#34;&#34;&#34;{
</span></span></span><span style=display:flex><span><span style=color:#a31515>  u as var(func: eq(name, &#34;Alice&#34;))
</span></span></span><span style=display:flex><span><span style=color:#a31515>}&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>nquad = <span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>  uid(u) &lt;name&gt; &#34;Alice&#34; .
</span></span></span><span style=display:flex><span><span style=color:#a31515>  uid(u) &lt;age&gt; &#34;25&#34; .
</span></span></span><span style=display:flex><span><span style=color:#a31515>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>mutation = txn.create_mutation(set_nquads=nquad)
</span></span><span style=display:flex><span>request = txn.create_request(query=query, mutations=[mutation], commit_now=<span style=color:#00f>True</span>)
</span></span><span style=display:flex><span>txn.do_request(request)
</span></span></code></pre></div><h3 id=running-a-conditional-upsert>Running a Conditional Upsert</h3><p>The upsert block also allows specifying a conditional mutation block using an <code>@if</code> directive. The mutation is executed
only when the specified condition is true. If the condition is false, the mutation is silently ignored.</p><p>See more about Conditional Upserts <a href=https://docs.dgraph.io/mutations/#conditional-upsert>here</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>query = <span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>  {
</span></span></span><span style=display:flex><span><span style=color:#a31515>    user as var(func: eq(email, &#34;wrong_email@dgraph.io&#34;))
</span></span></span><span style=display:flex><span><span style=color:#a31515>  }
</span></span></span><span style=display:flex><span><span style=color:#a31515>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>cond = <span style=color:#a31515>&#34;@if(eq(len(user), 1))&#34;</span>
</span></span><span style=display:flex><span>nquads = <span style=color:#a31515>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#a31515>  uid(user) &lt;email&gt; &#34;correct_email@dgraph.io&#34; .
</span></span></span><span style=display:flex><span><span style=color:#a31515>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>mutation = txn.create_mutation(cond=cond, set_nquads=nquads)
</span></span><span style=display:flex><span>request = txn.create_request(mutations=[mutation], query=query, commit_now=<span style=color:#00f>True</span>)
</span></span><span style=display:flex><span>txn.do_request(request)
</span></span></code></pre></div><h3 id=cleaning-up-resources>Cleaning Up Resources</h3><p>To clean up resources, you have to call <code>DgraphClientStub#close()</code> individually for
all the instances of <code>DgraphClientStub</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>SERVER_ADDR = <span style=color:#a31515>&#34;localhost:9080&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Create instances of DgraphClientStub.</span>
</span></span><span style=display:flex><span>stub1 = pydgraph.DgraphClientStub(SERVER_ADDR)
</span></span><span style=display:flex><span>stub2 = pydgraph.DgraphClientStub(SERVER_ADDR)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Create an instance of DgraphClient.</span>
</span></span><span style=display:flex><span>client = pydgraph.DgraphClient(stub1, stub2)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># ...</span>
</span></span><span style=display:flex><span><span style=color:green># Use client</span>
</span></span><span style=display:flex><span><span style=color:green># ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Clean up resources by closing all client stubs.</span>
</span></span><span style=display:flex><span>stub1.close()
</span></span><span style=display:flex><span>stub2.close()
</span></span></code></pre></div><h3 id=setting-metadata-headers>Setting Metadata Headers</h3><p>Metadata headers such as authentication tokens can be set through the metadata of gRPC methods. Below is an example of how to set a header named &ldquo;auth-token&rdquo;.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green># The following piece of code shows how one can set metadata with</span>
</span></span><span style=display:flex><span><span style=color:green># auth-token, to allow Alter operation, if the server requires it.</span>
</span></span><span style=display:flex><span><span style=color:green># metadata is a list of arbitrary key-value pairs.</span>
</span></span><span style=display:flex><span>metadata = [(<span style=color:#a31515>&#34;auth-token&#34;</span>, <span style=color:#a31515>&#34;the-auth-token-value&#34;</span>)]
</span></span><span style=display:flex><span>dg.alter(op, metadata=metadata)
</span></span></code></pre></div><h3 id=setting-a-timeout>Setting a timeout</h3><p>A timeout value representing the number of seconds can be passed to the <code>login</code>,
<code>alter</code>, <code>query</code>, and <code>mutate</code> methods using the <code>timeout</code> keyword argument.</p><p>For example, the following alters the schema with a timeout of ten seconds:
<code>dg.alter(op, timeout=10)</code></p><h3 id=passing-credentials>Passing credentials</h3><p>A <code>CallCredentials</code> object can be passed to the <code>login</code>, <code>alter</code>, <code>query</code>, and
<code>mutate</code> methods using the <code>credentials</code> keyword argument.</p><h3 id=authenticating-to-a-reverse-tls-proxy>Authenticating to a reverse TLS proxy</h3><p>If the Dgraph instance is behind a reverse TLS proxy, credentials can also be
passed through the methods available in the gRPC library. Note that in this case
every request will need to include the credentials. In the example below, we are
trying to add authentication to a proxy that requires an API key. This value is
expected to be included in the metadata using the key &ldquo;authorization&rdquo;.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>creds = grpc.ssl_channel_credentials()
</span></span><span style=display:flex><span>call_credentials = grpc.metadata_call_credentials(
</span></span><span style=display:flex><span>    <span style=color:#00f>lambda</span> context, callback: callback(((<span style=color:#a31515>&#34;authorization&#34;</span>, <span style=color:#a31515>&#34;&lt;api-key&gt;&#34;</span>),), <span style=color:#00f>None</span>))
</span></span><span style=display:flex><span>composite_credentials = grpc.composite_channel_credentials(creds, call_credentials)
</span></span><span style=display:flex><span>client_stub = pydgraph.DgraphClientStub(
</span></span><span style=display:flex><span>    <span style=color:#a31515>&#39;</span><span style=color:#a31515>{host}</span><span style=color:#a31515>:</span><span style=color:#a31515>{port}</span><span style=color:#a31515>&#39;</span>.format(host=GRPC_HOST, port=GRPC_PORT), composite_credentials)
</span></span><span style=display:flex><span>client = pydgraph.DgraphClient(client_stub)
</span></span></code></pre></div><h3 id=async-methods>Async methods</h3><p>The <code>alter</code> method in the client has an asynchronous version called
<code>async_alter</code>. The async methods return a future. You can directly call the
<code>result</code> method on the future. However. The DgraphClient class provides a static
method <code>handle_alter_future</code> to handle any possible exception.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>alter_future = self.client.async_alter(pydgraph.Operation(
</span></span><span style=display:flex><span>	schema=<span style=color:#a31515>&#34;name: string @index(term) .&#34;</span>))
</span></span><span style=display:flex><span>response = pydgraph.DgraphClient.handle_alter_future(alter_future)
</span></span></code></pre></div><p>The <code>query</code> and <code>mutate</code> methods int the <code>Txn</code> class also have async versions
called <code>async_query</code> and <code>async_mutation</code> respectively. These functions work
just like <code>async_alter</code>.</p><p>You can use the <code>handle_query_future</code> and <code>handle_mutate_future</code> static methods
in the <code>Txn</code> class to retrieve the result. A short example is given below:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>txn = client.txn()
</span></span><span style=display:flex><span>query = <span style=color:#a31515>&#34;query body here&#34;</span>
</span></span><span style=display:flex><span>future = txn.async_query()
</span></span><span style=display:flex><span>response = pydgraph.Txn.handle_query_future(future)
</span></span></code></pre></div><p>A working example can be found in the <code>test_asycn.py</code> test file.</p><p>Keep in mind that due to the nature of async calls, the async functions cannot
retry the request if the login is invalid. You will have to check for this error
and retry the login (with the function <code>retry_login</code> in both the <code>Txn</code> and
<code>Client</code> classes). A short example is given below:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client = DgraphClient(client_stubs) <span style=color:green># client_stubs is a list of gRPC stubs.</span>
</span></span><span style=display:flex><span>alter_future = client.async_alter()
</span></span><span style=display:flex><span><span style=color:#00f>try</span>:
</span></span><span style=display:flex><span>    response = alter_future.result()
</span></span><span style=display:flex><span><span style=color:#00f>except</span> Exception <span style=color:#00f>as</span> e:
</span></span><span style=display:flex><span>	<span style=color:green># You can use this function in the util package to check for JWT</span>
</span></span><span style=display:flex><span>    <span style=color:green># expired errors.</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> pydgraph.util.is_jwt_expired(e):
</span></span><span style=display:flex><span>        <span style=color:green># retry your request here.</span>
</span></span></code></pre></div></div><div class=post__comments><footer class=clearfix><a target=_blank href=https://discuss.dgraph.io><img class=logo src=https://discuss-dgraph-io.s3.dualstack.us-west-1.amazonaws.com/original/2X/4/4167dff901e0bed240f529edd1d9f318462968f8.png></a>
<a class=question-btn target=_blank href=https://discuss.dgraph.io/c/docs/49><i class="fa fa-question-circle"></i> Ask a Question</a>
<a class=edit-btn target=_blank href=https://github.com/dgraph-io/librebaas-docs/edit/master/content/clients/python.md><i class="fa fa-github-alt"></i> Edit Page</a></footer></div></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#supported-versions>Supported Versions</a></li><li><a href=#using-a-client>Using a client</a><ul><li><a href=#creating-a-client>Creating a Client</a></li><li><a href=#multi-tenancy>Multi-tenancy</a></li><li><a href=#creating-a-client-for-dgraph-cloud-endpoint>Creating a Client for Dgraph Cloud Endpoint</a></li><li><a href=#altering-the-database>Altering the Database</a></li><li><a href=#creating-a-transaction>Creating a Transaction</a></li><li><a href=#running-a-mutation>Running a Mutation</a></li><li><a href=#committing-a-transaction>Committing a Transaction</a></li><li><a href=#running-a-query>Running a Query</a></li><li><a href=#running-an-upsert-query--mutation>Running an Upsert: Query + Mutation</a></li><li><a href=#running-a-conditional-upsert>Running a Conditional Upsert</a></li><li><a href=#cleaning-up-resources>Cleaning Up Resources</a></li><li><a href=#setting-metadata-headers>Setting Metadata Headers</a></li><li><a href=#setting-a-timeout>Setting a timeout</a></li><li><a href=#passing-credentials>Passing credentials</a></li><li><a href=#authenticating-to-a-reverse-tls-proxy>Authenticating to a reverse TLS proxy</a></li><li><a href=#async-methods>Async methods</a></li></ul></li></ul></nav></div></div></main><div class="modal fade" id=runnable-modal tabindex=-1 role=dialog aria-labelledby=exampleModalLabel aria-hidden=true><a href=# data-dismiss=modal class=modal-close-btn>Close</a><div class=modal-dialog role=document><div class=modal-content><div class=modal-body></div></div></div></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script>
<script type=text/javascript>if(window.docsearch){var version="latest",path=window.location.pathname,arr=/(?:\/)?((?:master)|(?:v[0-9][^/]+))(?:\/)?.*$/.exec(path);arr!=null&&arr.length>1&&(version=arr[1]),window.docsearch({apiKey:"fe4cbc1640c6c87bbc5f099902d86f97",indexName:"dgraph",inputSelector:"#algolia-doc-search",algoliaOptions:{filters:`version:${version}`},debug:!1})}</script><script type=text/javascript>adroll_adv_id="L42C3U2UXBBPVAMISVXVLC",adroll_pix_id="MOR4VUNPK5B2LHEZ2NNTDX",adroll_version="2.0",function(e,t,n,s,o){e.__adroll_loaded=!0,e.adroll=e.adroll||[],e.adroll.f=["setProperties","identify","track"];var i="https://s.adroll.com/j/"+adroll_adv_id+"/roundtrip.js";for(o=0;o<e.adroll.f.length;o++)e.adroll[e.adroll.f[o]]=e.adroll[e.adroll.f[o]]||function(t){return function(){e.adroll.push([t,arguments])}}(e.adroll.f[o]);n=t.createElement("script"),s=t.getElementsByTagName("script")[0],n.async=1,n.src=i,s.parentNode.insertBefore(n,s)}(window,document),adroll.track("pageView")</script><script src=/js/clipboard.min.js></script>
<script src=/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script>
<script src=/js/runnable.js?6e7f328df4134d18ba5c8dd11f84deb8></script>
<script>hljs.initHighlightingOnLoad()</script><script async src=//unpkg.com/@dgraph-io/community></script>
<script src=https://cdn.ranksci.com/dgraph-411505.min.js type=text/javascript></script></body></html>