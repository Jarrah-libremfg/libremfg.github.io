<!doctype html><html lang=en class="js csstransforms3d"><head><script></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta property="og:image" content="https://docs.rhize.com/images/rhize-logo.png"><meta property="og:type" content="website"><meta property="og:title" content><meta property="og:site_name" content><meta property="og:url" content="https://docs.rhize.com/how-to/gql/query-mutate-subscribe/"><meta property="og:locale" content="en"><meta name=generator content="Hugo 0.121.1"><meta name=description content="Examples of how to use the different GraphQL operations in Rhize"><link rel=canonical href=https://docs.rhize.com/how-to/gql/query-mutate-subscribe/><link rel=apple-touch-icon sizes=57x57 href=https://docs.rhize.com/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://docs.rhize.com/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://docs.rhize.com/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://docs.rhize.com/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://docs.rhize.com/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://docs.rhize.com/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://docs.rhize.com/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://docs.rhize.com/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://docs.rhize.com/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=https://docs.rhize.com/images/favicons/manifest.webmanifest><link rel=mask-icon href=https://docs.rhize.com/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=https://docs.rhize.com/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script><script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin=anonymous></script><link href=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css rel=stylesheet integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin=anonymous><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin=anonymous></script><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin=anonymous></script><title>Query, mutate, and subscribe
|
How to
</title><link href=https://docs.rhize.com/css/theme.css?f7fc3416d6b064b68fd74e754bb7e584 rel=stylesheet><link href=https://docs.rhize.com/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=https://docs.rhize.com/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script><script src=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script><link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3></head><body><nav id=header><div class=header-left><div><a href=https://docs.rhize.com/ class=brand><img src=https://docs.rhize.com/images/rhize-logo.png alt=RHIZE class=logo></a><div class=logo-tagline><span>Documentation</span></div></div></div><div class=header-right><div id=docsearch><div class="menu-search align-middle"><div id=docsearch></div></div></div><div><ul class=menu><li><a href=https://rhize.com target=_blank>Home</a></li><li><a href=https://discord.gg/ZRpUBXmrkV target=_blank>Community</a></li><li><a href=https://github.com/libremfg/libremfg.github.io target=_blank>GitHub</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><ul class=topics><li class="topic main-topic children"><a id=get-started href=#>Get started</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/introduction/>What is Rhize?</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/how-rhize-works/>How Rhize works</a></li></ul></li><li class="topic main-topic children"><a id=deploy href=#>Deploy</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Install</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/overview/>Overview</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/setup-kubernetes/>Set up Kubernetes</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/keycloak/>Configure Keycloak</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/services/>Install Rhize services</a></li></ul></li><li class="topic sub-topic"><a href=#>Back up</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/graphdb/>Back up the Graph DB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/grafana/>Back up Grafana</a></li></ul></li><li class="topic sub-topic"><a href=#>Restore</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/graphdb/>Restore the GraphDB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/grafana/>Restore Grafana</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/bpmn-nodes/>BPMN execution recovery</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/upgrade/>Upgrade</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/about-openidconnect/>About OpenID connect</a></li></ul></li><li class="topic main-topic children active"><a id=user-guides href=#>User guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Define production models</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/create-objects-ui/>Create objects from the UI</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/master-definitions/>Master definitions and fields</a></li></ul></li><li class="topic sub-topic"><a href=#>Connect process events</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/connect-datasource/>Connect data source</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/track-changes/>Track changes (CDC)</a></li></ul></li><li class="topic sub-topic"><a href=#>Handle events</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/create-workflow/>Create BPMN workflows</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/>BMPN elements</a></li></ul></li><li class="topic sub-topic active"><a href=#>Use the knowledge graph</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/call-the-graphql-api/>Call the GraphQL API</a></li><li class="topic sub-topic active"><a href=https://docs.rhize.com/how-to/gql/query-mutate-subscribe/>Query, mutate, and subscribe</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/audit/>Audit</a></li></ul></li><li class="topic main-topic children"><a id=use-cases href=#>Use cases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/ebr/>Electronic batch records</a></li></ul></li><li class="topic main-topic children"><a id=reference href=#>Reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/agent-configuration/>Agent configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/default-ports/>Default local ports</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/glossary/>Glossary</a></li></ul></li><li class="topic main-topic children"><a id=releases href=#>Releases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc08/>3.0.0rc08</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc07/>3.0.0rc07</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc06/>3.0.0rc06</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc05/>3.0.0rc05</a></li></ul></li><li class="topic main-topic"><a href=https://docs.rhize.com/></a></li></ul></aside><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script><script type=text/javascript>docsearch({appId:"70JLDGIDQA",apiKey:"2b4c57aa9d3d0386bf1a6df5b54eb3cf",indexName:"rhize",insights:!0,container:"#docsearch",debug:!1})</script></body></html><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#queries>Queries</a><ul><li><a href=#get-single-resource><code>get</code> single resource</a></li><li><a href=#query-multiple-resources><code>Query</code> multiple resources</a></li><li><a href=#aggregate-data-from-multiple-resources><code>Aggregate</code> data from multiple resources</a></li></ul></li><li><a href=#mutations>Mutations</a><ul><li><a href=#add><code>Add</code></a></li><li><a href=#update><code>Update</code></a></li><li><a href=#delete><code>Delete</code></a></li></ul></li><li><a href=#subscriptions>Subscriptions</a></li></ul></nav></div><article><a class=edit-btn target=_blank href=https://github.com/libremfg/libremfg.github.io/edit/main/content/how-to/gql/query-mutate-subscribe.md><i class="fa fa-github-alt"></i> Edit Page</a><h1 class=post-title>Query, mutate, and subscribe</h1><p>This document provides examples for how to use the Rhize GraphQL API to query, update, and subscribe to objects in the Manufacturing data hub.</p><p>In GraphQL, an <em>operation</em> is a type of request to the server.
Rhize supports three types of operations:</p><ul><li><strong>Queries</strong> return data and subsets of data.</li><li><strong>Mutations</strong> change the data on the server side.</li><li><strong>Subscriptions</strong> notify about data changes in real time.</li></ul><h2 id=queries>Queries</h2><p>Most queries start with these three verbs, each of which indicates the resources to return.</p><ul><li><code>get</code> for a single resource</li><li><code>query</code> for multiple resources</li><li><code>aggregate</code> for calculations on arrays</li></ul><div class="notices note"><span class=type>Note</span> These operations correspond to the <code>Get</code> verb defined in <a href=https://www.isa.org/products/ansi-isa-95-00-05-2018-enterprise-control-system-i>Part 5</a> of the ISA-95 standard.</div><h3 id=get-single-resource><code>get</code> single resource</h3><p>Queries that start with <code>get</code> return one object.
Common use cases of gets are to explore all data related to a particular object.
For example, in a custom dashboard, you may use <code>getDataSource</code> to make a custom page that reports a specified data source.</p><p>Typically, the argument specifies the resource by either its human-readable ID (<code>id</code>), or its unique address in the database (<code>iid</code>).</p><p>For example, this query gets the <code>iid</code>, <code>_createdBy</code>, and <code>versions</code> for the equipment item <code>Kitchen_mixer_b_01</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>mixerCheck</span> {
</span></span><span style=display:flex><span>  getEquipment(id: <span style=color:#a31515>&#34;Kitchen_mixer_b_01&#34;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>iid</span>
</span></span><span style=display:flex><span>      _createdBy
</span></span><span style=display:flex><span>      versions{
</span></span><span style=display:flex><span>        id
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=query-multiple-resources><code>Query</code> multiple resources</h3><p>Queries that start with <code>query</code> return an array of objects.
For example, a custom dashboard may use <code>queryEquipmentVersion</code> to create a page that displays all active versions of equipment that are running in a certain
<abbr title="The scope of the exchanged information, such as a site or area, for which the information is relevant. The scope identifies associated instances of objects such as material, personnel, and equipment">hierarchy scope</abbr>
.</p><p>For example, this query returns the ID of all pieces of equipment.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>allEquipment</span>{
</span></span><span style=display:flex><span>  <span style=color:#00f>query</span><span style=color:#2b91af>Equipment</span> {
</span></span><span style=display:flex><span>    id
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Often, it&rsquo;s convenient to <a href=https://docs.rhize.com/how-to/gql/call-the-graphql-api/#filter>filter</a> the items returned by a query.
This query uses a regular expression in its variables to filter for items that begin with either <code>Kitchen_</code> or <code>Cooling_</code> (case insensitive):</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=QUERY><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>getEquipment</span>($filter: <span style=color:#2b91af>EquipmentFilter</span>) {
</span></span><span style=display:flex><span>  aggregateEquipment(filter: $filter) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>count</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#00f>query</span><span style=color:#2b91af>Equipment</span>(filter: $filter) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Variables</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;EquipmentFilter&#34;: {
</span></span><span style=display:flex><span>    &#34;id&#34;: {
</span></span><span style=display:flex><span>      &#34;regexp&#34;: <span style=color:#a31515>&#34;/|Kitchen_.*|Cooling_.*/i&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><h3 id=aggregate-data-from-multiple-resources><code>Aggregate</code> data from multiple resources</h3><p>Like <code>query</code>, operations that start with <code>aggregate</code> return sets of arrays.</p><p>However, rather than return items, the purpose of aggregate operations is to returns secondary data computed from the properties of these items.
For example, you might use an <code>aggregate</code> query to create a report about operational performance for a set of process segments within a certain time frame.</p><p>This request returns the count of all Equipment items that match a certain filter:</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=QUERY><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>countItems</span>($filter: <span style=color:#2b91af>EquipmentFilter</span>) {
</span></span><span style=display:flex><span>  aggregateEquipment(filter: $filter) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>count</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><h2 id=mutations>Mutations</h2><p>Rhize supports the following ways to change the API.</p><h3 id=add><code>Add</code></h3><p>Mutations that start with <code>Add</code> create a resource on the server.
The <code>Add</code> operation corresponds to the <code>Process</code> verb defined in <a href=https://www.isa.org/products/ansi-isa-95-00-05-2018-enterprise-control-system-i>Part 5</a> of the ISA-95 standard.</p><p>For example, this mutation adds one more items of equipment.
To add multiple, send the variable as an array of objects, rather than a single object.
The <code>numUids</code> property reports how many new objects were created.</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=MUTATION><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> <span style=color:#2b91af>AddEquipment</span>($input: [<span style=color:#2b91af>AddEquipmentInput</span>!]!) {
</span></span><span style=display:flex><span>  addEquipment(<span style=color:#00f>input</span>: $input) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>equipment</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>      label
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    numUids
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=tab-pane title="VARS: CREATE ONE OBJECT"><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &#34;input&#34;: {
</span></span><span style=display:flex><span>    &#34;id&#34;: <span style=color:#a31515>&#34;Kitchen_mixer_a_20&#34;</span>,
</span></span><span style=display:flex><span>    &#34;label&#34;: <span style=color:#a31515>&#34;Kitchen mixer A11&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=tab-pane title="VARS: CREATE MANY"><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &#34;input&#34;: [{
</span></span><span style=display:flex><span>    &#34;id&#34;: <span style=color:#a31515>&#34;Kitchen_mixer_b_01&#34;</span>,
</span></span><span style=display:flex><span>    &#34;label&#34;: <span style=color:#a31515>&#34;Kitchen mixer A11&#34;</span>
</span></span><span style=display:flex><span>  },{
</span></span><span style=display:flex><span>    &#34;id&#34;: <span style=color:#a31515>&#34;Kitchen_mixer_b_02&#34;</span>,
</span></span><span style=display:flex><span>    &#34;label&#34;: <span style=color:#a31515>&#34;Kitchen mixer A12&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><h3 id=update><code>Update</code></h3><p>Mutations that start with <code>Update</code> change something in an object that already exists.
The <code>Update</code> operation corresponds to the <code>Change</code> verb defined in <a href=https://www.isa.org/products/ansi-isa-95-00-05-2018-enterprise-control-system-i>Part 5</a> of the ISA-95 standard.</p><p>For example, this operation updates the description for a specific version of an equipment item.</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=QUERY><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> <span style=color:#2b91af>updateMixerVersion</span>( $updateEquipmentVersionInput2: <span style=color:#2b91af>UpdateEquipmentVersionInput</span>!){
</span></span><span style=display:flex><span>  updateEquipmentVersion(<span style=color:#00f>input</span>: $updateEquipmentVersionInput2) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>equipmentVersion</span> {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>description</span>
</span></span><span style=display:flex><span>      id
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Variables</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;updateEquipmentVersionInput2&#34;: {
</span></span><span style=display:flex><span>    &#34;filter&#34;: {&#34;iid&#34;:<span style=color:#a31515>&#34;0xcc701&#34;</span>},
</span></span><span style=display:flex><span>    &#34;set&#34;: {
</span></span><span style=display:flex><span>      &#34;description&#34;: <span style=color:#a31515>&#34;Second generation of the mixer 9000&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><h3 id=delete><code>Delete</code></h3><div class="notices caution"><span class=type>Caution</span> Be careful! Without a <a href=https://docs.rhize.com/deploy/backup/graphdb/>Database backup</a>, deleted items cannot be recovered.</div><p>Mutations that start with <code>delete</code> remove a resource from the database.
The operation corresponds to the <code>Cancel</code> verb defined in <a href=https://www.isa.org/products/ansi-isa-95-00-05-2018-enterprise-control-system-i>Part 5</a> of the ISA-95 standard.</p><p>For example, this operation deletes a unit of measure:</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=MUTATION><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>mutation</span> <span style=color:#2b91af>deleteUoM</span>($filter: <span style=color:#2b91af>UnitOfMeasureFilter</span>!){
</span></span><span style=display:flex><span>  deleteUnitOfMeasure(filter: $filter) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>numUids</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Variables:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;filter&#34;: {
</span></span><span style=display:flex><span>    &#34;id&#34;: {
</span></span><span style=display:flex><span>      &#34;eq&#34;: <span style=color:#a31515>&#34;example unit of measure&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><h2 id=subscriptions>Subscriptions</h2><div class="notices note"><span class=type>Note</span> These operations correspond to the <code>SyncGet</code> verb defined in <a href=https://www.isa.org/products/ansi-isa-95-00-05-2018-enterprise-control-system-i>Part 5</a> of the ISA-95 standard.</div><p>The operations for a <code>subscription</code> are similar to the operations for a <a href=#queries><code>query</code></a>.
But rather than providing information about the entire item, the purpose of subscriptions is to notify about real-time changes to a manufacturing resource.</p><p>This example query subscribes to changes in a specified set of <code>workResponses</code>, reporting only their <code>id</code> and effective end time.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>subscription</span> <span style=color:#2b91af>GetWorkResponse</span>($getWorkResponseId: <span style=color:#2b91af>String</span>) {
</span></span><span style=display:flex><span>    getWorkResponse(id: $getWorkResponseId){
</span></span><span style=display:flex><span>      <span style=color:#2b91af>jobResponses</span> {
</span></span><span style=display:flex><span>      effectiveEnd
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Try to minimize the payload for subscription operations.
Additionally, you need to subscribe only to changes that persist to the knowledge graph.
For general event handling, it&rsquo;s often better to use a <a href=https://docs.rhize.com/how-to/bpmn/>BPMN workflow</a> that subscribes to a NATS, MQTT, or OPC UA topic.</p></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#queries>Queries</a><ul><li><a href=#get-single-resource><code>get</code> single resource</a></li><li><a href=#query-multiple-resources><code>Query</code> multiple resources</a></li><li><a href=#aggregate-data-from-multiple-resources><code>Aggregate</code> data from multiple resources</a></li></ul></li><li><a href=#mutations>Mutations</a><ul><li><a href=#add><code>Add</code></a></li><li><a href=#update><code>Update</code></a></li><li><a href=#delete><code>Delete</code></a></li></ul></li><li><a href=#subscriptions>Subscriptions</a></li></ul></nav></div></div></main><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script src=https://docs.rhize.com/js/clipboard.min.js></script><script src=https://docs.rhize.com/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script><script>hljs.initHighlightingOnLoad()</script></body></html>