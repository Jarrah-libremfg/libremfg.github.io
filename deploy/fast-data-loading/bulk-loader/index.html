<!doctype html><html lang=en class="js csstransforms3d"><head><script>var subPaths={"/deploy/#install-dgraph":"/deploy/download","/deploy/#docker":"/deploy/download/#docker","/deploy/#automatic-download":"/deploy/download/#automatic-download","/deploy/#manual-download-[optional]":"/deploy/download/#manual-download-[optional]","/deploy/#building-from-source":"/deploy/download/#building-from-source","/deploy/#understanding-dgraph-cluster":"/deploy/cluster-setup/#understanding-dgraph-cluster","/deploy/#sharding":"/deploy/cluster-setup/#sharding","/deploy/#shard-rebalancing":"/deploy/cluster-setup/#shard-rebalancing","/deploy/#consistent-replication":"/deploy/cluster-setup/#consistent-replication","/deploy/#types-of-ports":"/deploy/ports-usage/#types-of-ports","/deploy/#ports-used-by-different-nodes":"/deploy/ports-usage/#ports-used-by-different-nodes","/deploy/#ha-cluster-setup":"/deploy/ports-usage/#ha-cluster-setup","/deploy/#dgraph-zero":"/deploy/ports-usage/#dgraph-zero","/deploy/#dgraph-alpha":"/deploy/ports-usage/#dgraph-alpha","/deploy/#run-directly-on-the-host":"/deploy/single-host-setup/#run-directly-on-the-host","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker":"/deploy/single-host-setup/#run-using-docker","/deploy/#create-docker-network":"/deploy/single-host-setup/#create-docker-network","/deploy/#run-dgraph-zero":"/deploy/single-host-setup/#run-dgraph-zero","/deploy/#run-dgraph-alpha":"/deploy/single-host-setup/#run-dgraph-alpha","/deploy/#run-dgraph-ui":"/deploy/single-host-setup/#run-dgraph-ui","/deploy/#run-using-docker-compose-(on-single-aws-instance)":"/deploy/single-host-setup/#run-using-docker-compose-(on-single-aws-instance)","/deploy/#using-docker-swarm":"/deploy/multi-host-setup/#using-docker-swarm","/deploy/#cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#cluster-setup-using-docker-swarm","/deploy/#ha-cluster-setup-using-docker-swarm":"/deploy/multi-host-setup/#ha-cluster-setup-using-docker-swarm","/deploy/#single-server":"/deploy/kubernetes/#single-server","/deploy/#deploy-single-server":"/deploy/kubernetes/#deploy-single-server","/deploy/#verify-single-server":"/deploy/kubernetes/#verify-single-server","/deploy/#test-single-server-setup":"/deploy/kubernetes/#test-single-server-setup","/deploy/#remove-single-server-resources":"/deploy/kubernetes/#remove-single-server-resources","/deploy/#ha-cluster-setup-using-kubernetes":"/deploy/kubernetes/#ha-cluster-setup-using-kubernetes","/deploy/#validate-kubernetes-cluster-for-ha":"/deploy/kubernetes/#validate-kubernetes-cluster-for-ha","/deploy/#verify-dgraph-ha-cluster":"/deploy/kubernetes/#verify-dgraph-ha-cluster","/deploy/#test-dgraph-ha-cluster-setup":"/deploy/kubernetes/#test-dgraph-ha-cluster-setup","/deploy/#delete-dgraph-ha-cluster-resources":"/deploy/kubernetes/#delete-dgraph-ha-cluster-resources","/deploy/#using-helm-chart":"/deploy/kubernetes/#using-helm-chart","/deploy/#installing-the-chart":"/deploy/kubernetes/#installing-the-chart","/deploy/#upgrading-the-chart":"/deploy/kubernetes/#upgrading-the-chart","/deploy/#deleting-the-chart":"/deploy/kubernetes/#deleting-the-chart","/deploy/#configuration":"/deploy/kubernetes/#configuration","/deploy/#monitoring-in-kubernetes":"/deploy/kubernetes/#monitoring-in-kubernetes","/deploy/#kubernetes-storage":"/deploy/kubernetes/#kubernetes-storage","/deploy/#local-storage":"/deploy/kubernetes/#local-storage","/deploy/#non-local-persistent-disks":"/deploy/kubernetes/#non-local-persistent-disks","/deploy/#removing-a-dgraph-pod":"/deploy/kubernetes/#removing-a-dgraph-pod","/deploy/#kubernetes-and-bulk-loader":"/deploy/kubernetes/#kubernetes-and-bulk-loader","/deploy/#more-about-dgraph-alpha":"/deploy/dgraph-alpha","/deploy/#querying-health":"/deploy/dgraph-alpha/#querying-health","/deploy/#more-about-dgraph-zero":"/deploy/dgraph-zero","/deploy/#more-about-state-endpoint":"/deploy/dgraph-zero/#more-about-state-endpoint","/deploy/#query-logging":"/deploy/log-format/#query-logging","/deploy/#dgraph-certificate-management-tool":"/deploy/tls-configuration/#dgraph-certificate-management-tool","/deploy/#file-naming-conventions":"/deploy/tls-configuration/#file-naming-conventions","/deploy/#certificate-inspection":"/deploy/tls-configuration/#certificate-inspection","/deploy/#tls-options":"/deploy/tls-configuration/#tls-options","/deploy/#using-tls-without-client-authentication":"/deploy/tls-configuration/#using-tls-without-client-authentication","/deploy/#using-tls-with-client-authentication":"/deploy/tls-configuration/#using-tls-with-client-authentication","/deploy/#client-authentication-options":"/deploy/tls-configuration/#client-authentication-options","/deploy/#using-ratel-ui-with-client-authentication":"/deploy/tls-configuration/#using-ratel-ui-with-client-authentication","/deploy/#using-curl-with-client-authentication":"/deploy/tls-configuration/#using-curl-with-client-authentication","/deploy/#access-data-using-a-client":"/deploy/tls-configuration/#access-data-using-a-client","/deploy/#troubleshooting-ratel-s-client-authentication":"/deploy/tls-configuration/#troubleshooting-ratel-s-client-authentication","/deploy/#live-loader":"/deploy/fast-data-loading/#live-loader","/deploy/#encrypted-imports-via-live-loader":"/deploy/fast-data-loading/#encrypted-imports-via-live-loader","/deploy/#encrypted-rdf-json-file-and-schema-via-live-loader":"/deploy/fast-data-loading/#encrypted-rdf-json-file-and-schema-via-live-loader","/deploy/#other-live-loader-options":"/deploy/fast-data-loading/#other-live-loader-options","/deploy/#bulk-loader":"/deploy/fast-data-loading/#bulk-loader","/deploy/#encryption-at-rest-with-bulk-loader":"/deploy/fast-data-loading/#encryption-at-rest-with-bulk-loader","/deploy/#encrypting-imports-via-bulk-loader":"/deploy/fast-data-loading/#encrypting-imports-via-bulk-loader","/deploy/#other-bulk-loader-options":"/deploy/fast-data-loading/#other-bulk-loader-options","/deploy/#tuning-monitoring":"/deploy/fast-data-loading/#tuning-monitoring","/deploy/#disk-metrics":"/deploy/metrics/#disk-metrics","/deploy/#memory-metrics":"/deploy/metrics/#memory-metrics","/deploy/#activity-metrics":"/deploy/metrics/#activity-metrics","/deploy/#health-metrics":"/deploy/metrics/#health-metrics","/deploy/#go-metrics":"/deploy/metrics/#go-metrics","/deploy/#examining-traces-with-zpages":"/deploy/tracing/#examining-traces-with-zpages","/deploy/#examining-traces-with-jaeger":"/deploy/tracing/#examining-traces-with-jaeger","/deploy/#setting-up-multiple-dgraph-clusters-with-jaeger":"/deploy/tracing/#setting-up-multiple-dgraph-clusters-with-jaeger","/deploy/#whitelisting-admin-operations":"/deploy/dgraph-administration/#whitelisting-admin-operations","/deploy/#restricting-mutation-operations":"/deploy/dgraph-administration/#restricting-mutation-operations","/deploy/#securing-alter-operations":"/deploy/dgraph-administration/#securing-alter-operations","/deploy/#export-database":"/deploy/dgraph-administration/#exporting-database","/deploy/#encrypting-exports":"/deploy/dgraph-administration/#encrypting-exports","/deploy/#shutting-down-database":"/deploy/dgraph-administration/#shutting-down-database","/deploy/#deleting-database":"/deploy/dgraph-administration/#deleting-database","/deploy/#upgrading-database":"/deploy/dgraph-administration/#upgrading-database","/deploy/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers":"/deploy/dgraph-administration/#upgrading-from-v1-2-2-to-v20-03-0-for-enterprise-customers","/deploy/#post-installation":"/deploy/dgraph-administration/#post-installation","/deploy/#running-oom-out-of-memory":"/deploy/troubleshooting/#running-oom-out-of-memory","/deploy/#too-many-open-files":"/deploy/troubleshooting/#too-many-open-files","/deploy/#cluster-requirements":"/deploy/production-checklist/#cluster-requirements","/deploy/#machine-requirements":"/deploy/production-checklist/#machine-requirements","/deploy/#operating-system":"/deploy/production-checklist/#operating-system","/deploy/#cpu-and-memory":"/deploy/production-checklist/#cpu-and-memory","/deploy/#disk":"/deploy/production-checklist/#disk","/deploy/#firewall-rules":"/deployproduction-checklist/#firewall-rules","/deploy/#operating-system-tuning":"/deploy/production-checklist/#operating-system-tuning","/deploy/#deployment":"/deploy/production-checklist/#deployment","/deploy/#terminology":"/deploy/production-checklist/#terminology","/deploy/#basic-setup-2-node-cluster":"/deploy/production-checklist/#basic-setup-2-node-cluster","/deploy/#ha-setup-6-node-cluster":"/deploy/production-checklist/#ha-setup-6-node-cluster","/deploy/#supplementary-services":"/deploy/production-checklist/#supplementary-services","/deploy/#see-also":"/deploy/","/query-language/#take-a-tour-https-tour-dgraph-io":"/query-language/graphql-fundamentals/#take-a-tour-https-tour-dgraph-io","/query-language/#running-examples":"/query-language/graphql-fundamentals/#running-examples","/query-language/#graphql-fundamentals":"/query-language/graphql-fundamentals/#graphql-fundamentals","/query-language/#returning-values":"/query-language/graphql-fundamentals/#returning-values","/query-language/#expanding-graph-edges":"/query-language/graphql-fundamentals/#expanding-graph-edges","/query-language/#comments":"/query-language/graphql-fundamentals/#comments","/query-language/#applying-filters":"/query-language/graphql-fundamentals/#applying-filters","/query-language/#language-support":"/query-language/graphql-fundamentals/#language-support","/query-language/#functions":"/query-language/functions","/query-language/#term-matching":"/query-language/functions/#term-matching","/query-language/#allofterms":"/query-language/functions/#allofterms","/query-language/#usage-at-root":"/query-language/functions/#usage-at-root","/query-language/#usage-as-filter":"/query-language/functions/#usage-as-filter","/query-language/#anyofterms":"/query-language/functions/#anyofterms","/query-language/#usage-at-root-1":"/query-language/functions/#usage-at-root-1","/query-language/#usage-as-filter-1":"/query-language/functions/#usage-as-filter-1","/query-language/#regular-expressions":"/query-language/functions/#regular-expressions","/query-language/#technical-details":"/query-language/functions/#technical-details","/query-language/#writing-efficient-regular-expressions-and-limitations":"/query-language/functions/#writing-efficient-regular-expressions-and-limitations","/query-language/#fuzzy-matching":"/query-language/functions/#fuzzy-matching","/query-language/#full-text-search":"/query-language/functions/#full-text-search","/query-language/#inequality":"/query-language/functions/#inequality","/query-language/#equal-to":"/query-language/functions/#equal-to","/query-language/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to":"/query-language/functions/#less-than-less-than-or-equal-to-greater-than-and-greater-than-or-equal-to","/query-language/#uid":"/query-language/functions/#uid","/query-language/#uid-in":"/query-language/functions/#uid-in","/query-language/#has":"/query-language/functions/#has","/query-language/#geolocation":"/query-language/functions/#geolocation","/query-language/#mutations":"/query-language/functions/#mutations","/query-language/#query":"/query-language/functions/#query","/query-language/#near":"/query-language/functions/#near","/query-language/#within":"/query-language/functions/#within","/query-language/#contains":"/query-language/functions/#contains","/query-language/#intersects":"/query-language/functions/#intersects","/query-language/#connecting-filters":"/query-language/connecting-filters/","/query-language/#and-or-and-not":"/query-language/connecting-filters/#and-or-and-not","/query-language/#alias":"/query-language/alias","/query-language/#pagination":"/query-language/pagination","/query-language/#first":"/query-language/pagination/#first","/query-language/#offset":"/query-language/paginatio/n#offset","/query-language/#after":"/query-language/pagination/#after","/query-language/#count":"/query-language/count","/query-language/#sorting":"/query-language/sorting","/query-language/#multiple-query-blocks":"/query-language/multiple-query-blocks","/query-language/#var-blocks":"/query-language/multiple-query-blocks/#var-blocks","/query-language/#query-variables":"/query-language/query-variables/","/query-language/#value-variables":"/query-language/value-variables/","/query-language/#variable-propagation":"/query-language/value-variables/#variable-propagation","/query-language/#aggregation":"/query-language/aggregation/","/query-language/#min":"/query-language/aggregation/#min","/query-language/#usage-at-root-2":"/query-language/aggregation/#usage-at-root-2","/query-language/#usage-at-other-levels":"/query-language/aggregation/#usage-at-other-levels","/query-language/#max":"/query-language/aggregation/#max","/query-language/#usage-at-root-3":"/query-language/aggregation/#usage-at-root-3","/query-language/#usage-at-other-levels-1":"/query-language/aggregation/#usage-at-other-levels-1","/query-language/#sum-and-avg":"/query-language/aggregation/#sum-and-avg","/query-language/#usage-at-root-4":"/query-language/aggregation/#usage-at-root-4","/query-language/#usage-at-other-levels-2":"/query-language/aggregation/#usage-at-other-levels-2","/query-language/#aggregating-aggregates":"/query-language/aggregation/#aggregating-aggregates","/query-language/#math-on-value-variables":"/query-language/math-on-value-variables/","/query-language/#groupby":"/query-language/groupby/","/query-language/#expand-predicates":"/query-language/expand-predicates/","/query-language/#filtering-during-expand":"/query-language/expand-predicates/#filtering-during-expand","/query-language/#cascade-directive":"/query-language/cascade-directive/","/query-language/#normalize-directive":"/query-language/normalize-directive/","/query-language/#ignorereflex-directive":"/query-language/ignorereflex-directive/","/query-language/#debug":"/query-language/debug/","/query-language/#schema":"/query-language/schema/","/query-language/#schema-types":"/query-language/schema/#schema-types","/query-language/#scalar-types":"/query-language/schema/#scalar-types","/query-language/#uid-type":"/query-language/schema/#uid-type","/query-language/#adding-or-modifying-schema":"/query-language/schema/#adding-or-modifying-schema","/query-language/#indexes-in-background":"/query-language/schema/#indexes-in-background","/query-language/#http-api":"/query-language/schema/#http-api","/query-language/#grpc-api":"/query-language/schema/#grpc-api","/query-language/#predicate-name-rules":"/query-language/schema/#predicate-name-rules","/query-language/#allowed-special-characters":"/query-language/schema/#allowed-special-characters","/query-language/#forbidden-special-characters":"/query-language/schema/#forbidden-special-characters","/query-language/#predicates-i18n":"/query-language/schema/#predicates-i18n","/query-language/#upsert-directive":"/query-language/schema/#upsert-directive","/query-language/#noconflict-directive":"/query-language/schema/#noconflict-directive","/query-language/#rdf-types":"/query-language/schema/#rdf-types","/query-language/#extended-types":"/query-language/schema/#extended-types","/query-language/#password-type":"/query-language/schema/#password-type","/query-language/#indexing":"/query-language/schema/#indexing","/query-language/#string-indices":"/query-language/schema/#string-indices","/query-language/#datetime-indices":"/query-language/schema/#datetime-indices","/query-language/#sortable-indices":"/query-language/schema/#sortable-indices","/query-language/#count-index":"/query-language/schema/#count-index","/query-language/#list-type":"/query-language/schema/#list-type","/query-language/#filtering-on-list":"/query-language/schema/#filtering-on-list","/query-language/#reverse-edges":"/query-language/schema/#reverse-edges","/query-language/#querying-schema":"/query-language/schema/#querying-schema","/query-language/#type-system":"/query-language/type-system/","/query-language/#type-definition":"/query-language/schema/#type-definition","/query-language/#setting-the-type-of-a-node":"/query-language/schema/#setting-the-type-of-a-node","/query-language/#using-types-during-queries":"/query-language/schema/#using-types-during-queries","/query-language/#deleting-a-type":"/query-language/schema/#deleting-a-type","/query-language/#expand-queries-and-types":"/query-language/schema/#expand-queries-and-types","/query-language/#facets-edge-attributes":"/query-language/facets/","/query-language/#facets-on-scalar-predicates":"/query-language/facets/#facets-on-scalar-predicates","/query-language/#facets-i18n":"/query-language/facets/#facets-i18n","/query-language/#alias-with-facets":"/query-language/facets/#alias-with-facets","/query-language/#facets-on-uid-predicates":"/query-language/facets/#facets-on-uid-predicates","/query-language/#filtering-on-facets":"/query-language/facets/#filtering-on-facets","/query-language/#sorting-using-facets":"/query-language/facets/#sorting-using-facets","/query-language/#assigning-facet-values-to-a-variable":"/query-language/facets/#assigning-facet-values-to-a-variable","/query-language/#facets-and-variable-propagation":"/query-language/facets/#facets-and-variable-propagation","/query-language/#facets-and-aggregation":"/query-language/facets/#facets-and-aggregation","/query-language/#k-shortest-path-queries":"/query-language/k-shortest-path-queries/","/query-language/#recurse-query":"/query-language/recurse-query/","/query-language/#fragments":"/query-language/fragments/","/query-language/#graphql-variables":"/query-language/graphql-variables/","/query-language/#indexing-with-custom-tokenizers":"/query-language/indexing-custom-tokenizers/","/query-language/#caveats":"/query-language/indexing-custom-tokenizers/#caveats","/query-language/#implementing-a-plugin":"/query-language/indexing-custom-tokenizers/#implementing-a-plugin","/query-language/#building-the-plugin":"/query-language/indexing-custom-tokenizers/#building-the-plugin","/query-language/#running-dgraph-with-plugins":"/query-language/indexing-custom-tokenizers/#running-dgraph-with-plugins","/query-language/#adding-the-index-to-the-schema":"/query-language/indexing-custom-tokenizers/#adding-the-index-to-the-schema","/query-language/#using-the-index-in-queries":"/query-language/indexing-custom-tokenizers/#using-the-index-in-queries","/query-language/#examples":"/query-language/indexing-custom-tokenizers/#examples","/query-language/#unicode-characters":"/query-language/indexing-custom-tokenizers/#unicode-characters","/query-language/#cidr-range":"/query-language/indexing-custom-tokenizers/#cidr-range","/query-language/#anagram":"/query-language/indexing-custom-tokenizers/#anagram","/query-language/#integer-prime-factors":"/query-language/indexing-custom-tokenizers/#integer-prime-factors","/design-concepts/#can-we-do-pre-writes-only-on-leaders":"/design-concepts/transactions-faq/","/design-concepts/#edges":"/design-concepts/concepts/#edges","/design-concepts/#posting-list":"/design-concepts/concepts/#posting-list","/design-concepts/#badger":"/design-concepts/concepts/#badger","/design-concepts/#group":"/design-concepts/concepts/#group","/design-concepts/#replication-and-server-failure":"/design-concepts/concepts/#replication-and-server-failure","/design-concepts/#new-server-and-discovery":"/design-concepts/concepts/#new-server-and-discovery","/design-concepts/#write-ahead-logs":"/design-concepts/concepts/#write-ahead-logs","/design-concepts/#mutations":"/design-concepts/concepts/#mutations","/design-concepts/#queries":"/design-concepts/concepts/#queries","/design-concepts/#network-calls":"/design-concepts/concepts/#network-calls","/design-concepts/#worker":"/design-concepts/concepts/#worker","/design-concepts/#worker-pool":"/design-concepts/concepts/#worker-pool","/design-concepts/#protocol-buffers":"/design-concepts/concepts/#protocol-buffers","/design-concepts/#sql-nosql":"/design-concepts/minimizing-network-calls/#sql-nosql","/design-concepts/#dgraph":"/design-concepts/minimizing-network-calls/#dgraph","/design-concepts/#term":"/design-concepts/raft/#dgraph","/design-concepts/#server-states":"/design-concepts/raft/#server-states","/design-concepts/#communication":"/design-concepts/raft/#communication","/design-concepts/#log-entries":"/design-concepts/raft/#log-entries","/design-concepts/#voting":"/design-concepts/raft/#voting","/design-concepts/#cluster-membership":"/design-concepts/raft/#cluster-membership","/design-concepts/#log-compaction":"/design-concepts/raft/#log-compaction","/design-concepts/#clients":"/design-concepts/raft/#clients","/design-concepts/#linearizable-semantics":"/design-concepts/raft/#linearizable-semantics","/design-concepts/#read-only-queries":"/design-concepts/raft/#read-only-queries","/mutations/#deletion-of-non-list-predicates":"/mutations/delete/#deletion-of-non-list-predicates","/mutations/#setting-literal-values":"/mutations/json-mutation-format/#setting-literal-values","/mutations/#language-support":"/mutations/json-mutation-format/#language-support","/mutations/#geolocation-support":"/mutations/json-mutation-format/#geolocation-support","/mutations/#referencing-existing-nodes":"/mutations/json-mutation-format/#referencing-existing-nodes","/mutations/#edges-between-nodes":"/mutations/json-mutation-format/#edges-between-nodes","/mutations/#deleting-literal-values":"/mutations/json-mutation-format/#deleting-literal-values","/mutations/#deleting-edges":"/mutations/json-mutation-format/#deleting-edges","/mutations/#facets":"/mutations/json-mutation-format/#facets","/mutations/#deleting-facets":"/mutations/json-mutation-format/#deleting-facets","/mutations/#creating-a-list-with-json-and-interacting-with":"/mutations/json-mutation-format/#creating-a-list-with-json-and-interacting-with","/mutations/#facets-in-list-type-with-json":"/mutations/json-mutation-format/#facets-in-list-type-with-json","/mutations/#specifying-multiple-operations":"/mutations/json-mutation-format/#specifying-multiple-operations","/mutations/#json-syntax-using-raw-http-or-ratel-ui":"/mutations/json-mutation-format/#json-syntax-using-raw-http-or-ratel-ui","/mutations/#using-json-operations-via-curl":"/mutations/json-mutation-format/#using-json-operations-via-curl","/mutations/#uid-function":"/mutations/upsert-block/#uid-function","/mutations/#val-function":"/mutations/upsert-block/#val-function","/mutations/#example-of-uid-function":"/mutations/upsert-block/#example-of-uid-function","/mutations/#example-of-val-function":"/mutations/upsert-block/#example-of-val-function","/mutations/#bulk-delete-example":"/mutations/upsert-block/#bulk-delete-example","/mutations/#example-of-conditional-upsert":"/mutations/conditional-upsert/#example-of-conditional-upsert","/mutations/#example-of-multiple-mutation-blocks":"/mutations/conditional-upsert/#example-of-multiple-mutation-blocks","/enterprise-features/#configure-backup":"/enterprise-features/binary-backups/#configure-backup","/enterprise-features/#configure-amazon-s3-credentials":"/enterprise-features/binary-backups/#configure-amazon-s3-credentials","/enterprise-features/#configure-minio-credentials":"/enterprise-features/binary-backups/#configure-minio-credentials","/enterprise-features/#create-a-backup":"/enterprise-features/binary-backups/#create-a-backup","/enterprise-features/#backup-to-amazon-s3":"/enterprise-features/binary-backups/#backup-to-amazon-s3","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-minio":"/enterprise-features/binary-backups/#backup-to-minio","/enterprise-features/#backup-to-google-cloud-storage-via-minio-gateway":"/enterprise-features/binary-backups/#backup-to-google-cloud-storage-via-minio-gateway","/enterprise-features/#test-using-minio-browser":"/enterprise-features/binary-backups/#test-using-minio-browser","/enterprise-features/#test-using-minio-client":"/enterprise-features/binary-backups/#test-using-minio-client","/enterprise-features/#disabling-https-for-s3-and-minio-backups":"/enterprise-features/binary-backups/#disabling-https-for-s3-and-minio-backups","/enterprise-features/#overriding-credentials":"/enterprise-features/binary-backups/#overriding-credentials","/enterprise-features/#backup-to-nfs":"/enterprise-features/binary-backups/#backup-to-nfs","/enterprise-features/#forcing-a-full-backup":"/enterprise-features/binary-backups/#forcing-a-full-backup","/enterprise-features/#encrypted-backups":"/enterprise-features/binary-backups/#encrypted-backups","/enterprise-features/#new-flag-“encrypted”-in-manifest.json":"/enterprise-features/binary-backups/#new-flag-“encrypted”-in-manifest.json","/enterprise-features/#aes-and-chaining-with-gzip":"/enterprise-features/binary-backups/#aes-and-chaining-with-gzip","/enterprise-features/#backup":"/enterprise-features/binary-backups/#backup","/enterprise-features/#restore-from-backup":"/enterprise-features/binary-backups/#restore-from-backup","/enterprise-features/#restore-from-amazon-s3":"/enterprise-features/binary-backups/#restore-from-amazon-s3","/enterprise-features/#restore-from-minio":"/enterprise-features/binary-backups/#restore-from-minio","/enterprise-features/#restore-from-local-directory-or-nfs":"/enterprise-features/binary-backups/#restore-from-local-directory-or-nfs","/enterprise-features/#restore-and-update-timestamp":"/enterprise-features/binary-backups/#restore-and-update-timestamp","/enterprise-features/#turn-on-acls":"/enterprise-features/access-control-lists/#turn-on-acls","/enterprise-features/#set-up-acl-rules":"/enterprise-features/access-control-lists/#set-up-acl-rules","/enterprise-features/#using-graphql-admin-api":"/enterprise-features/access-control-lists/#using-graphql-admin-api","/enterprise-features/#retrieve-users-and-groups-information":"/enterprise-features/access-control-lists/#retrieve-users-and-groups-information","/enterprise-features/#using-a-graphql-tool":"/enterprise-features/access-control-lists/#using-a-graphql-tool","/enterprise-features/#access-data-using-a-client":"/enterprise-features/access-control-lists/#access-data-using-a-client","/enterprise-features/#access-data-using-the-graphql-api":"/enterprise-features/access-control-lists/#access-data-using-the-graphql-api","/enterprise-features/#reset-groot-password":"/enterprise-features/access-control-lists/#reset-groot-password","/enterprise-features/#set-up-encryption":"/enterprise-features/encryption-at-rest/#set-up-encryption","/enterprise-features/#turn-on-encryption":"/enterprise-features/encryption-at-rest/#turn-on-encryption","/enterprise-features/#turn-off-encryption":"/enterprise-features/encryption-at-rest/#turn-off-encryption","/enterprise-features/#change-encryption-key":"/enterprise-features/encryption-at-rest/#change-encryption-key","/howto/#metrics-information":"/howto/retrieving-debug-information/#metrics-information","/howto/#profiling-information":"/howto/retrieving-debug-information/#profiling-information","/howto/#cpu-profile":"/howto/retrieving-debug-information/#cpu-profile","/howto/#memory-profile":"/howto/retrieving-debug-information/#memory-profile","/howto/#block-profile":"/howto/retrieving-debug-information/#block-profile","/howto/#goroutine-stack":"/howto/retrieving-debug-information/#goroutine-stack","/howto/#example-usage":"/howto/using-debug-tool/#example-usage","/howto/#debug-tool-output":"/howto/using-debug-tool/#debug-tool-output","/howto/#key-lookup":"/howto/using-debug-tool/#key-lookup","/howto/#key-history":"/howto/using-debug-tool/#key-history","/howto/#basic-integration":"/howto/dgraph-sentry-integration/#basic-integration","/howto/#data-handling":"/howto/dgraph-sentry-integration/#data-handling","/howto/#increment-tool-output":"/howto/using-increment-tool/#increment-tool-output","/howto/#download-zip":"/howto/load-balancing-nginx/#download-zip","/howto/#start-dgraph-cluster":"/howto/load-balancing-nginx/#start-dgraph-cluster","/howto/#use-the-increment-tool-to-start-a-grpc-lb":"/howto/load-balancing-nginx/#use-the-increment-tool-to-start-a-grpc-lb","/howto/#check-logs":"/howto/load-balancing-nginx/#check-logs","/howto/#upsert-procedure":"/howto/upserts/#upsert-procedure","/howto/#upsert-block":"/howto/upserts/#upsert-block","/howto/#conflicts":"/howto/upserts/#conflicts","/howto/#schema-types-scalar-uid-and-list-uid":"/howto/migrate-dgraph-1-1/#schema-types-scalar-uid-and-list-uid","/howto/#type-system":"/howto/migrate-dgraph-1-1/#type-system","/howto/#live-loader-and-bulk-loader-command-line-flags":"/howto/migrate-dgraph-1-1/#live-loader-and-bulk-loader-command-line-flags","/howto/#http-api":"/howto/migrate-dgraph-1-1/#http-api"},urlSplit,origPath,redirectPaths=["clients","query-language","mutations","deploy","enterprise-features","howto","design-concepts"],pathSplit=document.URL.split("/");redirectPaths.includes(pathSplit[pathSplit.length-2])&&(urlSplit=pathSplit[pathSplit.length-1].split("#"),origPath="/"+pathSplit[pathSplit.length-2]+"/#"+urlSplit[1],origPath in subPaths?(loc=""+subPaths[origPath],window.location.replace(loc)):urlSplit[1]&&(loc=""+pathSplit.slice(4,pathSplit.length-1).join("/")+"/#"+urlSplit[1],window.location.replace(loc)))</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta name=generator content="Hugo 0.118.2"><meta name=description content><link rel=canonical href=/deploy/fast-data-loading/bulk-loader/><link rel=apple-touch-icon sizes=57x57 href=/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/images/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/images/favicons/manifest.json><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script>
<script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin=anonymous></script>
<link href=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css rel=stylesheet integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin=anonymous><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin=anonymous></script>
<script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin=anonymous></script><title>Bulk Loader - Deploy</title><link href=/css/theme.css?6a79ff0832398fa8541cbaef6b6dd556 rel=stylesheet><link href=/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script>
<script src=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script>
<link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><link rel=stylesheet href=//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><script>!function(){var t,n,e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(t=0;t<e.methods.length;t++)n=e.methods[t],e[n]=e.factory(n);e.load=function(t,n){var o,s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(s,o),e._loadOptions=n},e._writeKey="aQlf725vSBKhpQnINiGBc6rCtFyVCiAP",e.SNIPPET_VERSION="4.13.2",e.load("aQlf725vSBKhpQnINiGBc6rCtFyVCiAP"),e.page(),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll("a");t.forEach(t=>e.trackLink(t,"Click",{id:t.id,to:t.href,text:t.innerText}))})}}()</script></head><body><nav id=header><div class=header-left><div><a href=https://libremfg.com class=brand><img src=/images/rhize-logo.png alt=RHIZE class=logo></a><div class=logo-tagline><span>Documentation</span></div></div></div><div class=header-right><div style=margin-top:10px><div class="menu-search align-middle"><div class=menu-search-inner><input type=search class="form-control form-control-sm" id=algolia-doc-search placeholder="Search documentation" aria-label="Search docs" autocomplete=off></div></div></div><div><ul class=menu><li><a href=https://libremfg.com/features-gql target=_blank>Home</a></li><li><a href=https://discord.gg/5rPvv2Vy target=_blank>Community</a></li><li><a href=https://github.com/libremfg/libremfg.github.io target=_blank>GitHub</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><div class=menu-header></div><ul class=topics><li class="topic main-topic children"><a id=datahub href=#>DataHub</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/datahub/overview/>Overview</a></li><li class="topic sub-topic"><a href=/datahub/isa-95-data-model/>ISA 95 Data Model</a></li><li class="topic sub-topic"><a href=/datahub/streaming-data/>Streaming Data</a></li></ul></li><li class="topic main-topic"><a href=/>Home</a></li><li class="topic main-topic children"><a id=architecture href=#>Architecture</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/architecture/overview/>Overview</a></li><li class="topic sub-topic"><a href=/architecture/realtime-database-architecture/>Realtime Database</a></li><li class="topic sub-topic"><a href=/architecture/data-hub/>Data Hub Architecture</a></li><li class="topic sub-topic"><a href=/architecture/event-driven-architecture/>Event Driven Architecture</a></li><li class="topic sub-topic"><a href=/architecture/business-process-orchestration/>Business Process Orchestration</a></li></ul></li><li class="topic main-topic children"><a id=bpmn href=#>BPMN</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Events</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/bpmn/events/overview/>Events Overview</a></li><li class="topic sub-topic"><a href=/bpmn/events/message/>Message Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/timer/>Timer Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/signal/>Signal Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/escalation/>Escalation Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/error/>Error Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/conditional/>Conditional Event</a></li><li class="topic sub-topic"><a href=/bpmn/events/compensation/>Compensation Event</a></li></ul></li><li class="topic sub-topic"><a href=#>Gateways</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/bpmn/gateways/overview/>Gateway Overview</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/parallel/>Parallel Gateway</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/inclusive/>Inclusive Gateway</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/complex/>Complex Gateway</a></li><li class="topic sub-topic"><a href=/bpmn/gateways/event-based/>Event Based Gateway</a></li></ul></li><li class="topic sub-topic"><a href=#>Tasks</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/bpmn/tasks/overview/>Tasks Overview</a></li></ul></li></ul></li><li class="topic main-topic children"><a id=graphql href=#>GraphQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/quick-start/>Quick Start</a></li><li class="topic sub-topic"><a href=/graphql/how-dgraph-graphql-works/>How GraphQL works in Dgraph</a></li><li class="topic sub-topic"><a href=#>To-Do List App Tutorial</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-schema-design/>Schema Design</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-ui/>Creating a Basic UI</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth-rules/>Authorization Rules</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-auth0-jwt/>Using Auth0</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/todo-firebase-jwt/>Using Firebase Authentication</a></li><li class="topic sub-topic"><a href=/graphql/todo-app-tutorial/deploy/>Deploying on Dgraph Cloud</a></li></ul></li><li class="topic sub-topic"><a href=#>Authorization</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/authorization/authorization-overview/>KeyCloak Integration</a></li><li class="topic sub-topic"><a href=/graphql/authorization/directive/>The @auth Directive</a></li><li class="topic sub-topic"><a href=/graphql/authorization/mutations/>Mutations</a></li></ul></li><li class="topic sub-topic"><a href=#>API</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/api/api-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/api/requests/>Requests and Responses</a></li><li class="topic sub-topic"><a href=/graphql/api/variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/graphql/api/fragments/>GraphQL Fragments</a></li><li class="topic sub-topic"><a href=/graphql/api/multiples/>Multiple GraphQL Operations in a Request</a></li><li class="topic sub-topic"><a href=/graphql/api/errors/>GraphQL Errors</a></li></ul></li><li class="topic sub-topic"><a href=#>Schema</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/schema/schema-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/schema/reserved/>Reserved Names</a></li><li class="topic sub-topic"><a href=/graphql/schema/migration/>Schema Migration</a></li><li class="topic sub-topic"><a href=/graphql/schema/types/>Types</a></li><li class="topic sub-topic"><a href=/graphql/schema/ids/>IDs</a></li><li class="topic sub-topic"><a href=/graphql/schema/graph-links/>Links in the Graph</a></li><li class="topic sub-topic"><a href=/graphql/schema/search/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/schema/generate/>The @generate Directive</a></li><li class="topic sub-topic"><a href=/graphql/schema/documentation/>Documentation and Comments</a></li><li class="topic sub-topic"><a href=/graphql/schema/deprecated/>Deprecation</a></li><li class="topic sub-topic"><a href=/graphql/schema/dgraph-schema/>Dgraph Schema Fragment</a></li><li class="topic sub-topic"><a href=/graphql/schema/default/>@default Directive</a></li><li class="topic sub-topic"><a href=/graphql/schema/primarykey/>@primaryKey Directive</a></li></ul></li><li class="topic sub-topic"><a href=#>Queries</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/queries/queries-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/queries/search-filtering/>Search and Filtering</a></li><li class="topic sub-topic"><a href=/graphql/queries/aggregate/>Aggregate Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/persistent-queries/>Persistent Queries</a></li><li class="topic sub-topic"><a href=/graphql/queries/and-or-not/>And, Or and Not</a></li><li class="topic sub-topic"><a href=/graphql/queries/cached-results/>Cached Results</a></li><li class="topic sub-topic"><a href=/graphql/queries/order-page/>Order and Pagination</a></li><li class="topic sub-topic"><a href=/graphql/queries/cascade/>@cascade Directive</a></li><li class="topic sub-topic"><a href=/graphql/queries/skip-include/>@skip and @include Directives</a></li></ul></li><li class="topic sub-topic"><a href=#>Mutations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/mutations/mutations-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/mutations/add/>Add</a></li><li class="topic sub-topic"><a href=/graphql/mutations/upsert/>Upsert</a></li><li class="topic sub-topic"><a href=/graphql/mutations/update/>Update</a></li><li class="topic sub-topic"><a href=/graphql/mutations/delete/>Delete</a></li><li class="topic sub-topic"><a href=/graphql/mutations/deep/>Deep</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/subscriptions/>Subscriptions</a></li><li class="topic sub-topic"><a href=#>Custom Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/custom/custom-overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/custom/directive/>The @custom Directive</a></li><li class="topic sub-topic"><a href=/graphql/custom/query/>Custom Queries</a></li><li class="topic sub-topic"><a href=/graphql/custom/mutation/>Custom Mutations</a></li><li class="topic sub-topic"><a href=/graphql/custom/field/>Custom Fields</a></li><li class="topic sub-topic"><a href=/graphql/custom/dql/>Custom DQL</a></li></ul></li><li class="topic sub-topic"><a href=#>Lambda Resolvers</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/graphql/lambda/overview/>Overview</a></li><li class="topic sub-topic"><a href=/graphql/lambda/field/>Lambda Fields</a></li><li class="topic sub-topic"><a href=/graphql/lambda/query/>Lambda Queries</a></li><li class="topic sub-topic"><a href=/graphql/lambda/mutation/>Lambda Mutations</a></li><li class="topic sub-topic"><a href=/graphql/lambda/webhook/>Lambda Webhooks</a></li><li class="topic sub-topic"><a href=/graphql/lambda/server/>Lambda Server</a></li></ul></li><li class="topic sub-topic"><a href=/graphql/directives/>Directives</a></li><li class="topic sub-topic"><a href=/graphql/admin/>Administrative API</a></li><li class="topic sub-topic"><a href=/graphql/dgraph/>GraphQL on Existing Dgraph</a></li><li class="topic sub-topic"><a href=/graphql/federation/>Apollo Federation</a></li></ul></li><li class="topic main-topic children active"><a id=deploy-and-manage href=#>Deploy and Manage</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/overview/>Deployment and Management Overview</a></li><li class="topic sub-topic"><a href=/deploy/download/>Download Dgraph</a></li><li class="topic sub-topic"><a href=/deploy/config/>Configuration</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-zero/>More about Dgraph Zero</a></li><li class="topic sub-topic"><a href=/deploy/dgraph-alpha/>More about Dgraph Alpha</a></li><li class="topic sub-topic"><a href=/deploy/single-host-setup/>Single Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/multi-host-setup/>Multi-Host Setup</a></li><li class="topic sub-topic"><a href=/deploy/kubernetes/>Using Kubernetes</a></li><li class="topic sub-topic"><a href=/deploy/cluster-setup/>Cluster Setup</a></li><li class="topic sub-topic"><a href=/deploy/cluster-checklist/>Cluster Checklist</a></li><li class="topic sub-topic"><a href=/deploy/production-checklist/>Production Checklist</a></li><li class="topic sub-topic"><a href=#>Administration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/dgraph-administration/>Dgraph Administration</a></li><li class="topic sub-topic"><a href=/deploy/log-format/>Logging</a></li><li class="topic sub-topic"><a href=/deploy/ludicrous-mode/>Ludicrous Mode</a></li><li class="topic sub-topic"><a href=/deploy/monitoring/>Monitoring</a></li><li class="topic sub-topic"><a href=/deploy/metrics/>Metrics</a></li><li class="topic sub-topic"><a href=/deploy/tracing/>Tracing</a></li><li class="topic sub-topic"><a href=/deploy/data-compression/>Data compression on Disk</a></li></ul></li><li class="topic sub-topic active"><a href=#>Fast Data Loading</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/fast-data-loading/overview/>Overview</a></li><li class="topic sub-topic active"><a href=/deploy/fast-data-loading/bulk-loader/>Bulk Loader</a></li><li class="topic sub-topic"><a href=/deploy/fast-data-loading/live-loader/>Live Loader</a></li></ul></li><li class="topic sub-topic"><a href=#>Security</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/deploy/ports-usage/>Ports Usage</a></li><li class="topic sub-topic"><a href=/deploy/tls-configuration/>TLS Configuration</a></li></ul></li><li class="topic sub-topic"><a href=/deploy/decrypt/>Data Decryption</a></li><li class="topic sub-topic"><a href=/deploy/cli-command-reference/>Dgraph CLI Reference</a></li><li class="topic sub-topic"><a href=/deploy/troubleshooting/>Troubleshooting</a></li></ul></li><li class="topic main-topic children"><a id=isa-95 href=#>ISA 95</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/isa95/operationsevents/>Operations Events</a></li></ul></li><li class="topic main-topic"><a href=/releases/>Releases</a></li><li class="topic main-topic children"><a id=old href=#>old</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/old/dgraph-overview/>Dgraph Overview</a></li><li class="topic sub-topic"><a href=#>DQL reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/old/query-language/graphql-fundamentals/>DQL Fundamentals</a></li><li class="topic sub-topic"><a href=/old/query-language/functions/>Functions</a></li><li class="topic sub-topic"><a href=/old/query-language/connecting-filters/>Connecting Filters</a></li><li class="topic sub-topic"><a href=/old/query-language/alias/>Aliases</a></li><li class="topic sub-topic"><a href=/old/query-language/pagination/>Pagination in DQL</a></li><li class="topic sub-topic"><a href=/old/query-language/count/>Count</a></li><li class="topic sub-topic"><a href=/old/mutations/>Mutations</a></li><li class="topic sub-topic"><a href=/old/query-language/sorting/>Sorting</a></li><li class="topic sub-topic"><a href=/old/query-language/multiple-query-blocks/>Multiple Query Blocks</a></li><li class="topic sub-topic"><a href=/old/query-language/query-variables/>Query Variables</a></li><li class="topic sub-topic"><a href=/old/query-language/value-variables/>Value Variables</a></li><li class="topic sub-topic"><a href=/old/query-language/aggregation/>Aggregation</a></li><li class="topic sub-topic"><a href=/old/query-language/math-on-value-variables/>Math on Value Variables</a></li><li class="topic sub-topic"><a href=/old/query-language/groupby/>GroupBy</a></li><li class="topic sub-topic"><a href=/old/query-language/expand-predicates/>Expand Predicates</a></li><li class="topic sub-topic"><a href=/old/query-language/cascade-directive/>Cascade Directive</a></li><li class="topic sub-topic"><a href=/old/query-language/normalize-directive/>@normalize Directive</a></li><li class="topic sub-topic"><a href=/old/query-language/ignorereflex-directive/>@ignorereflex Directive</a></li><li class="topic sub-topic"><a href=/old/query-language/debug/>Debug</a></li><li class="topic sub-topic"><a href=/old/query-language/schema/>Schemas in DQL</a></li><li class="topic sub-topic"><a href=/old/query-language/type-system/>Type System</a></li><li class="topic sub-topic"><a href=/old/query-language/facets/>Facets and Edge Attributes</a></li><li class="topic sub-topic"><a href=/old/query-language/kshortest-path-quries/>Shortest Path Queries</a></li><li class="topic sub-topic"><a href=/old/query-language/recurse-query/>Recurse Query</a></li><li class="topic sub-topic"><a href=/old/query-language/fragments/>Fragments</a></li><li class="topic sub-topic"><a href=/old/query-language/graphql-variables/>GraphQL Variables</a></li><li class="topic sub-topic"><a href=/old/query-language/indexing-custom-tokenizers/>Indexing with Custom Tokenizers</a></li></ul></li><li class="topic sub-topic"><a href=#>Migration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/old/migration/loading-csv-data/>Loading CSV Data</a></li><li class="topic sub-topic"><a href=/old/migration/migrate-tool/>Migration Tool</a></li><li class="topic sub-topic"><a href=/old/migration/migrate-dgraph-1-1/>Migrate from Dgraph v1.0</a></li><li class="topic sub-topic"><a href=/old/migration/dgraph-compared-to-other-databases/>Dgraph Compared to Other Databases</a></li></ul></li><li class="topic sub-topic"><a href=#>How To Guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/old/howto/retrieving-debug-information/>Retrieving Debug Information</a></li><li class="topic sub-topic"><a href=/old/howto/completion/>Shell Completion</a></li><li class="topic sub-topic"><a href=/old/howto/using-debug-tool/>Using the Debug Tool</a></li><li class="topic sub-topic"><a href=/old/howto/dgraph-sentry-integration/>Using the Dgraph Sentry Integration</a></li><li class="topic sub-topic"><a href=/old/howto/using-increment-tool/>Using the Increment Tool</a></li><li class="topic sub-topic"><a href=/old/howto/giving-nodes-type/>Giving Nodes a Type</a></li><li class="topic sub-topic"><a href=/old/howto/login-system/>A Simple Login System</a></li><li class="topic sub-topic"><a href=/old/howto/load-balancing-nginx/>Load Balancing Queries with NGINX</a></li><li class="topic sub-topic"><a href=/old/howto/upserts/>Upserts</a></li><li class="topic sub-topic"><a href=/old/howto/jepsen-tests/>Run Jepsen Tests</a></li><li class="topic sub-topic"><a href=/old/howto/lambda-webhooks-example/>Lambda Webhooks Example</a></li></ul></li><li class="topic sub-topic"><a href=#>Design Concepts</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=/old/design-concepts/transactions-faq/>Transactions: FAQ</a></li><li class="topic sub-topic"><a href=/old/design-concepts/concepts/>Concepts</a></li><li class="topic sub-topic"><a href=/old/design-concepts/minimizing-network-calls/>How Dgraph Minimizes Network Calls</a></li><li class="topic sub-topic"><a href=/old/design-concepts/raft/>RAFT</a></li></ul></li><li class="topic sub-topic"><a href=/old/faq/>FAQ</a></li><li class="topic sub-topic"><a href=/old/get-started/>Get Started - Quickstart Guide</a></li><li class="topic sub-topic"><a href=/old/tips/>Tips and Tricks with DQL</a></li></ul></li></ul><ul class=sidebar-menu><li><a href=https://dgraph.io/ target=_blank>Home</a></li><li><a href=https://discuss.dgraph.io/ target=_blank>Community</a></li><li><a href=https://github.com/dgraph-io/dgraph target=_blank>GitHub</a></li></ul></aside><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#settings>Settings</a><ul><li><a href=#other-bulk-loader-options>Other Bulk Loader options</a></li></ul></li><li><a href=#load-from-s3>Load from S3</a><ul><li><a href=#iam-setup>IAM setup</a></li></ul></li><li><a href=#load-from-minio>Load from MinIO</a></li><li><a href=#how-to-properly-bulk-load>How to properly bulk load</a><ul><li><a href=#for-small-datasets>For small datasets</a></li><li><a href=#for-bigger-datasets>For bigger datasets</a></li><li><a href=#using-p-directories-coming-from-different-dgraph-clusters>Using &ldquo;p&rdquo; directories coming from different Dgraph clusters</a></li></ul></li><li><a href=#enterprise-features>Enterprise Features</a><ul><li><a href=#multi-tenancy-enterprise-feature>Multi-tenancy (Enterprise Feature)</a></li><li><a href=#encryption-at-rest-enterprise-feature>Encryption at rest (Enterprise Feature)</a></li><li><a href=#encrypting-imports-enterprise-feature>Encrypting imports (Enterprise Feature)</a></li></ul></li><li><a href=#tuning--monitoring>Tuning & monitoring</a><ul><li><a href=#performance-tuning>Performance Tuning</a></li></ul></li></ul></nav></div><article><a class=question-btn target=_blank href=https://discord.gg/5rPvv2Vy><i class="fa fa-question-circle"></i> Ask a Question</a><h1 class=post-title>Bulk Loader</h1><div><p>Dgraph Bulk Loader serves a similar purpose to the Dgraph Live Loader, but can
only be used to load data into a new cluster. It cannot be run on an existing
Dgraph cluster. Dgraph Bulk Loader is <strong>considerably faster</strong> than the Dgraph
Live Loader and is the recommended way to perform the initial import of large
datasets into Dgraph.</p><p>Only one or more Dgraph Zeros should be running for bulk loading. Dgraph Alphas
will be started later.</p><p>You can <a href=https://blog.dgraph.io/post/bulkloader/>read some technical details</a>
about the bulk loader on the blog.</p><div class="notices warning"><span class=type>Warning</span> Don&rsquo;t use the Bulk loader once the Dgraph cluster is up and running. Use it to import
your existing data to a new cluster.</div><div class="notices tip"><span class=type>Tip</span> It&rsquo;s crucial to tune the bulk loader&rsquo;s flags to get good performance. See the
next section for details.</div><h2 id=settings>Settings</h2><div class="notices note"><span class=type>Note</span> Bulk Loader only accept <a href=https://www.w3.org/TR/n-quads/>RDF N-Quad/Triple
data</a> or JSON in plain or gzipped format. Data
in other formats must be converted.</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ dgraph bulk --help <span style=color:green># To see the available flags.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Read RDFs or JSON from the passed file.</span>
</span></span><span style=display:flex><span>$ dgraph bulk -f &lt;path-to-gzipped-RDF-or-JSON-file&gt; ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Read multiple RDFs or JSON from the passed path.</span>
</span></span><span style=display:flex><span>$ dgraph bulk -f &lt;./path-to-gzipped-RDF-or-JSON-files&gt; ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Read multiple files strictly by name.</span>
</span></span><span style=display:flex><span>$ dgraph bulk -f &lt;file1.rdf, file2.rdf&gt; ...
</span></span></code></pre></div><ul><li><p><strong>Reduce shards</strong>: Before running the bulk load, you need to decide how many
Alpha groups will be running when the cluster starts. The number of Alpha groups
will be the same number of reduce shards you set with the <code>--reduce_shards</code>
flag. For example, if your cluster will run 3 Alpha with 3 replicas per group,
then there is 1 group and <code>--reduce_shards</code> should be set to 1. If your cluster
will run 6 Alphas with 3 replicas per group, then there are 2 groups and
<code>--reduce_shards</code> should be set to 2.</p></li><li><p><strong>Map shards</strong>: The <code>--map_shards</code> option must be set to at least what&rsquo;s set for
<code>--reduce_shards</code>. A higher number helps the bulk loader evenly distribute
predicates between the reduce shards.</p></li></ul><p>For example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ dgraph bulk -f goldendata.rdf.gz -s goldendata.schema --map_shards=4 --reduce_shards=2 --http localhost:8000 --zero=localhost:5080
</span></span></code></pre></div><pre tabindex=0><code>{
	&#34;DataFiles&#34;: &#34;goldendata.rdf.gz&#34;,
	&#34;DataFormat&#34;: &#34;&#34;,
	&#34;SchemaFile&#34;: &#34;goldendata.schema&#34;,
	&#34;DgraphsDir&#34;: &#34;out&#34;,
	&#34;TmpDir&#34;: &#34;tmp&#34;,
	&#34;NumGoroutines&#34;: 4,
	&#34;MapBufSize&#34;: 67108864,
	&#34;ExpandEdges&#34;: true,
	&#34;SkipMapPhase&#34;: false,
	&#34;CleanupTmp&#34;: true,
	&#34;NumShufflers&#34;: 1,
	&#34;Version&#34;: false,
	&#34;StoreXids&#34;: false,
	&#34;ZeroAddr&#34;: &#34;localhost:5080&#34;,
	&#34;HttpAddr&#34;: &#34;localhost:8000&#34;,
	&#34;IgnoreErrors&#34;: false,
	&#34;MapShards&#34;: 4,
	&#34;ReduceShards&#34;: 2
}
The bulk loader needs to open many files at once. This number depends on the size of the data set loaded, the map file output size, and the level of indexing. 100,000 is adequate for most data set sizes. See `man ulimit` for details of how to change the limit.
Current max open files limit: 1024
MAP 01s rdf_count:176.0 rdf_speed:174.4/sec edge_count:564.0 edge_speed:558.8/sec
MAP 02s rdf_count:399.0 rdf_speed:198.5/sec edge_count:1.291k edge_speed:642.4/sec
MAP 03s rdf_count:666.0 rdf_speed:221.3/sec edge_count:2.164k edge_speed:718.9/sec
MAP 04s rdf_count:952.0 rdf_speed:237.4/sec edge_count:3.014k edge_speed:751.5/sec
MAP 05s rdf_count:1.327k rdf_speed:264.8/sec edge_count:4.243k edge_speed:846.7/sec
MAP 06s rdf_count:1.774k rdf_speed:295.1/sec edge_count:5.720k edge_speed:951.5/sec
MAP 07s rdf_count:2.375k rdf_speed:338.7/sec edge_count:7.607k edge_speed:1.085k/sec
MAP 08s rdf_count:3.697k rdf_speed:461.4/sec edge_count:11.89k edge_speed:1.484k/sec
MAP 09s rdf_count:71.98k rdf_speed:7.987k/sec edge_count:225.4k edge_speed:25.01k/sec
MAP 10s rdf_count:354.8k rdf_speed:35.44k/sec edge_count:1.132M edge_speed:113.1k/sec
MAP 11s rdf_count:610.5k rdf_speed:55.39k/sec edge_count:1.985M edge_speed:180.1k/sec
MAP 12s rdf_count:883.9k rdf_speed:73.52k/sec edge_count:2.907M edge_speed:241.8k/sec
MAP 13s rdf_count:1.108M rdf_speed:85.10k/sec edge_count:3.653M edge_speed:280.5k/sec
MAP 14s rdf_count:1.121M rdf_speed:79.93k/sec edge_count:3.695M edge_speed:263.5k/sec
MAP 15s rdf_count:1.121M rdf_speed:74.61k/sec edge_count:3.695M edge_speed:246.0k/sec
REDUCE 16s [1.69%] edge_count:62.61k edge_speed:62.61k/sec plist_count:29.98k plist_speed:29.98k/sec
REDUCE 17s [18.43%] edge_count:681.2k edge_speed:651.7k/sec plist_count:328.1k plist_speed:313.9k/sec
REDUCE 18s [33.28%] edge_count:1.230M edge_speed:601.1k/sec plist_count:678.9k plist_speed:331.8k/sec
REDUCE 19s [45.70%] edge_count:1.689M edge_speed:554.4k/sec plist_count:905.9k plist_speed:297.4k/sec
REDUCE 20s [60.94%] edge_count:2.252M edge_speed:556.5k/sec plist_count:1.278M plist_speed:315.9k/sec
REDUCE 21s [93.21%] edge_count:3.444M edge_speed:681.5k/sec plist_count:1.555M plist_speed:307.7k/sec
REDUCE 22s [100.00%] edge_count:3.695M edge_speed:610.4k/sec plist_count:1.778M plist_speed:293.8k/sec
REDUCE 22s [100.00%] edge_count:3.695M edge_speed:584.4k/sec plist_count:1.778M plist_speed:281.3k/sec
Total: 22s
</code></pre><p>The output will be generated in the <code>out</code> directory by default. Here&rsquo;s the bulk
load output from the example above:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ tree ./out
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>./out
</span></span><span style=display:flex><span>├── 0
</span></span><span style=display:flex><span>│   └── p
</span></span><span style=display:flex><span>│       ├── 000000.vlog
</span></span><span style=display:flex><span>│       ├── 000002.sst
</span></span><span style=display:flex><span>│       └── MANIFEST
</span></span><span style=display:flex><span>└── 1
</span></span><span style=display:flex><span>    └── p
</span></span><span style=display:flex><span>        ├── 000000.vlog
</span></span><span style=display:flex><span>        ├── 000002.sst
</span></span><span style=display:flex><span>        └── MANIFEST
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>4 directories, 6 files
</span></span></code></pre></div><p>Because <code>--reduce_shards</code> was set to <code>2</code>, two sets of <code>p</code> directories are generated:</p><ul><li>the <code>./out/0</code> folder</li><li>the <code>./out/1</code> folder</li></ul><p>Once the output is created, the files must be copied to all the servers that will run
Dgraph Alphas:</p><ul><li>Each replica of the first group (<code>Alpha1</code>, <code>Alpha2</code>, <code>Alpha3</code>) should have a copy of <code>./out/0/p</code></li><li>Each replica of the second group (<code>Alpha4</code>, <code>Alpha5</code>, <code>Alpha6</code>) should have a copy of <code>./out/1/p</code>, and so on.</li></ul><div class="notices note"><span class=type>Note</span> Each Dgraph Alpha must have a copy of the group&rsquo;s <code>p</code> directory output.</div><p><img src=/images/deploy/bulk-loader.png alt="Bulk Loader diagram"></p><h3 id=other-bulk-loader-options>Other Bulk Loader options</h3><p>You can further configure Bulk Loader using the following options:</p><ul><li><p><code>--schema</code>, <code>-s</code>: set the location of the schema file.</p></li><li><p><code>--graphql_schema</code>, <code>-g</code> (optional): set the location of the GraphQL schema file.</p></li><li><p><code>--badger</code> superflag&rsquo;s <code>compression</code> option: Configure the compression of data
on disk. By default, the Snappy compression format is used, but you can also use
Zstandard compression. Or, you can choose no compression to minimize CPU usage.
To learn more, see <a href=/deploy/data-compression/>Data Compression on Disk</a>.</p></li><li><p><code>--new_uids</code>: (default: false): Assign new UIDs instead of using the existing
UIDs in data files. This is useful to avoid overriding the data in a DB already
in operation.</p></li><li><p><code>-f</code>, <code>--files</code>: Location of <code>*.rdf(.gz)</code> or <code>*.json(.gz)</code> file(s) to load. It can
load multiple files in a given path. If the path is a directory, then all files
ending in <code>.rdf</code>, <code>.rdf.gz</code>, <code>.json</code>, and <code>.json.gz</code> will be loaded.</p></li><li><p><code>--format</code> (optional): Specify file format (<code>rdf</code> or <code>json</code>) instead of getting it from
filenames. This is useful if you need to define a strict format manually.</p></li><li><p><code>--store_xids</code>: Generate a xid edge for each node. It will store the XIDs (The identifier / Blank-nodes) in an attribute named <code>xid</code> in the entity itself. It is useful if you gonna
use <a href=/old/mutations/external-ids/>External IDs</a>.</p></li><li><p><code>--xidmap</code> (default: <code>disabled</code>. Need a path): Store xid to uid mapping to a directory. Dgraph will save all identifiers used in the load for later use in other data ingest operations. The mapping will be saved in the path you provide and you must indicate that same path in the next load. It is recommended to use this flag if you have full control over your identifiers (Blank-nodes). Because the identifier will be mapped to a specific UID.</p></li><li><p><code>--vault</code> superflag (and its options): specify the Vault server address, role id, secret id, and
field that contains the encryption key required to decrypt the encrypted export.</p></li></ul><h2 id=load-from-s3>Load from S3</h2><p>To bulk load from Amazon S3, you must have either <a href=#iam-setup>IAM</a> or the following AWS credentials set
via environment variables:</p><table><thead><tr><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>AWS_ACCESS_KEY_ID</code> or <code>AWS_ACCESS_KEY</code></td><td>AWS access key with permissions to write to the destination bucket.</td></tr><tr><td><code>AWS_SECRET_ACCESS_KEY</code> or <code>AWS_SECRET_KEY</code></td><td>AWS access key with permissions to write to the destination bucket.</td></tr></tbody></table><h3 id=iam-setup>IAM setup</h3><p>In AWS, you can accomplish this by doing the following:</p><ol><li>Create an <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html>IAM Role</a> with an IAM Policy that grants access to the S3 bucket.</li><li>Depending on whether you want to grant access to an EC2 instance, or to a pod running on <a href=https://aws.amazon.com/eks/>EKS</a>, you can do one of these options:<ul><li><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html>Instance Profile</a> can pass the IAM Role to an EC2 Instance</li><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html>IAM Roles for Amazon EC2</a> to attach the IAM Role to a running EC2 Instance</li><li><a href=https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html>IAM roles for service accounts</a> to associate the IAM Role to a <a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/>Kubernetes Service Account</a>.</li></ul></li></ol><p>Once your setup is ready, you can execute the bulk load from S3:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph bulk -f s3:///bucket-name/directory-with-rdf -s s3:///bucket-name/directory-with-rdf/schema.txt
</span></span></code></pre></div><h2 id=load-from-minio>Load from MinIO</h2><p>To bulk load from MinIO, you must have the following MinIO credentials set via
environment variables:</p><table><thead><tr><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>MINIO_ACCESS_KEY</code></td><td>Minio access key with permissions to write to the destination bucket.</td></tr><tr><td><code>MINIO_SECRET_KEY</code></td><td>Minio secret key with permissions to write to the destination bucket.</td></tr></tbody></table><p>Once your setup is ready, you can execute the bulk load from MinIO:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph bulk -f minio://minio-server:port/bucket-name/directory-with-rdf -s minio://minio-server:port/bucket-name/directory-with-rdf/schema.txt
</span></span></code></pre></div><h2 id=how-to-properly-bulk-load>How to properly bulk load</h2><p>Starting from Dgraph v20.03.7, v20.07.3 and v20.11.0 onwards, depending on your dataset size, you can follow one of the following ways to use bulk loader and initialize your new Cluster.</p><p><em>The following procedure is particularly relevant for Clusters that have <code>--replicas</code> flag greater than 1</em></p><h3 id=for-small-datasets>For small datasets</h3><p>In case your dataset is small (a few GBs) it would be convenient to start by initializing just one Alpha node and then let the snapshot be streamed among the other Alpha replicas. You can follow these steps:</p><ol><li>Run bulk loader only on one server</li><li>Once the <code>p</code> directory has been created by the bulk loader, then start <strong>only</strong> the first Alpha replica</li><li>Wait for 1 minute to ensure that a snapshot has been taken by the first Alpha node replica. You can confirm that a snapshot has been taken by looking for the following message":</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>I1227 13:12:24.202196   14691 draft.go:571] Creating snapshot at index: 30. ReadTs: 4.
</span></span></code></pre></div><ol start=4><li>After confirming that the snapshot has been taken, you can start the other Alpha node replicas (number of Alpha nodes must be equal to the <code>--replicas</code> flag value set in the zero nodes). Now the Alpha node (the one started in point 2) will be printing similar messages:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>I1227 13:18:16.154674   16779 snapshot.go:246] Streaming done. Sent 1093470 entries. Waiting for ACK...
</span></span><span style=display:flex><span>I1227 13:18:17.126494   16779 snapshot.go:251] Received ACK with done: true
</span></span><span style=display:flex><span>I1227 13:18:17.126514   16779 snapshot.go:292] Stream snapshot: OK
</span></span></code></pre></div><p>These messages indicate that all replica nodes are now using the same snapshot. Thus, all your data is correctly in sync across the cluster. Also, the other alpha nodes will be printing (in their logs) something similar to:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>I1227 13:18:17.126621    1720 draft.go:567] Skipping snapshot at 28, because found one at 28
</span></span></code></pre></div><h3 id=for-bigger-datasets>For bigger datasets</h3><p>When your dataset is pretty big (e.g. dataset size > 10GB) it will be faster that you just copy the generated <code>p</code> directory (by the bulk loader) among all the Alphas nodes. You can follow these steps:</p><ol><li>Run bulk loader only on one server</li><li>Copy (or use <code>rsync</code>) the <code>p</code> directory to the other servers (the servers you will be using to start the other Alpha nodes)</li><li>Now, start all Alpha nodes at the same time</li></ol><p>If the process went well <strong>all</strong> Alpha nodes will take a snapshot after 1 minute. You will be seeing something similar to this in the Alpha logs:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>I1227 13:27:53.959671   29781 draft.go:571] Creating snapshot at index: 34. ReadTs: 6.
</span></span></code></pre></div><p>Note that <code>snapshot at index</code> value must be the same within the same Alpha group and <code>ReadTs</code> must be the same value within and among all the Alpha groups.</p><h3 id=using-p-directories-coming-from-different-dgraph-clusters>Using &ldquo;p&rdquo; directories coming from different Dgraph clusters</h3><p>In some cases, you might want to use the <code>p</code> directory from an existing Dgraph cluster when creating a new cluster. You can do this by copying the <code>p</code> directory from your current Dgraph cluster into the new cluster, but you will need to perform an additional step before starting the Alpha nodes in the new cluster, as described below.</p><p>After starting your Zero nodes, you need to increase the Zero&rsquo;s timestamp by sending the following <code>curl</code> request to the Zero leader node:</p><pre tabindex=0><code>curl &#34;zero_address:port/assign?what=timestamps&amp;num=X&#34; #with X = high number e.g. 100000 or higher
</code></pre><p>This will print the following message:</p><pre tabindex=0><code>{&#34;startId&#34;:&#34;1&#34;,&#34;endId&#34;:&#34;10000000&#34;,&#34;readOnly&#34;:&#34;0&#34;}
</code></pre><p>Now you need to confirm whether this timestamp has been increased as expected. You can do this by sending a <code>curl</code> request to the zero <code>/state</code> endpoint, as follows:</p><pre tabindex=0><code>curl zero-address:port/state | jq
</code></pre><p>At the end of the response, look for the value shown for <code>"maxTxnTs"</code>. This value should be greater than or equal to the timestamp you assigned in the previous <code>curl</code> request, as shown in the following example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>  <span style=color:#a31515>&#34;maxLeaseId&#34;</span><span>:</span> <span style=color:#a31515>&#34;0&#34;</span><span>,</span>
</span></span><span style=display:flex><span>  <span style=color:#a31515>&#34;maxTxnTs&#34;</span><span>:</span> <span style=color:#a31515>&#34;10010000&#34;</span><span>,</span>
</span></span><span style=display:flex><span>  <span style=color:#a31515>&#34;maxRaftId&#34;</span><span>:</span> <span style=color:#a31515>&#34;0&#34;</span><span>,</span>
</span></span><span style=display:flex><span>  <span style=color:#a31515>&#34;removed&#34;</span><span>:</span> []<span>,</span>
</span></span><span style=display:flex><span>  <span style=color:#a31515>&#34;cid&#34;</span><span>:</span> <span style=color:#a31515>&#34;47285b0d-6223-421e-aab5-e6910620a8ed&#34;</span><span>,</span>
</span></span><span style=display:flex><span>  <span style=color:#a31515>&#34;license&#34;</span><span>:</span> {
</span></span><span style=display:flex><span>    &#34;user&#34;: <span style=color:#a31515>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    &#34;maxNodes&#34;: <span style=color:#a31515>&#34;18446744073709551615&#34;</span>,
</span></span><span style=display:flex><span>    &#34;expiryTs&#34;: <span style=color:#a31515>&#34;1619041648&#34;</span>,
</span></span><span style=display:flex><span>    &#34;enabled&#34;: <span style=color:#00f>true</span>
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><p>Now, start your Alpha nodes and check that the Snapshot created has a <code>ReadTs</code> value that&rsquo;s greater than or equal to the <code>"maxTxnTs"</code> value you viewed in the previous step.</p><pre tabindex=0><code>I0322 14:52:40.858626 2885131 draft.go:606] Creating snapshot at Index: 180, ReadTs: 10000011
</code></pre><h2 id=enterprise-features>Enterprise Features</h2><h3 id=multi-tenancy-enterprise-feature>Multi-tenancy (Enterprise Feature)</h3><p>By default, Bulk loader preserves the namespace in the data and schema files.
If there&rsquo;s no namespace information available, it loads the data into the default namespace.</p><p>Using the <code>--force-namespace</code> flag, you can load all the data into a specific namespace.
In that case, the namespace information from the data and schema files will be ignored.</p><p>For example, to force the bulk data loading into namespace <code>123</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dgraph bulk -s /tmp/data/1million.schema -f /tmp/data/1million.rdf.gz --force-namespace 123
</span></span></code></pre></div><h3 id=encryption-at-rest-enterprise-feature>Encryption at rest (Enterprise Feature)</h3><p>Even before the Dgraph cluster starts, we can load data using Bulk Loader with the encryption feature turned on. Later we can point the generated <code>p</code> directory to a new Alpha server.</p><p>Here&rsquo;s an example to run Bulk Loader with a key used to write encrypted data:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dgraph bulk --encryption key-file=./enc_key_file -f data.json.gz -s data.schema --map_shards=1 --reduce_shards=1 --http localhost:8000 --zero=localhost:5080
</span></span></code></pre></div><p>Alternatively, starting with v20.07.0, the <code>vault_*</code> options can be used to decrypt the encrypted export.</p><h3 id=encrypting-imports-enterprise-feature>Encrypting imports (Enterprise Feature)</h3><p>The Bulk Loader’s <code>--encryption key-file=value</code> option was previously used to encrypt the output <code>p</code> directory. This same option will also be used to decrypt the encrypted export data and schema files.</p><p>Another option, <code>--encrypted</code>, indicates whether the input <code>rdf</code>/<code>json</code> data and schema files are encrypted or not. With this switch, we support the use case of migrating data from unencrypted exports to encrypted import.</p><p>So, with the above two options we have 4 cases:</p><ol><li><code>--encrypted=true</code> and no <code>encryption key-file=value</code>.</li></ol><p>Error: If the input is encrypted, a key file must be provided.</p><ol start=2><li><code>--encrypted=true</code> and <code>encryption key-file=path-to-key</code>.</li></ol><p>Input is encrypted and output <code>p</code> dir is encrypted as well.</p><ol start=3><li><code>--encrypted=false</code> and no <code>encryption key-file=value</code>.</li></ol><p>Input is not encrypted and the output <code>p</code> dir is also not encrypted.</p><ol start=4><li><code>--encrypted=false</code> and <code>encryption key-file=path-to-key</code>.</li></ol><p>Input is not encrypted but the output is encrypted. (This is the migration use case mentioned above).</p><p>Alternatively, starting with v20.07.0, the <code>vault_*</code> options can be used instead of the <code>--encryption key-file=value</code> option above to achieve the same effect except that the keys are sitting in a Vault server.</p><h2 id=tuning--monitoring>Tuning & monitoring</h2><h3 id=performance-tuning>Performance Tuning</h3><div class="notices tip"><span class=type>Tip</span> We highly recommend <a href=https://askubuntu.com/questions/214805/how-do-i-disable-swap>disabling swap
space</a> when
running Bulk Loader. It is better to fix the parameters to decrease memory
usage, than to have swapping grind the loader down to a halt.</div><p>Flags can be used to control the behavior and performance characteristics of
the bulk loader. You can see the full list by running <code>dgraph bulk --help</code>. In
particular, <strong>you should tune the flags so that Bulk Loader doesn&rsquo;t use more
memory than is available as RAM</strong>. If it starts swapping, it will become
incredibly slow.</p><p><strong>In the map phase</strong>, tweaking the following flags can reduce memory usage:</p><ul><li><p>The <code>--num_go_routines</code> flag controls the number of worker threads. Lowering reduces memory
consumption.</p></li><li><p>The <code>--mapoutput_mb</code> flag controls the size of the map output files. Lowering
reduces memory consumption.</p></li></ul><p>For bigger datasets and machines with many cores, gzip decoding can be a
bottleneck during the map phase. Performance improvements can be obtained by
first splitting the RDFs up into many <code>.rdf.gz</code> files (e.g. 256MB each). This
has a negligible impact on memory usage.</p><p><strong>The reduce phase</strong> is less memory heavy than the map phase, although can still
use a lot. Some flags may be increased to improve performance, <em>but only if
you have large amounts of RAM</em>:</p><ul><li><p>The <code>--reduce_shards</code> flag controls the number of resultant Dgraph alpha instances.
Increasing this increases memory consumption, but in exchange allows for
higher CPU utilization.</p></li><li><p>The <code>--map_shards</code> flag controls the number of separate map output shards.
Increasing this increases memory consumption but balances the resultant
Dgraph alpha instances more evenly.</p></li></ul></div><div class=post__comments><footer class=clearfix><a class=question-btn target=_blank href=https://discord.gg/5rPvv2Vy><i class="fa fa-question-circle"></i> Ask a Question</a>
<a class=edit-btn target=_blank href=https://github.com/libremfg/libremfg.github.io/issues><i class="fa fa-github-alt"></i> Edit Page</a></footer></div></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#settings>Settings</a><ul><li><a href=#other-bulk-loader-options>Other Bulk Loader options</a></li></ul></li><li><a href=#load-from-s3>Load from S3</a><ul><li><a href=#iam-setup>IAM setup</a></li></ul></li><li><a href=#load-from-minio>Load from MinIO</a></li><li><a href=#how-to-properly-bulk-load>How to properly bulk load</a><ul><li><a href=#for-small-datasets>For small datasets</a></li><li><a href=#for-bigger-datasets>For bigger datasets</a></li><li><a href=#using-p-directories-coming-from-different-dgraph-clusters>Using &ldquo;p&rdquo; directories coming from different Dgraph clusters</a></li></ul></li><li><a href=#enterprise-features>Enterprise Features</a><ul><li><a href=#multi-tenancy-enterprise-feature>Multi-tenancy (Enterprise Feature)</a></li><li><a href=#encryption-at-rest-enterprise-feature>Encryption at rest (Enterprise Feature)</a></li><li><a href=#encrypting-imports-enterprise-feature>Encrypting imports (Enterprise Feature)</a></li></ul></li><li><a href=#tuning--monitoring>Tuning & monitoring</a><ul><li><a href=#performance-tuning>Performance Tuning</a></li></ul></li></ul></nav></div></div></main><div class="modal fade" id=runnable-modal tabindex=-1 role=dialog aria-labelledby=exampleModalLabel aria-hidden=true><a href=# data-dismiss=modal class=modal-close-btn>Close</a><div class=modal-dialog role=document><div class=modal-content><div class=modal-body></div></div></div></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script>
<script type=text/javascript>if(window.docsearch){var version="latest",path=window.location.pathname,arr=/(?:\/)?((?:master)|(?:v[0-9][^/]+))(?:\/)?.*$/.exec(path);arr!=null&&arr.length>1&&(version=arr[1]),window.docsearch({apiKey:"fe4cbc1640c6c87bbc5f099902d86f97",indexName:"dgraph",inputSelector:"#algolia-doc-search",algoliaOptions:{filters:`version:${version}`},debug:!1})}</script><script type=text/javascript>adroll_adv_id="L42C3U2UXBBPVAMISVXVLC",adroll_pix_id="MOR4VUNPK5B2LHEZ2NNTDX",adroll_version="2.0",function(e,t,n,s,o){e.__adroll_loaded=!0,e.adroll=e.adroll||[],e.adroll.f=["setProperties","identify","track"];var i="https://s.adroll.com/j/"+adroll_adv_id+"/roundtrip.js";for(o=0;o<e.adroll.f.length;o++)e.adroll[e.adroll.f[o]]=e.adroll[e.adroll.f[o]]||function(t){return function(){e.adroll.push([t,arguments])}}(e.adroll.f[o]);n=t.createElement("script"),s=t.getElementsByTagName("script")[0],n.async=1,n.src=i,s.parentNode.insertBefore(n,s)}(window,document),adroll.track("pageView")</script><script src=/js/clipboard.min.js></script>
<script src=/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script>
<script src=/js/runnable.js?6e7f328df4134d18ba5c8dd11f84deb8></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>